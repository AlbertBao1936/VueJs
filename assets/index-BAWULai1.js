(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Z_(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const mt={},Cc=[],Ar=()=>{},Nx=()=>!1,ap=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),ey=n=>n.startsWith("onUpdate:"),In=Object.assign,ty=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},kx=Object.prototype.hasOwnProperty,rt=(n,e)=>kx.call(n,e),Ae=Array.isArray,Pc=n=>bh(n)==="[object Map]",cp=n=>bh(n)==="[object Set]",Vw=n=>bh(n)==="[object Date]",Ne=n=>typeof n=="function",Xt=n=>typeof n=="string",kr=n=>typeof n=="symbol",vt=n=>n!==null&&typeof n=="object",MA=n=>(vt(n)||Ne(n))&&Ne(n.then)&&Ne(n.catch),FA=Object.prototype.toString,bh=n=>FA.call(n),Dx=n=>bh(n).slice(8,-1),UA=n=>bh(n)==="[object Object]",ny=n=>Xt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Ru=Z_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lp=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Ox=/-(\w)/g,sr=lp(n=>n.replace(Ox,(e,t)=>t?t.toUpperCase():"")),xx=/\B([A-Z])/g,Ua=lp(n=>n.replace(xx,"-$1").toLowerCase()),up=lp(n=>n.charAt(0).toUpperCase()+n.slice(1)),Gm=lp(n=>n?`on${up(n)}`:""),no=(n,e)=>!Object.is(n,e),Gd=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},$A=(n,e,t,s=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:s,value:t})},Mg=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Mw;const BA=()=>Mw||(Mw=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sy(n){if(Ae(n)){const e={};for(let t=0;t<n.length;t++){const s=n[t],r=Xt(s)?Fx(s):sy(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(Xt(n)||vt(n))return n}const Lx=/;(?![^(]*\))/g,Vx=/:([^]+)/,Mx=/\/\*[^]*?\*\//g;function Fx(n){const e={};return n.replace(Mx,"").split(Lx).forEach(t=>{if(t){const s=t.split(Vx);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ry(n){let e="";if(Xt(n))e=n;else if(Ae(n))for(let t=0;t<n.length;t++){const s=ry(n[t]);s&&(e+=s+" ")}else if(vt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Ux="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$x=Z_(Ux);function jA(n){return!!n||n===""}function Bx(n,e){if(n.length!==e.length)return!1;let t=!0;for(let s=0;t&&s<n.length;s++)t=hp(n[s],e[s]);return t}function hp(n,e){if(n===e)return!0;let t=Vw(n),s=Vw(e);if(t||s)return t&&s?n.getTime()===e.getTime():!1;if(t=kr(n),s=kr(e),t||s)return n===e;if(t=Ae(n),s=Ae(e),t||s)return t&&s?Bx(n,e):!1;if(t=vt(n),s=vt(e),t||s){if(!t||!s)return!1;const r=Object.keys(n).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in n){const a=n.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!hp(n[o],e[o]))return!1}}return String(n)===String(e)}function qA(n,e){return n.findIndex(t=>hp(t,e))}const HA=n=>!!(n&&n.__v_isRef===!0),Ct=n=>Xt(n)?n:n==null?"":Ae(n)||vt(n)&&(n.toString===FA||!Ne(n.toString))?HA(n)?Ct(n.value):JSON.stringify(n,WA,2):String(n),WA=(n,e)=>HA(e)?WA(n,e.value):Pc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[s,r],i)=>(t[Qm(s,i)+" =>"]=r,t),{})}:cp(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Qm(t))}:kr(e)?Qm(e):vt(e)&&!Ae(e)&&!UA(e)?String(e):e,Qm=(n,e="")=>{var t;return kr(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ws;class jx{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ws,!e&&ws&&(this.index=(ws.scopes||(ws.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=ws;try{return ws=this,e()}finally{ws=t}}}on(){ws=this}off(){ws=this.parent}stop(e){if(this._active){let t,s;for(t=0,s=this.effects.length;t<s;t++)this.effects[t].stop();for(t=0,s=this.cleanups.length;t<s;t++)this.cleanups[t]();if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function qx(){return ws}let pt;const Ym=new WeakSet;class KA{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ws&&ws.active&&ws.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ym.has(this)&&(Ym.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||GA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fw(this),QA(this);const e=pt,t=er;pt=this,er=!0;try{return this.fn()}finally{YA(this),pt=e,er=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ay(e);this.deps=this.depsTail=void 0,Fw(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ym.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fg(this)&&this.run()}get dirty(){return Fg(this)}}let zA=0,Cu;function GA(n){n.flags|=8,n.next=Cu,Cu=n}function iy(){zA++}function oy(){if(--zA>0)return;let n;for(;Cu;){let e=Cu;for(Cu=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){n||(n=s)}e=t}}if(n)throw n}function QA(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function YA(n,e=!1){let t,s=n.depsTail,r=s;for(;r;){const i=r.prevDep;r.version===-1?(r===s&&(s=i),ay(r,e),Hx(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=t,n.depsTail=s}function Fg(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(JA(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function JA(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===zu))return;n.globalVersion=zu;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Fg(n)){n.flags&=-3;return}const t=pt,s=er;pt=n,er=!0;try{QA(n);const r=n.fn(n._value);(e.version===0||no(r,n._value))&&(n._value=r,e.version++)}catch(r){throw e.version++,r}finally{pt=t,er=s,YA(n,!0),n.flags&=-3}}function ay(n,e=!1){const{dep:t,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),t.subs===n&&(t.subs=s),!t.subs)if(t.computed){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)ay(i,!0)}else t.map&&!e&&(t.map.delete(t.key),t.map.size||gf.delete(t.target))}function Hx(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let er=!0;const XA=[];function mo(){XA.push(er),er=!1}function go(){const n=XA.pop();er=n===void 0?!0:n}function Fw(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=pt;pt=void 0;try{e()}finally{pt=t}}}let zu=0;class Wx{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class cy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0}track(e){if(!pt||!er||pt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==pt)t=this.activeLink=new Wx(pt,this),pt.deps?(t.prevDep=pt.depsTail,pt.depsTail.nextDep=t,pt.depsTail=t):pt.deps=pt.depsTail=t,pt.flags&4&&ZA(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const s=t.nextDep;s.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=s),t.prevDep=pt.depsTail,t.nextDep=void 0,pt.depsTail.nextDep=t,pt.depsTail=t,pt.deps===t&&(pt.deps=s)}return t}trigger(e){this.version++,zu++,this.notify(e)}notify(e){iy();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{oy()}}}function ZA(n){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)ZA(s)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}const gf=new WeakMap,da=Symbol(""),Ug=Symbol(""),Gu=Symbol("");function Un(n,e,t){if(er&&pt){let s=gf.get(n);s||gf.set(n,s=new Map);let r=s.get(t);r||(s.set(t,r=new cy),r.target=n,r.map=s,r.key=t),r.track()}}function ii(n,e,t,s,r,i){const o=gf.get(n);if(!o){zu++;return}const a=c=>{c&&c.trigger()};if(iy(),e==="clear")o.forEach(a);else{const c=Ae(n),u=c&&ny(t);if(c&&t==="length"){const d=Number(s);o.forEach((f,g)=>{(g==="length"||g===Gu||!kr(g)&&g>=d)&&a(f)})}else switch(t!==void 0&&a(o.get(t)),u&&a(o.get(Gu)),e){case"add":c?u&&a(o.get("length")):(a(o.get(da)),Pc(n)&&a(o.get(Ug)));break;case"delete":c||(a(o.get(da)),Pc(n)&&a(o.get(Ug)));break;case"set":Pc(n)&&a(o.get(da));break}}oy()}function hc(n){const e=ot(n);return e===n?e:(Un(e,"iterate",Gu),Ms(n)?e:e.map(On))}function dp(n){return Un(n=ot(n),"iterate",Gu),n}const Kx={__proto__:null,[Symbol.iterator](){return Jm(this,Symbol.iterator,On)},concat(...n){return hc(this).concat(...n.map(e=>Ae(e)?hc(e):e))},entries(){return Jm(this,"entries",n=>(n[1]=On(n[1]),n))},every(n,e){return Qr(this,"every",n,e,void 0,arguments)},filter(n,e){return Qr(this,"filter",n,e,t=>t.map(On),arguments)},find(n,e){return Qr(this,"find",n,e,On,arguments)},findIndex(n,e){return Qr(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Qr(this,"findLast",n,e,On,arguments)},findLastIndex(n,e){return Qr(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Qr(this,"forEach",n,e,void 0,arguments)},includes(...n){return Xm(this,"includes",n)},indexOf(...n){return Xm(this,"indexOf",n)},join(n){return hc(this).join(n)},lastIndexOf(...n){return Xm(this,"lastIndexOf",n)},map(n,e){return Qr(this,"map",n,e,void 0,arguments)},pop(){return iu(this,"pop")},push(...n){return iu(this,"push",n)},reduce(n,...e){return Uw(this,"reduce",n,e)},reduceRight(n,...e){return Uw(this,"reduceRight",n,e)},shift(){return iu(this,"shift")},some(n,e){return Qr(this,"some",n,e,void 0,arguments)},splice(...n){return iu(this,"splice",n)},toReversed(){return hc(this).toReversed()},toSorted(n){return hc(this).toSorted(n)},toSpliced(...n){return hc(this).toSpliced(...n)},unshift(...n){return iu(this,"unshift",n)},values(){return Jm(this,"values",On)}};function Jm(n,e,t){const s=dp(n),r=s[e]();return s!==n&&!Ms(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=t(i.value)),i}),r}const zx=Array.prototype;function Qr(n,e,t,s,r,i){const o=dp(n),a=o!==n&&!Ms(n),c=o[e];if(c!==zx[e]){const f=c.apply(n,i);return a?On(f):f}let u=t;o!==n&&(a?u=function(f,g){return t.call(this,On(f),g,n)}:t.length>2&&(u=function(f,g){return t.call(this,f,g,n)}));const d=c.call(o,u,s);return a&&r?r(d):d}function Uw(n,e,t,s){const r=dp(n);let i=t;return r!==n&&(Ms(n)?t.length>3&&(i=function(o,a,c){return t.call(this,o,a,c,n)}):i=function(o,a,c){return t.call(this,o,On(a),c,n)}),r[e](i,...s)}function Xm(n,e,t){const s=ot(n);Un(s,"iterate",Gu);const r=s[e](...t);return(r===-1||r===!1)&&dy(t[0])?(t[0]=ot(t[0]),s[e](...t)):r}function iu(n,e,t=[]){mo(),iy();const s=ot(n)[e].apply(n,t);return oy(),go(),s}const Gx=Z_("__proto__,__v_isRef,__isVue"),eS=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(kr));function Qx(n){kr(n)||(n=String(n));const e=ot(this);return Un(e,"has",n),e.hasOwnProperty(n)}class tS{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,s){const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return s===(r?i?cL:iS:i?rS:sS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Ae(e);if(!r){let c;if(o&&(c=Kx[t]))return c;if(t==="hasOwnProperty")return Qx}const a=Reflect.get(e,t,Fn(e)?e:s);return(kr(t)?eS.has(t):Gx(t))||(r||Un(e,"get",t),i)?a:Fn(a)?o&&ny(t)?a:a.value:vt(a)?r?aS(a):pp(a):a}}class nS extends tS{constructor(e=!1){super(!1,e)}set(e,t,s,r){let i=e[t];if(!this._isShallow){const c=ga(i);if(!Ms(s)&&!ga(s)&&(i=ot(i),s=ot(s)),!Ae(e)&&Fn(i)&&!Fn(s))return c?!1:(i.value=s,!0)}const o=Ae(e)&&ny(t)?Number(t)<e.length:rt(e,t),a=Reflect.set(e,t,s,Fn(e)?e:r);return e===ot(r)&&(o?no(s,i)&&ii(e,"set",t,s):ii(e,"add",t,s)),a}deleteProperty(e,t){const s=rt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&s&&ii(e,"delete",t,void 0),r}has(e,t){const s=Reflect.has(e,t);return(!kr(t)||!eS.has(t))&&Un(e,"has",t),s}ownKeys(e){return Un(e,"iterate",Ae(e)?"length":da),Reflect.ownKeys(e)}}class Yx extends tS{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Jx=new nS,Xx=new Yx,Zx=new nS(!0);const ly=n=>n,fp=n=>Reflect.getPrototypeOf(n);function Nd(n,e,t=!1,s=!1){n=n.__v_raw;const r=ot(n),i=ot(e);t||(no(e,i)&&Un(r,"get",e),Un(r,"get",i));const{has:o}=fp(r),a=s?ly:t?fy:On;if(o.call(r,e))return a(n.get(e));if(o.call(r,i))return a(n.get(i));n!==r&&n.get(e)}function kd(n,e=!1){const t=this.__v_raw,s=ot(t),r=ot(n);return e||(no(n,r)&&Un(s,"has",n),Un(s,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function Dd(n,e=!1){return n=n.__v_raw,!e&&Un(ot(n),"iterate",da),Reflect.get(n,"size",n)}function $w(n,e=!1){!e&&!Ms(n)&&!ga(n)&&(n=ot(n));const t=ot(this);return fp(t).has.call(t,n)||(t.add(n),ii(t,"add",n,n)),this}function Bw(n,e,t=!1){!t&&!Ms(e)&&!ga(e)&&(e=ot(e));const s=ot(this),{has:r,get:i}=fp(s);let o=r.call(s,n);o||(n=ot(n),o=r.call(s,n));const a=i.call(s,n);return s.set(n,e),o?no(e,a)&&ii(s,"set",n,e):ii(s,"add",n,e),this}function jw(n){const e=ot(this),{has:t,get:s}=fp(e);let r=t.call(e,n);r||(n=ot(n),r=t.call(e,n)),s&&s.call(e,n);const i=e.delete(n);return r&&ii(e,"delete",n,void 0),i}function qw(){const n=ot(this),e=n.size!==0,t=n.clear();return e&&ii(n,"clear",void 0,void 0),t}function Od(n,e){return function(s,r){const i=this,o=i.__v_raw,a=ot(o),c=e?ly:n?fy:On;return!n&&Un(a,"iterate",da),o.forEach((u,d)=>s.call(r,c(u),c(d),i))}}function xd(n,e,t){return function(...s){const r=this.__v_raw,i=ot(r),o=Pc(i),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,u=r[n](...s),d=t?ly:e?fy:On;return!e&&Un(i,"iterate",c?Ug:da),{next(){const{value:f,done:g}=u.next();return g?{value:f,done:g}:{value:a?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function Li(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function eL(){const n={get(i){return Nd(this,i)},get size(){return Dd(this)},has:kd,add:$w,set:Bw,delete:jw,clear:qw,forEach:Od(!1,!1)},e={get(i){return Nd(this,i,!1,!0)},get size(){return Dd(this)},has:kd,add(i){return $w.call(this,i,!0)},set(i,o){return Bw.call(this,i,o,!0)},delete:jw,clear:qw,forEach:Od(!1,!0)},t={get(i){return Nd(this,i,!0)},get size(){return Dd(this,!0)},has(i){return kd.call(this,i,!0)},add:Li("add"),set:Li("set"),delete:Li("delete"),clear:Li("clear"),forEach:Od(!0,!1)},s={get(i){return Nd(this,i,!0,!0)},get size(){return Dd(this,!0)},has(i){return kd.call(this,i,!0)},add:Li("add"),set:Li("set"),delete:Li("delete"),clear:Li("clear"),forEach:Od(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=xd(i,!1,!1),t[i]=xd(i,!0,!1),e[i]=xd(i,!1,!0),s[i]=xd(i,!0,!0)}),[n,t,e,s]}const[tL,nL,sL,rL]=eL();function uy(n,e){const t=e?n?rL:sL:n?nL:tL;return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(rt(t,r)&&r in s?t:s,r,i)}const iL={get:uy(!1,!1)},oL={get:uy(!1,!0)},aL={get:uy(!0,!1)};const sS=new WeakMap,rS=new WeakMap,iS=new WeakMap,cL=new WeakMap;function lL(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function uL(n){return n.__v_skip||!Object.isExtensible(n)?0:lL(Dx(n))}function pp(n){return ga(n)?n:hy(n,!1,Jx,iL,sS)}function oS(n){return hy(n,!1,Zx,oL,rS)}function aS(n){return hy(n,!0,Xx,aL,iS)}function hy(n,e,t,s,r){if(!vt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const o=uL(n);if(o===0)return n;const a=new Proxy(n,o===2?s:t);return r.set(n,a),a}function Nc(n){return ga(n)?Nc(n.__v_raw):!!(n&&n.__v_isReactive)}function ga(n){return!!(n&&n.__v_isReadonly)}function Ms(n){return!!(n&&n.__v_isShallow)}function dy(n){return n?!!n.__v_raw:!1}function ot(n){const e=n&&n.__v_raw;return e?ot(e):n}function hL(n){return!rt(n,"__v_skip")&&Object.isExtensible(n)&&$A(n,"__v_skip",!0),n}const On=n=>vt(n)?pp(n):n,fy=n=>vt(n)?aS(n):n;function Fn(n){return n?n.__v_isRef===!0:!1}function Xe(n){return cS(n,!1)}function dL(n){return cS(n,!0)}function cS(n,e){return Fn(n)?n:new fL(n,e)}class fL{constructor(e,t){this.dep=new cy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ot(e),this._value=t?e:On(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,s=this.__v_isShallow||Ms(e)||ga(e);e=s?e:ot(e),no(e,t)&&(this._rawValue=e,this._value=s?e:On(e),this.dep.trigger())}}function Ds(n){return Fn(n)?n.value:n}const pL={get:(n,e,t)=>e==="__v_raw"?n:Ds(Reflect.get(n,e,t)),set:(n,e,t,s)=>{const r=n[e];return Fn(r)&&!Fn(t)?(r.value=t,!0):Reflect.set(n,e,t,s)}};function lS(n){return Nc(n)?n:new Proxy(n,pL)}class mL{constructor(e,t,s){this.fn=e,this.setter=t,this._value=void 0,this.dep=new cy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zu-1,this.effect=this,this.__v_isReadonly=!t,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&pt!==this)return GA(this),!0}get value(){const e=this.dep.track();return JA(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function gL(n,e,t=!1){let s,r;return Ne(n)?s=n:(s=n.get,r=n.set),new mL(s,r,t)}const Ld={},_f=new WeakMap;let Qo;function _L(n,e=!1,t=Qo){if(t){let s=_f.get(t);s||_f.set(t,s=[]),s.push(n)}}function yL(n,e,t=mt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:c}=t,u=K=>r?K:Ms(K)||r===!1||r===0?Zr(K,1):Zr(K);let d,f,g,v,w=!1,I=!1;if(Fn(n)?(f=()=>n.value,w=Ms(n)):Nc(n)?(f=()=>u(n),w=!0):Ae(n)?(I=!0,w=n.some(K=>Nc(K)||Ms(K)),f=()=>n.map(K=>{if(Fn(K))return K.value;if(Nc(K))return u(K);if(Ne(K))return c?c(K,2):K()})):Ne(n)?e?f=c?()=>c(n,2):n:f=()=>{if(g){mo();try{g()}finally{go()}}const K=Qo;Qo=d;try{return c?c(n,3,[v]):n(v)}finally{Qo=K}}:f=Ar,e&&r){const K=f,ie=r===!0?1/0:r;f=()=>Zr(K(),ie)}const b=qx(),O=()=>{d.stop(),b&&ty(b.effects,d)};if(i&&e){const K=e;e=(...ie)=>{K(...ie),O()}}let x=I?new Array(n.length).fill(Ld):Ld;const M=K=>{if(!(!(d.flags&1)||!d.dirty&&!K))if(e){const ie=d.run();if(r||w||(I?ie.some((re,R)=>no(re,x[R])):no(ie,x))){g&&g();const re=Qo;Qo=d;try{const R=[ie,x===Ld?void 0:I&&x[0]===Ld?[]:x,v];c?c(e,3,R):e(...R),x=ie}finally{Qo=re}}}else d.run()};return a&&a(M),d=new KA(f),d.scheduler=o?()=>o(M,!1):M,v=K=>_L(K,!1,d),g=d.onStop=()=>{const K=_f.get(d);if(K){if(c)c(K,4);else for(const ie of K)ie();_f.delete(d)}},e?s?M(!0):x=d.run():o?o(M.bind(null,!0),!0):d.run(),O.pause=d.pause.bind(d),O.resume=d.resume.bind(d),O.stop=O,O}function Zr(n,e=1/0,t){if(e<=0||!vt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Fn(n))Zr(n.value,e,t);else if(Ae(n))for(let s=0;s<n.length;s++)Zr(n[s],e,t);else if(cp(n)||Pc(n))n.forEach(s=>{Zr(s,e,t)});else if(UA(n)){for(const s in n)Zr(n[s],e,t);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Zr(n[s],e,t)}return n}/**
* @vue/runtime-core v3.5.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ih(n,e,t,s){try{return s?n(...s):n()}catch(r){mp(r,e,t)}}function Dr(n,e,t,s){if(Ne(n)){const r=Ih(n,e,t,s);return r&&MA(r)&&r.catch(i=>{mp(i,e,t)}),r}if(Ae(n)){const r=[];for(let i=0;i<n.length;i++)r.push(Dr(n[i],e,t,s));return r}}function mp(n,e,t,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||mt;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const d=a.ec;if(d){for(let f=0;f<d.length;f++)if(d[f](n,c,u)===!1)return}a=a.parent}if(i){mo(),Ih(i,null,10,[n,c,u]),go();return}}vL(n,t,r,s,o)}function vL(n,e,t,s=!0,r=!1){if(r)throw n;console.error(n)}let Qu=!1,$g=!1;const Jn=[];let yr=0;const kc=[];let ji=null,yc=0;const uS=Promise.resolve();let py=null;function hS(n){const e=py||uS;return n?e.then(this?n.bind(this):n):e}function EL(n){let e=Qu?yr+1:0,t=Jn.length;for(;e<t;){const s=e+t>>>1,r=Jn[s],i=Yu(r);i<n||i===n&&r.flags&2?e=s+1:t=s}return e}function my(n){if(!(n.flags&1)){const e=Yu(n),t=Jn[Jn.length-1];!t||!(n.flags&2)&&e>=Yu(t)?Jn.push(n):Jn.splice(EL(e),0,n),n.flags|=1,dS()}}function dS(){!Qu&&!$g&&($g=!0,py=uS.then(pS))}function wL(n){Ae(n)?kc.push(...n):ji&&n.id===-1?ji.splice(yc+1,0,n):n.flags&1||(kc.push(n),n.flags|=1),dS()}function Hw(n,e,t=Qu?yr+1:0){for(;t<Jn.length;t++){const s=Jn[t];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;Jn.splice(t,1),t--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function fS(n){if(kc.length){const e=[...new Set(kc)].sort((t,s)=>Yu(t)-Yu(s));if(kc.length=0,ji){ji.push(...e);return}for(ji=e,yc=0;yc<ji.length;yc++){const t=ji[yc];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}ji=null,yc=0}}const Yu=n=>n.id==null?n.flags&2?-1:1/0:n.id;function pS(n){$g=!1,Qu=!0;try{for(yr=0;yr<Jn.length;yr++){const e=Jn[yr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ih(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;yr<Jn.length;yr++){const e=Jn[yr];e&&(e.flags&=-2)}yr=0,Jn.length=0,fS(),Qu=!1,py=null,(Jn.length||kc.length)&&pS()}}let Ts=null,mS=null;function yf(n){const e=Ts;return Ts=n,mS=n&&n.type.__scopeId||null,e}function vr(n,e=Ts,t){if(!e||n._n)return n;const s=(...r)=>{s._d&&Zw(-1);const i=yf(e);let o;try{o=n(...r)}finally{yf(i),s._d&&Zw(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function fn(n,e){if(Ts===null)return n;const t=Ep(Ts),s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,c=mt]=e[r];i&&(Ne(i)&&(i={mounted:i,updated:i}),i.deep&&Zr(o),s.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function Ko(n,e,t,s){const r=n.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let c=a.dir[s];c&&(mo(),Dr(c,t,8,[n.el,a,n,e]),go())}}const TL=Symbol("_vte"),bL=n=>n.__isTeleport;function gy(n,e){n.shapeFlag&6&&n.component?(n.transition=e,gy(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function gS(n,e){return Ne(n)?In({name:n.name},e,{setup:n}):n}function _S(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Bg(n,e,t,s,r=!1){if(Ae(n)){n.forEach((w,I)=>Bg(w,e&&(Ae(e)?e[I]:e),t,s,r));return}if(Pu(s)&&!r)return;const i=s.shapeFlag&4?Ep(s.component):s.el,o=r?null:i,{i:a,r:c}=n,u=e&&e.r,d=a.refs===mt?a.refs={}:a.refs,f=a.setupState,g=ot(f),v=f===mt?()=>!1:w=>rt(g,w);if(u!=null&&u!==c&&(Xt(u)?(d[u]=null,v(u)&&(f[u]=null)):Fn(u)&&(u.value=null)),Ne(c))Ih(c,a,12,[o,d]);else{const w=Xt(c),I=Fn(c);if(w||I){const b=()=>{if(n.f){const O=w?v(c)?f[c]:d[c]:c.value;r?Ae(O)&&ty(O,i):Ae(O)?O.includes(i)||O.push(i):w?(d[c]=[i],v(c)&&(f[c]=d[c])):(c.value=[i],n.k&&(d[n.k]=c.value))}else w?(d[c]=o,v(c)&&(f[c]=o)):I&&(c.value=o,n.k&&(d[n.k]=o))};o?(b.id=-1,Es(b,t)):b()}}}const Pu=n=>!!n.type.__asyncLoader,yS=n=>n.type.__isKeepAlive;function IL(n,e){vS(n,"a",e)}function AL(n,e){vS(n,"da",e)}function vS(n,e,t=Ln){const s=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(gp(e,s,t),t){let r=t.parent;for(;r&&r.parent;)yS(r.parent.vnode)&&SL(s,e,t,r),r=r.parent}}function SL(n,e,t,s){const r=gp(e,n,s,!0);ES(()=>{ty(s[e],r)},t)}function gp(n,e,t=Ln,s=!1){if(t){const r=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{mo();const a=Ah(t),c=Dr(e,t,n,o);return a(),go(),c});return s?r.unshift(i):r.push(i),i}}const gi=n=>(e,t=Ln)=>{(!vp||n==="sp")&&gp(n,(...s)=>e(...s),t)},RL=gi("bm"),ul=gi("m"),CL=gi("bu"),PL=gi("u"),NL=gi("bum"),ES=gi("um"),kL=gi("sp"),DL=gi("rtg"),OL=gi("rtc");function xL(n,e=Ln){gp("ec",n,e)}const LL="components";function vf(n,e){return ML(LL,n,!0,e)||n}const VL=Symbol.for("v-ndc");function ML(n,e,t=!0,s=!1){const r=Ts||Ln;if(r){const i=r.type;{const a=AV(i,!1);if(a&&(a===e||a===sr(e)||a===up(sr(e))))return i}const o=Ww(r[n]||i[n],e)||Ww(r.appContext[n],e);return!o&&s?i:o}}function Ww(n,e){return n&&(n[e]||n[sr(e)]||n[up(sr(e))])}function _a(n,e,t,s){let r;const i=t,o=Ae(n);if(o||Xt(n)){const a=o&&Nc(n);let c=!1;a&&(c=!Ms(n),n=dp(n)),r=new Array(n.length);for(let u=0,d=n.length;u<d;u++)r[u]=e(c?On(n[u]):n[u],u,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,i)}else if(vt(n))if(n[Symbol.iterator])r=Array.from(n,(a,c)=>e(a,c,void 0,i));else{const a=Object.keys(n);r=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const d=a[c];r[c]=e(n[d],d,c,i)}}else r=[];return r}const jg=n=>n?$S(n)?Ep(n):jg(n.parent):null,Nu=In(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>jg(n.parent),$root:n=>jg(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>_y(n),$forceUpdate:n=>n.f||(n.f=()=>{my(n.update)}),$nextTick:n=>n.n||(n.n=hS.bind(n.proxy)),$watch:n=>rV.bind(n)}),Zm=(n,e)=>n!==mt&&!n.__isScriptSetup&&rt(n,e),FL={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:c}=n;let u;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return s[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(Zm(s,e))return o[e]=1,s[e];if(r!==mt&&rt(r,e))return o[e]=2,r[e];if((u=n.propsOptions[0])&&rt(u,e))return o[e]=3,i[e];if(t!==mt&&rt(t,e))return o[e]=4,t[e];qg&&(o[e]=0)}}const d=Nu[e];let f,g;if(d)return e==="$attrs"&&Un(n.attrs,"get",""),d(n);if((f=a.__cssModules)&&(f=f[e]))return f;if(t!==mt&&rt(t,e))return o[e]=4,t[e];if(g=c.config.globalProperties,rt(g,e))return g[e]},set({_:n},e,t){const{data:s,setupState:r,ctx:i}=n;return Zm(r,e)?(r[e]=t,!0):s!==mt&&rt(s,e)?(s[e]=t,!0):rt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!t[o]||n!==mt&&rt(n,o)||Zm(e,o)||(a=i[0])&&rt(a,o)||rt(s,o)||rt(Nu,o)||rt(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:rt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Kw(n){return Ae(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let qg=!0;function UL(n){const e=_y(n),t=n.proxy,s=n.ctx;qg=!1,e.beforeCreate&&zw(e.beforeCreate,n,"bc");const{data:r,computed:i,methods:o,watch:a,provide:c,inject:u,created:d,beforeMount:f,mounted:g,beforeUpdate:v,updated:w,activated:I,deactivated:b,beforeDestroy:O,beforeUnmount:x,destroyed:M,unmounted:K,render:ie,renderTracked:re,renderTriggered:R,errorCaptured:A,serverPrefetch:N,expose:L,inheritAttrs:V,components:B,directives:D,filters:Zt}=e;if(u&&$L(u,s,null),o)for(const Be in o){const xe=o[Be];Ne(xe)&&(s[Be]=xe.bind(t))}if(r){const Be=r.call(t,t);vt(Be)&&(n.data=pp(Be))}if(qg=!0,i)for(const Be in i){const xe=i[Be],An=Ne(xe)?xe.bind(t,t):Ne(xe.get)?xe.get.bind(t,t):Ar,_s=!Ne(xe)&&Ne(xe.set)?xe.set.bind(t):Ar,ns=Qs({get:An,set:_s});Object.defineProperty(s,Be,{enumerable:!0,configurable:!0,get:()=>ns.value,set:gt=>ns.value=gt})}if(a)for(const Be in a)wS(a[Be],s,t,Be);if(c){const Be=Ne(c)?c.call(t):c;Reflect.ownKeys(Be).forEach(xe=>{Qd(xe,Be[xe])})}d&&zw(d,n,"c");function Ot(Be,xe){Ae(xe)?xe.forEach(An=>Be(An.bind(t))):xe&&Be(xe.bind(t))}if(Ot(RL,f),Ot(ul,g),Ot(CL,v),Ot(PL,w),Ot(IL,I),Ot(AL,b),Ot(xL,A),Ot(OL,re),Ot(DL,R),Ot(NL,x),Ot(ES,K),Ot(kL,N),Ae(L))if(L.length){const Be=n.exposed||(n.exposed={});L.forEach(xe=>{Object.defineProperty(Be,xe,{get:()=>t[xe],set:An=>t[xe]=An})})}else n.exposed||(n.exposed={});ie&&n.render===Ar&&(n.render=ie),V!=null&&(n.inheritAttrs=V),B&&(n.components=B),D&&(n.directives=D),N&&_S(n)}function $L(n,e,t=Ar){Ae(n)&&(n=Hg(n));for(const s in n){const r=n[s];let i;vt(r)?"default"in r?i=tr(r.from||s,r.default,!0):i=tr(r.from||s):i=tr(r),Fn(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function zw(n,e,t){Dr(Ae(n)?n.map(s=>s.bind(e.proxy)):n.bind(e.proxy),e,t)}function wS(n,e,t,s){let r=s.includes(".")?LS(t,s):()=>t[s];if(Xt(n)){const i=e[n];Ne(i)&&Yd(r,i)}else if(Ne(n))Yd(r,n.bind(t));else if(vt(n))if(Ae(n))n.forEach(i=>wS(i,e,t,s));else{const i=Ne(n.handler)?n.handler.bind(t):e[n.handler];Ne(i)&&Yd(r,i,n)}}function _y(n){const e=n.type,{mixins:t,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let c;return a?c=a:!r.length&&!t&&!s?c=e:(c={},r.length&&r.forEach(u=>Ef(c,u,o,!0)),Ef(c,e,o)),vt(e)&&i.set(e,c),c}function Ef(n,e,t,s=!1){const{mixins:r,extends:i}=e;i&&Ef(n,i,t,!0),r&&r.forEach(o=>Ef(n,o,t,!0));for(const o in e)if(!(s&&o==="expose")){const a=BL[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const BL={data:Gw,props:Qw,emits:Qw,methods:Eu,computed:Eu,beforeCreate:zn,created:zn,beforeMount:zn,mounted:zn,beforeUpdate:zn,updated:zn,beforeDestroy:zn,beforeUnmount:zn,destroyed:zn,unmounted:zn,activated:zn,deactivated:zn,errorCaptured:zn,serverPrefetch:zn,components:Eu,directives:Eu,watch:qL,provide:Gw,inject:jL};function Gw(n,e){return e?n?function(){return In(Ne(n)?n.call(this,this):n,Ne(e)?e.call(this,this):e)}:e:n}function jL(n,e){return Eu(Hg(n),Hg(e))}function Hg(n){if(Ae(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function zn(n,e){return n?[...new Set([].concat(n,e))]:e}function Eu(n,e){return n?In(Object.create(null),n,e):e}function Qw(n,e){return n?Ae(n)&&Ae(e)?[...new Set([...n,...e])]:In(Object.create(null),Kw(n),Kw(e??{})):e}function qL(n,e){if(!n)return e;if(!e)return n;const t=In(Object.create(null),n);for(const s in e)t[s]=zn(n[s],e[s]);return t}function TS(){return{app:null,config:{isNativeTag:Nx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let HL=0;function WL(n,e){return function(s,r=null){Ne(s)||(s=In({},s)),r!=null&&!vt(r)&&(r=null);const i=TS(),o=new WeakSet,a=[];let c=!1;const u=i.app={_uid:HL++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:RV,get config(){return i.config},set config(d){},use(d,...f){return o.has(d)||(d&&Ne(d.install)?(o.add(d),d.install(u,...f)):Ne(d)&&(o.add(d),d(u,...f))),u},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),u},component(d,f){return f?(i.components[d]=f,u):i.components[d]},directive(d,f){return f?(i.directives[d]=f,u):i.directives[d]},mount(d,f,g){if(!c){const v=u._ceVNode||It(s,r);return v.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),f&&e?e(v,d):n(v,d,g),c=!0,u._container=d,d.__vue_app__=u,Ep(v.component)}},onUnmount(d){a.push(d)},unmount(){c&&(Dr(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(d,f){return i.provides[d]=f,u},runWithContext(d){const f=Dc;Dc=u;try{return d()}finally{Dc=f}}};return u}}let Dc=null;function Qd(n,e){if(Ln){let t=Ln.provides;const s=Ln.parent&&Ln.parent.provides;s===t&&(t=Ln.provides=Object.create(s)),t[n]=e}}function tr(n,e,t=!1){const s=Ln||Ts;if(s||Dc){const r=Dc?Dc._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Ne(e)?e.call(s&&s.proxy):e}}const bS={},IS=()=>Object.create(bS),AS=n=>Object.getPrototypeOf(n)===bS;function KL(n,e,t,s=!1){const r={},i=IS();n.propsDefaults=Object.create(null),SS(n,e,r,i);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=s?r:oS(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function zL(n,e,t,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=n,a=ot(r),[c]=n.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let f=0;f<d.length;f++){let g=d[f];if(_p(n.emitsOptions,g))continue;const v=e[g];if(c)if(rt(i,g))v!==i[g]&&(i[g]=v,u=!0);else{const w=sr(g);r[w]=Wg(c,a,w,v,n,!1)}else v!==i[g]&&(i[g]=v,u=!0)}}}else{SS(n,e,r,i)&&(u=!0);let d;for(const f in a)(!e||!rt(e,f)&&((d=Ua(f))===f||!rt(e,d)))&&(c?t&&(t[f]!==void 0||t[d]!==void 0)&&(r[f]=Wg(c,a,f,void 0,n,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!rt(e,f))&&(delete i[f],u=!0)}u&&ii(n.attrs,"set","")}function SS(n,e,t,s){const[r,i]=n.propsOptions;let o=!1,a;if(e)for(let c in e){if(Ru(c))continue;const u=e[c];let d;r&&rt(r,d=sr(c))?!i||!i.includes(d)?t[d]=u:(a||(a={}))[d]=u:_p(n.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=ot(t),u=a||mt;for(let d=0;d<i.length;d++){const f=i[d];t[f]=Wg(r,c,f,u[f],n,!rt(u,f))}}return o}function Wg(n,e,t,s,r,i){const o=n[t];if(o!=null){const a=rt(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ne(c)){const{propsDefaults:u}=r;if(t in u)s=u[t];else{const d=Ah(r);s=u[t]=c.call(null,e),d()}}else s=c;r.ce&&r.ce._setProp(t,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Ua(t))&&(s=!0))}return s}const GL=new WeakMap;function RS(n,e,t=!1){const s=t?GL:e.propsCache,r=s.get(n);if(r)return r;const i=n.props,o={},a=[];let c=!1;if(!Ne(n)){const d=f=>{c=!0;const[g,v]=RS(f,e,!0);In(o,g),v&&a.push(...v)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!i&&!c)return vt(n)&&s.set(n,Cc),Cc;if(Ae(i))for(let d=0;d<i.length;d++){const f=sr(i[d]);Yw(f)&&(o[f]=mt)}else if(i)for(const d in i){const f=sr(d);if(Yw(f)){const g=i[d],v=o[f]=Ae(g)||Ne(g)?{type:g}:In({},g),w=v.type;let I=!1,b=!0;if(Ae(w))for(let O=0;O<w.length;++O){const x=w[O],M=Ne(x)&&x.name;if(M==="Boolean"){I=!0;break}else M==="String"&&(b=!1)}else I=Ne(w)&&w.name==="Boolean";v[0]=I,v[1]=b,(I||rt(v,"default"))&&a.push(f)}}const u=[o,a];return vt(n)&&s.set(n,u),u}function Yw(n){return n[0]!=="$"&&!Ru(n)}const CS=n=>n[0]==="_"||n==="$stable",yy=n=>Ae(n)?n.map(Er):[Er(n)],QL=(n,e,t)=>{if(e._n)return e;const s=vr((...r)=>yy(e(...r)),t);return s._c=!1,s},PS=(n,e,t)=>{const s=n._ctx;for(const r in n){if(CS(r))continue;const i=n[r];if(Ne(i))e[r]=QL(r,i,s);else if(i!=null){const o=yy(i);e[r]=()=>o}}},NS=(n,e)=>{const t=yy(e);n.slots.default=()=>t},kS=(n,e,t)=>{for(const s in e)(t||s!=="_")&&(n[s]=e[s])},YL=(n,e,t)=>{const s=n.slots=IS();if(n.vnode.shapeFlag&32){const r=e._;r?(kS(s,e,t),t&&$A(s,"_",r,!0)):PS(e,s)}else e&&NS(n,e)},JL=(n,e,t)=>{const{vnode:s,slots:r}=n;let i=!0,o=mt;if(s.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:kS(r,e,t):(i=!e.$stable,PS(e,r)),o=e}else e&&(NS(n,e),o={default:1});if(i)for(const a in r)!CS(a)&&o[a]==null&&delete r[a]},Es=hV;function XL(n){return ZL(n)}function ZL(n,e){const t=BA();t.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:d,parentNode:f,nextSibling:g,setScopeId:v=Ar,insertStaticContent:w}=n,I=(S,C,q,X=null,F=null,te=null,de=void 0,ce=null,ae=!!C.dynamicChildren)=>{if(S===C)return;S&&!ou(S,C)&&(X=Y(S),gt(S,F,te,!0),S=null),C.patchFlag===-2&&(ae=!1,C.dynamicChildren=null);const{type:ne,ref:be,shapeFlag:pe}=C;switch(ne){case yp:b(S,C,q,X);break;case ya:O(S,C,q,X);break;case Jd:S==null&&x(C,q,X,de);break;case gn:B(S,C,q,X,F,te,de,ce,ae);break;default:pe&1?ie(S,C,q,X,F,te,de,ce,ae):pe&6?D(S,C,q,X,F,te,de,ce,ae):(pe&64||pe&128)&&ne.process(S,C,q,X,F,te,de,ce,ae,ye)}be!=null&&F&&Bg(be,S&&S.ref,te,C||S,!C)},b=(S,C,q,X)=>{if(S==null)s(C.el=a(C.children),q,X);else{const F=C.el=S.el;C.children!==S.children&&u(F,C.children)}},O=(S,C,q,X)=>{S==null?s(C.el=c(C.children||""),q,X):C.el=S.el},x=(S,C,q,X)=>{[S.el,S.anchor]=w(S.children,C,q,X,S.el,S.anchor)},M=({el:S,anchor:C},q,X)=>{let F;for(;S&&S!==C;)F=g(S),s(S,q,X),S=F;s(C,q,X)},K=({el:S,anchor:C})=>{let q;for(;S&&S!==C;)q=g(S),r(S),S=q;r(C)},ie=(S,C,q,X,F,te,de,ce,ae)=>{C.type==="svg"?de="svg":C.type==="math"&&(de="mathml"),S==null?re(C,q,X,F,te,de,ce,ae):N(S,C,F,te,de,ce,ae)},re=(S,C,q,X,F,te,de,ce)=>{let ae,ne;const{props:be,shapeFlag:pe,transition:we,dirs:ge}=S;if(ae=S.el=o(S.type,te,be&&be.is,be),pe&8?d(ae,S.children):pe&16&&A(S.children,ae,null,X,F,eg(S,te),de,ce),ge&&Ko(S,null,X,"created"),R(ae,S,S.scopeId,de,X),be){for(const et in be)et!=="value"&&!Ru(et)&&i(ae,et,null,be[et],te,X);"value"in be&&i(ae,"value",null,be.value,te),(ne=be.onVnodeBeforeMount)&&_r(ne,X,S)}ge&&Ko(S,null,X,"beforeMount");const Ie=eV(F,we);Ie&&we.beforeEnter(ae),s(ae,C,q),((ne=be&&be.onVnodeMounted)||Ie||ge)&&Es(()=>{ne&&_r(ne,X,S),Ie&&we.enter(ae),ge&&Ko(S,null,X,"mounted")},F)},R=(S,C,q,X,F)=>{if(q&&v(S,q),X)for(let te=0;te<X.length;te++)v(S,X[te]);if(F){let te=F.subTree;if(C===te||MS(te.type)&&(te.ssContent===C||te.ssFallback===C)){const de=F.vnode;R(S,de,de.scopeId,de.slotScopeIds,F.parent)}}},A=(S,C,q,X,F,te,de,ce,ae=0)=>{for(let ne=ae;ne<S.length;ne++){const be=S[ne]=ce?qi(S[ne]):Er(S[ne]);I(null,be,C,q,X,F,te,de,ce)}},N=(S,C,q,X,F,te,de)=>{const ce=C.el=S.el;let{patchFlag:ae,dynamicChildren:ne,dirs:be}=C;ae|=S.patchFlag&16;const pe=S.props||mt,we=C.props||mt;let ge;if(q&&zo(q,!1),(ge=we.onVnodeBeforeUpdate)&&_r(ge,q,C,S),be&&Ko(C,S,q,"beforeUpdate"),q&&zo(q,!0),(pe.innerHTML&&we.innerHTML==null||pe.textContent&&we.textContent==null)&&d(ce,""),ne?L(S.dynamicChildren,ne,ce,q,X,eg(C,F),te):de||xe(S,C,ce,null,q,X,eg(C,F),te,!1),ae>0){if(ae&16)V(ce,pe,we,q,F);else if(ae&2&&pe.class!==we.class&&i(ce,"class",null,we.class,F),ae&4&&i(ce,"style",pe.style,we.style,F),ae&8){const Ie=C.dynamicProps;for(let et=0;et<Ie.length;et++){const Ge=Ie[et],rn=pe[Ge],Kt=we[Ge];(Kt!==rn||Ge==="value")&&i(ce,Ge,rn,Kt,F,q)}}ae&1&&S.children!==C.children&&d(ce,C.children)}else!de&&ne==null&&V(ce,pe,we,q,F);((ge=we.onVnodeUpdated)||be)&&Es(()=>{ge&&_r(ge,q,C,S),be&&Ko(C,S,q,"updated")},X)},L=(S,C,q,X,F,te,de)=>{for(let ce=0;ce<C.length;ce++){const ae=S[ce],ne=C[ce],be=ae.el&&(ae.type===gn||!ou(ae,ne)||ae.shapeFlag&70)?f(ae.el):q;I(ae,ne,be,null,X,F,te,de,!0)}},V=(S,C,q,X,F)=>{if(C!==q){if(C!==mt)for(const te in C)!Ru(te)&&!(te in q)&&i(S,te,C[te],null,F,X);for(const te in q){if(Ru(te))continue;const de=q[te],ce=C[te];de!==ce&&te!=="value"&&i(S,te,ce,de,F,X)}"value"in q&&i(S,"value",C.value,q.value,F)}},B=(S,C,q,X,F,te,de,ce,ae)=>{const ne=C.el=S?S.el:a(""),be=C.anchor=S?S.anchor:a("");let{patchFlag:pe,dynamicChildren:we,slotScopeIds:ge}=C;ge&&(ce=ce?ce.concat(ge):ge),S==null?(s(ne,q,X),s(be,q,X),A(C.children||[],q,be,F,te,de,ce,ae)):pe>0&&pe&64&&we&&S.dynamicChildren?(L(S.dynamicChildren,we,q,F,te,de,ce),(C.key!=null||F&&C===F.subTree)&&DS(S,C,!0)):xe(S,C,q,be,F,te,de,ce,ae)},D=(S,C,q,X,F,te,de,ce,ae)=>{C.slotScopeIds=ce,S==null?C.shapeFlag&512?F.ctx.activate(C,q,X,de,ae):Zt(C,q,X,F,te,de,ae):jn(S,C,ae)},Zt=(S,C,q,X,F,te,de)=>{const ce=S.component=EV(S,X,F);if(yS(S)&&(ce.ctx.renderer=ye),wV(ce,!1,de),ce.asyncDep){if(F&&F.registerDep(ce,Ot,de),!S.el){const ae=ce.subTree=It(ya);O(null,ae,C,q)}}else Ot(ce,S,C,q,F,te,de)},jn=(S,C,q)=>{const X=C.component=S.component;if(lV(S,C,q))if(X.asyncDep&&!X.asyncResolved){Be(X,C,q);return}else X.next=C,X.update();else C.el=S.el,X.vnode=C},Ot=(S,C,q,X,F,te,de)=>{const ce=()=>{if(S.isMounted){let{next:pe,bu:we,u:ge,parent:Ie,vnode:et}=S;{const on=OS(S);if(on){pe&&(pe.el=et.el,Be(S,pe,de)),on.asyncDep.then(()=>{S.isUnmounted||ce()});return}}let Ge=pe,rn;zo(S,!1),pe?(pe.el=et.el,Be(S,pe,de)):pe=et,we&&Gd(we),(rn=pe.props&&pe.props.onVnodeBeforeUpdate)&&_r(rn,Ie,pe,et),zo(S,!0);const Kt=tg(S),zt=S.subTree;S.subTree=Kt,I(zt,Kt,f(zt.el),Y(zt),S,F,te),pe.el=Kt.el,Ge===null&&uV(S,Kt.el),ge&&Es(ge,F),(rn=pe.props&&pe.props.onVnodeUpdated)&&Es(()=>_r(rn,Ie,pe,et),F)}else{let pe;const{el:we,props:ge}=C,{bm:Ie,m:et,parent:Ge,root:rn,type:Kt}=S,zt=Pu(C);if(zo(S,!1),Ie&&Gd(Ie),!zt&&(pe=ge&&ge.onVnodeBeforeMount)&&_r(pe,Ge,C),zo(S,!0),we&&$e){const on=()=>{S.subTree=tg(S),$e(we,S.subTree,S,F,null)};zt&&Kt.__asyncHydrate?Kt.__asyncHydrate(we,S,on):on()}else{rn.ce&&rn.ce._injectChildStyle(Kt);const on=S.subTree=tg(S);I(null,on,q,X,S,F,te),C.el=on.el}if(et&&Es(et,F),!zt&&(pe=ge&&ge.onVnodeMounted)){const on=C;Es(()=>_r(pe,Ge,on),F)}(C.shapeFlag&256||Ge&&Pu(Ge.vnode)&&Ge.vnode.shapeFlag&256)&&S.a&&Es(S.a,F),S.isMounted=!0,C=q=X=null}};S.scope.on();const ae=S.effect=new KA(ce);S.scope.off();const ne=S.update=ae.run.bind(ae),be=S.job=ae.runIfDirty.bind(ae);be.i=S,be.id=S.uid,ae.scheduler=()=>my(be),zo(S,!0),ne()},Be=(S,C,q)=>{C.component=S;const X=S.vnode.props;S.vnode=C,S.next=null,zL(S,C.props,X,q),JL(S,C.children,q),mo(),Hw(S),go()},xe=(S,C,q,X,F,te,de,ce,ae=!1)=>{const ne=S&&S.children,be=S?S.shapeFlag:0,pe=C.children,{patchFlag:we,shapeFlag:ge}=C;if(we>0){if(we&128){_s(ne,pe,q,X,F,te,de,ce,ae);return}else if(we&256){An(ne,pe,q,X,F,te,de,ce,ae);return}}ge&8?(be&16&&Sn(ne,F,te),pe!==ne&&d(q,pe)):be&16?ge&16?_s(ne,pe,q,X,F,te,de,ce,ae):Sn(ne,F,te,!0):(be&8&&d(q,""),ge&16&&A(pe,q,X,F,te,de,ce,ae))},An=(S,C,q,X,F,te,de,ce,ae)=>{S=S||Cc,C=C||Cc;const ne=S.length,be=C.length,pe=Math.min(ne,be);let we;for(we=0;we<pe;we++){const ge=C[we]=ae?qi(C[we]):Er(C[we]);I(S[we],ge,q,null,F,te,de,ce,ae)}ne>be?Sn(S,F,te,!0,!1,pe):A(C,q,X,F,te,de,ce,ae,pe)},_s=(S,C,q,X,F,te,de,ce,ae)=>{let ne=0;const be=C.length;let pe=S.length-1,we=be-1;for(;ne<=pe&&ne<=we;){const ge=S[ne],Ie=C[ne]=ae?qi(C[ne]):Er(C[ne]);if(ou(ge,Ie))I(ge,Ie,q,null,F,te,de,ce,ae);else break;ne++}for(;ne<=pe&&ne<=we;){const ge=S[pe],Ie=C[we]=ae?qi(C[we]):Er(C[we]);if(ou(ge,Ie))I(ge,Ie,q,null,F,te,de,ce,ae);else break;pe--,we--}if(ne>pe){if(ne<=we){const ge=we+1,Ie=ge<be?C[ge].el:X;for(;ne<=we;)I(null,C[ne]=ae?qi(C[ne]):Er(C[ne]),q,Ie,F,te,de,ce,ae),ne++}}else if(ne>we)for(;ne<=pe;)gt(S[ne],F,te,!0),ne++;else{const ge=ne,Ie=ne,et=new Map;for(ne=Ie;ne<=we;ne++){const Mt=C[ne]=ae?qi(C[ne]):Er(C[ne]);Mt.key!=null&&et.set(Mt.key,ne)}let Ge,rn=0;const Kt=we-Ie+1;let zt=!1,on=0;const rs=new Array(Kt);for(ne=0;ne<Kt;ne++)rs[ne]=0;for(ne=ge;ne<=pe;ne++){const Mt=S[ne];if(rn>=Kt){gt(Mt,F,te,!0);continue}let is;if(Mt.key!=null)is=et.get(Mt.key);else for(Ge=Ie;Ge<=we;Ge++)if(rs[Ge-Ie]===0&&ou(Mt,C[Ge])){is=Ge;break}is===void 0?gt(Mt,F,te,!0):(rs[is-Ie]=ne+1,is>=on?on=is:zt=!0,I(Mt,C[is],q,null,F,te,de,ce,ae),rn++)}const Ti=zt?tV(rs):Cc;for(Ge=Ti.length-1,ne=Kt-1;ne>=0;ne--){const Mt=Ie+ne,is=C[Mt],bi=Mt+1<be?C[Mt+1].el:X;rs[ne]===0?I(null,is,q,bi,F,te,de,ce,ae):zt&&(Ge<0||ne!==Ti[Ge]?ns(is,q,bi,2):Ge--)}}},ns=(S,C,q,X,F=null)=>{const{el:te,type:de,transition:ce,children:ae,shapeFlag:ne}=S;if(ne&6){ns(S.component.subTree,C,q,X);return}if(ne&128){S.suspense.move(C,q,X);return}if(ne&64){de.move(S,C,q,ye);return}if(de===gn){s(te,C,q);for(let pe=0;pe<ae.length;pe++)ns(ae[pe],C,q,X);s(S.anchor,C,q);return}if(de===Jd){M(S,C,q);return}if(X!==2&&ne&1&&ce)if(X===0)ce.beforeEnter(te),s(te,C,q),Es(()=>ce.enter(te),F);else{const{leave:pe,delayLeave:we,afterLeave:ge}=ce,Ie=()=>s(te,C,q),et=()=>{pe(te,()=>{Ie(),ge&&ge()})};we?we(te,Ie,et):et()}else s(te,C,q)},gt=(S,C,q,X=!1,F=!1)=>{const{type:te,props:de,ref:ce,children:ae,dynamicChildren:ne,shapeFlag:be,patchFlag:pe,dirs:we,cacheIndex:ge}=S;if(pe===-2&&(F=!1),ce!=null&&Bg(ce,null,q,S,!0),ge!=null&&(C.renderCache[ge]=void 0),be&256){C.ctx.deactivate(S);return}const Ie=be&1&&we,et=!Pu(S);let Ge;if(et&&(Ge=de&&de.onVnodeBeforeUnmount)&&_r(Ge,C,S),be&6)ss(S.component,q,X);else{if(be&128){S.suspense.unmount(q,X);return}Ie&&Ko(S,null,C,"beforeUnmount"),be&64?S.type.remove(S,C,q,ye,X):ne&&!ne.hasOnce&&(te!==gn||pe>0&&pe&64)?Sn(ne,C,q,!1,!0):(te===gn&&pe&384||!F&&be&16)&&Sn(ae,C,q),X&&_t(S)}(et&&(Ge=de&&de.onVnodeUnmounted)||Ie)&&Es(()=>{Ge&&_r(Ge,C,S),Ie&&Ko(S,null,C,"unmounted")},q)},_t=S=>{const{type:C,el:q,anchor:X,transition:F}=S;if(C===gn){$s(q,X);return}if(C===Jd){K(S);return}const te=()=>{r(q),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(S.shapeFlag&1&&F&&!F.persisted){const{leave:de,delayLeave:ce}=F,ae=()=>de(q,te);ce?ce(S.el,te,ae):ae()}else te()},$s=(S,C)=>{let q;for(;S!==C;)q=g(S),r(S),S=q;r(C)},ss=(S,C,q)=>{const{bum:X,scope:F,job:te,subTree:de,um:ce,m:ae,a:ne}=S;Jw(ae),Jw(ne),X&&Gd(X),F.stop(),te&&(te.flags|=8,gt(de,S,C,q)),ce&&Es(ce,C),Es(()=>{S.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},Sn=(S,C,q,X=!1,F=!1,te=0)=>{for(let de=te;de<S.length;de++)gt(S[de],C,q,X,F)},Y=S=>{if(S.shapeFlag&6)return Y(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const C=g(S.anchor||S.el),q=C&&C[TL];return q?g(q):C};let $=!1;const he=(S,C,q)=>{S==null?C._vnode&&gt(C._vnode,null,null,!0):I(C._vnode||null,S,C,null,null,null,q),C._vnode=S,$||($=!0,Hw(),fS(),$=!1)},ye={p:I,um:gt,m:ns,r:_t,mt:Zt,mc:A,pc:xe,pbc:L,n:Y,o:n};let Ve,$e;return{render:he,hydrate:Ve,createApp:WL(he,Ve)}}function eg({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function zo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function eV(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function DS(n,e,t=!1){const s=n.children,r=e.children;if(Ae(s)&&Ae(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=qi(r[i]),a.el=o.el),!t&&a.patchFlag!==-2&&DS(o,a)),a.type===yp&&(a.el=o.el)}}function tV(n){const e=n.slice(),t=[0];let s,r,i,o,a;const c=n.length;for(s=0;s<c;s++){const u=n[s];if(u!==0){if(r=t[t.length-1],n[r]<u){e[s]=r,t.push(s);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<u?i=a+1:o=a;u<n[t[i]]&&(i>0&&(e[s]=t[i-1]),t[i]=s)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function OS(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:OS(e)}function Jw(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const nV=Symbol.for("v-scx"),sV=()=>tr(nV);function Yd(n,e,t){return xS(n,e,t)}function xS(n,e,t=mt){const{immediate:s,deep:r,flush:i,once:o}=t,a=In({},t);let c;if(vp)if(i==="sync"){const g=sV();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!e||s)a.once=!0;else{const g=()=>{};return g.stop=Ar,g.resume=Ar,g.pause=Ar,g}const u=Ln;a.call=(g,v,w)=>Dr(g,u,v,w);let d=!1;i==="post"?a.scheduler=g=>{Es(g,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(g,v)=>{v?g():my(g)}),a.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const f=yL(n,e,a);return c&&c.push(f),f}function rV(n,e,t){const s=this.proxy,r=Xt(n)?n.includes(".")?LS(s,n):()=>s[n]:n.bind(s,s);let i;Ne(e)?i=e:(i=e.handler,t=e);const o=Ah(this),a=xS(r,i.bind(s),t);return o(),a}function LS(n,e){const t=e.split(".");return()=>{let s=n;for(let r=0;r<t.length&&s;r++)s=s[t[r]];return s}}const iV=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${sr(e)}Modifiers`]||n[`${Ua(e)}Modifiers`];function oV(n,e,...t){if(n.isUnmounted)return;const s=n.vnode.props||mt;let r=t;const i=e.startsWith("update:"),o=i&&iV(s,e.slice(7));o&&(o.trim&&(r=t.map(d=>Xt(d)?d.trim():d)),o.number&&(r=t.map(Mg)));let a,c=s[a=Gm(e)]||s[a=Gm(sr(e))];!c&&i&&(c=s[a=Gm(Ua(e))]),c&&Dr(c,n,6,r);const u=s[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Dr(u,n,6,r)}}function VS(n,e,t=!1){const s=e.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let o={},a=!1;if(!Ne(n)){const c=u=>{const d=VS(u,e,!0);d&&(a=!0,In(o,d))};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!a?(vt(n)&&s.set(n,null),null):(Ae(i)?i.forEach(c=>o[c]=null):In(o,i),vt(n)&&s.set(n,o),o)}function _p(n,e){return!n||!ap(e)?!1:(e=e.slice(2).replace(/Once$/,""),rt(n,e[0].toLowerCase()+e.slice(1))||rt(n,Ua(e))||rt(n,e))}function tg(n){const{type:e,vnode:t,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:c,render:u,renderCache:d,props:f,data:g,setupState:v,ctx:w,inheritAttrs:I}=n,b=yf(n);let O,x;try{if(t.shapeFlag&4){const K=r||s,ie=K;O=Er(u.call(ie,K,d,f,v,g,w)),x=a}else{const K=e;O=Er(K.length>1?K(f,{attrs:a,slots:o,emit:c}):K(f,null)),x=e.props?a:aV(a)}}catch(K){ku.length=0,mp(K,n,1),O=It(ya)}let M=O;if(x&&I!==!1){const K=Object.keys(x),{shapeFlag:ie}=M;K.length&&ie&7&&(i&&K.some(ey)&&(x=cV(x,i)),M=jc(M,x,!1,!0))}return t.dirs&&(M=jc(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(t.dirs):t.dirs),t.transition&&gy(M,t.transition),O=M,yf(b),O}const aV=n=>{let e;for(const t in n)(t==="class"||t==="style"||ap(t))&&((e||(e={}))[t]=n[t]);return e},cV=(n,e)=>{const t={};for(const s in n)(!ey(s)||!(s.slice(9)in e))&&(t[s]=n[s]);return t};function lV(n,e,t){const{props:s,children:r,component:i}=n,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return s?Xw(s,o,u):!!o;if(c&8){const d=e.dynamicProps;for(let f=0;f<d.length;f++){const g=d[f];if(o[g]!==s[g]&&!_p(u,g))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Xw(s,o,u):!0:!!o;return!1}function Xw(n,e,t){const s=Object.keys(e);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==n[i]&&!_p(t,i))return!0}return!1}function uV({vnode:n,parent:e},t){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=e.vnode).el=t,e=e.parent;else break}}const MS=n=>n.__isSuspense;function hV(n,e){e&&e.pendingBranch?Ae(n)?e.effects.push(...n):e.effects.push(n):wL(n)}const gn=Symbol.for("v-fgt"),yp=Symbol.for("v-txt"),ya=Symbol.for("v-cmt"),Jd=Symbol.for("v-stc"),ku=[];let bs=null;function Ye(n=!1){ku.push(bs=n?null:[])}function dV(){ku.pop(),bs=ku[ku.length-1]||null}let Ju=1;function Zw(n){Ju+=n,n<0&&bs&&(bs.hasOnce=!0)}function FS(n){return n.dynamicChildren=Ju>0?bs||Cc:null,dV(),Ju>0&&bs&&bs.push(n),n}function Ze(n,e,t,s,r,i){return FS(k(n,e,t,s,r,i,!0))}function fV(n,e,t,s,r){return FS(It(n,e,t,s,r,!0))}function Kg(n){return n?n.__v_isVNode===!0:!1}function ou(n,e){return n.type===e.type&&n.key===e.key}const US=({key:n})=>n??null,Xd=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Xt(n)||Fn(n)||Ne(n)?{i:Ts,r:n,k:e,f:!!t}:n:null);function k(n,e=null,t=null,s=0,r=null,i=n===gn?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&US(e),ref:e&&Xd(e),scopeId:mS,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ts};return a?(vy(c,t),i&128&&n.normalize(c)):t&&(c.shapeFlag|=Xt(t)?8:16),Ju>0&&!o&&bs&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&bs.push(c),c}const It=pV;function pV(n,e=null,t=null,s=0,r=null,i=!1){if((!n||n===VL)&&(n=ya),Kg(n)){const a=jc(n,e,!0);return t&&vy(a,t),Ju>0&&!i&&bs&&(a.shapeFlag&6?bs[bs.indexOf(n)]=a:bs.push(a)),a.patchFlag=-2,a}if(SV(n)&&(n=n.__vccOpts),e){e=mV(e);let{class:a,style:c}=e;a&&!Xt(a)&&(e.class=ry(a)),vt(c)&&(dy(c)&&!Ae(c)&&(c=In({},c)),e.style=sy(c))}const o=Xt(n)?1:MS(n)?128:bL(n)?64:vt(n)?4:Ne(n)?2:0;return k(n,e,t,s,r,o,i,!0)}function mV(n){return n?dy(n)||AS(n)?In({},n):n:null}function jc(n,e,t=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:c}=n,u=e?_V(r||{},e):r,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&US(u),ref:e&&e.ref?t&&i?Ae(i)?i.concat(Xd(e)):[i,Xd(e)]:Xd(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==gn?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&jc(n.ssContent),ssFallback:n.ssFallback&&jc(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&gy(d,c.clone(d)),d}function vc(n=" ",e=0){return It(yp,null,n,e)}function gV(n,e){const t=It(Jd,null,n);return t.staticCount=e,t}function Os(n="",e=!1){return e?(Ye(),fV(ya,null,n)):It(ya,null,n)}function Er(n){return n==null||typeof n=="boolean"?It(ya):Ae(n)?It(gn,null,n.slice()):typeof n=="object"?qi(n):It(yp,null,String(n))}function qi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:jc(n)}function vy(n,e){let t=0;const{shapeFlag:s}=n;if(e==null)e=null;else if(Ae(e))t=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),vy(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!AS(e)?e._ctx=Ts:r===3&&Ts&&(Ts.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Ne(e)?(e={default:e,_ctx:Ts},t=32):(e=String(e),s&64?(t=16,e=[vc(e)]):t=8);n.children=e,n.shapeFlag|=t}function _V(...n){const e={};for(let t=0;t<n.length;t++){const s=n[t];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=ry([e.class,s.class]));else if(r==="style")e.style=sy([e.style,s.style]);else if(ap(r)){const i=e[r],o=s[r];o&&i!==o&&!(Ae(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function _r(n,e,t,s=null){Dr(n,e,7,[t,s])}const yV=TS();let vV=0;function EV(n,e,t){const s=n.type,r=(e?e.appContext:n.appContext)||yV,i={uid:vV++,vnode:n,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:RS(s,r),emitsOptions:VS(s,r),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:s.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=oV.bind(null,i),n.ce&&n.ce(i),i}let Ln=null,wf,zg;{const n=BA(),e=(t,s)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};wf=e("__VUE_INSTANCE_SETTERS__",t=>Ln=t),zg=e("__VUE_SSR_SETTERS__",t=>vp=t)}const Ah=n=>{const e=Ln;return wf(n),n.scope.on(),()=>{n.scope.off(),wf(e)}},eT=()=>{Ln&&Ln.scope.off(),wf(null)};function $S(n){return n.vnode.shapeFlag&4}let vp=!1;function wV(n,e=!1,t=!1){e&&zg(e);const{props:s,children:r}=n.vnode,i=$S(n);KL(n,s,i,e),YL(n,r,t);const o=i?TV(n,e):void 0;return e&&zg(!1),o}function TV(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,FL);const{setup:s}=t;if(s){const r=n.setupContext=s.length>1?IV(n):null,i=Ah(n);mo();const o=Ih(s,n,0,[n.props,r]);if(go(),i(),MA(o)){if(Pu(n)||_S(n),o.then(eT,eT),e)return o.then(a=>{tT(n,a,e)}).catch(a=>{mp(a,n,0)});n.asyncDep=o}else tT(n,o,e)}else BS(n,e)}function tT(n,e,t){Ne(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:vt(e)&&(n.setupState=lS(e)),BS(n,t)}let nT;function BS(n,e,t){const s=n.type;if(!n.render){if(!e&&nT&&!s.render){const r=s.template||_y(n).template;if(r){const{isCustomElement:i,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:c}=s,u=In(In({isCustomElement:i,delimiters:a},o),c);s.render=nT(r,u)}}n.render=s.render||Ar}{const r=Ah(n);mo();try{UL(n)}finally{go(),r()}}}const bV={get(n,e){return Un(n,"get",""),n[e]}};function IV(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,bV),slots:n.slots,emit:n.emit,expose:e}}function Ep(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(lS(hL(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Nu)return Nu[t](n)},has(e,t){return t in e||t in Nu}})):n.proxy}function AV(n,e=!0){return Ne(n)?n.displayName||n.name:n.name||e&&n.__name}function SV(n){return Ne(n)&&"__vccOpts"in n}const Qs=(n,e)=>gL(n,e,vp);function jS(n,e,t){const s=arguments.length;return s===2?vt(e)&&!Ae(e)?Kg(e)?It(n,null,[e]):It(n,e):It(n,null,e):(s>3?t=Array.prototype.slice.call(arguments,2):s===3&&Kg(t)&&(t=[t]),It(n,e,t))}const RV="3.5.8";/**
* @vue/runtime-dom v3.5.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gg;const sT=typeof window<"u"&&window.trustedTypes;if(sT)try{Gg=sT.createPolicy("vue",{createHTML:n=>n})}catch{}const qS=Gg?n=>Gg.createHTML(n):n=>n,CV="http://www.w3.org/2000/svg",PV="http://www.w3.org/1998/Math/MathML",Xr=typeof document<"u"?document:null,rT=Xr&&Xr.createElement("template"),NV={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,s)=>{const r=e==="svg"?Xr.createElementNS(CV,n):e==="mathml"?Xr.createElementNS(PV,n):t?Xr.createElement(n,{is:t}):Xr.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>Xr.createTextNode(n),createComment:n=>Xr.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Xr.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,s,r,i){const o=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{rT.innerHTML=qS(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=rT.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},kV=Symbol("_vtc");function DV(n,e,t){const s=n[kV];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Tf=Symbol("_vod"),HS=Symbol("_vsh"),iT={beforeMount(n,{value:e},{transition:t}){n[Tf]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):au(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:s}){!e!=!t&&(s?e?(s.beforeEnter(n),au(n,!0),s.enter(n)):s.leave(n,()=>{au(n,!1)}):au(n,e))},beforeUnmount(n,{value:e}){au(n,e)}};function au(n,e){n.style.display=e?n[Tf]:"none",n[HS]=!e}const OV=Symbol(""),xV=/(^|;)\s*display\s*:/;function LV(n,e,t){const s=n.style,r=Xt(t);let i=!1;if(t&&!r){if(e)if(Xt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Zd(s,a,"")}else for(const o in e)t[o]==null&&Zd(s,o,"");for(const o in t)o==="display"&&(i=!0),Zd(s,o,t[o])}else if(r){if(e!==t){const o=s[OV];o&&(t+=";"+o),s.cssText=t,i=xV.test(t)}}else e&&n.removeAttribute("style");Tf in n&&(n[Tf]=i?s.display:"",n[HS]&&(s.display="none"))}const oT=/\s*!important$/;function Zd(n,e,t){if(Ae(t))t.forEach(s=>Zd(n,e,s));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const s=VV(n,e);oT.test(t)?n.setProperty(Ua(s),t.replace(oT,""),"important"):n[s]=t}}const aT=["Webkit","Moz","ms"],ng={};function VV(n,e){const t=ng[e];if(t)return t;let s=sr(e);if(s!=="filter"&&s in n)return ng[e]=s;s=up(s);for(let r=0;r<aT.length;r++){const i=aT[r]+s;if(i in n)return ng[e]=i}return e}const cT="http://www.w3.org/1999/xlink";function lT(n,e,t,s,r,i=$x(e)){s&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(cT,e.slice(6,e.length)):n.setAttributeNS(cT,e,t):t==null||i&&!jA(t)?n.removeAttribute(e):n.setAttribute(e,i?"":kr(t)?String(t):t)}function MV(n,e,t,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?qS(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?n.getAttribute("value")||"":n.value,a=t==null?n.type==="checkbox"?"on":"":String(t);(o!==a||!("_value"in n))&&(n.value=a),t==null&&n.removeAttribute(e),n._value=t;return}let i=!1;if(t===""||t==null){const o=typeof n[e];o==="boolean"?t=jA(t):t==null&&o==="string"?(t="",i=!0):o==="number"&&(t=0,i=!0)}try{n[e]=t}catch{}i&&n.removeAttribute(e)}function ea(n,e,t,s){n.addEventListener(e,t,s)}function FV(n,e,t,s){n.removeEventListener(e,t,s)}const uT=Symbol("_vei");function UV(n,e,t,s,r=null){const i=n[uT]||(n[uT]={}),o=i[e];if(s&&o)o.value=s;else{const[a,c]=$V(e);if(s){const u=i[e]=qV(s,r);ea(n,a,u,c)}else o&&(FV(n,a,o,c),i[e]=void 0)}}const hT=/(?:Once|Passive|Capture)$/;function $V(n){let e;if(hT.test(n)){e={};let s;for(;s=n.match(hT);)n=n.slice(0,n.length-s[0].length),e[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Ua(n.slice(2)),e]}let sg=0;const BV=Promise.resolve(),jV=()=>sg||(BV.then(()=>sg=0),sg=Date.now());function qV(n,e){const t=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=t.attached)return;Dr(HV(s,t.value),e,5,[s])};return t.value=n,t.attached=jV(),t}function HV(n,e){if(Ae(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const dT=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,WV=(n,e,t,s,r,i)=>{const o=r==="svg";e==="class"?DV(n,s,o):e==="style"?LV(n,t,s):ap(e)?ey(e)||UV(n,e,t,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):KV(n,e,s,o))?(MV(n,e,s),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&lT(n,e,s,o,i,e!=="value")):(e==="true-value"?n._trueValue=s:e==="false-value"&&(n._falseValue=s),lT(n,e,s,o))};function KV(n,e,t,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in n&&dT(e)&&Ne(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return dT(e)&&Xt(t)?!1:!!(e in n||n._isVueCE&&(/[A-Z]/.test(e)||!Xt(t)))}const bf=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Ae(e)?t=>Gd(e,t):e};function zV(n){n.target.composing=!0}function fT(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Oc=Symbol("_assign"),Xn={created(n,{modifiers:{lazy:e,trim:t,number:s}},r){n[Oc]=bf(r);const i=s||r.props&&r.props.type==="number";ea(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=Mg(a)),n[Oc](a)}),t&&ea(n,"change",()=>{n.value=n.value.trim()}),e||(ea(n,"compositionstart",zV),ea(n,"compositionend",fT),ea(n,"change",fT))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:s,trim:r,number:i}},o){if(n[Oc]=bf(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?Mg(n.value):n.value,c=e??"";a!==c&&(document.activeElement===n&&n.type!=="range"&&(s&&e===t||r&&n.value.trim()===c)||(n.value=c))}},GV={deep:!0,created(n,e,t){n[Oc]=bf(t),ea(n,"change",()=>{const s=n._modelValue,r=QV(n),i=n.checked,o=n[Oc];if(Ae(s)){const a=qA(s,r),c=a!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const u=[...s];u.splice(a,1),o(u)}}else if(cp(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(WS(n,i))})},mounted:pT,beforeUpdate(n,e,t){n[Oc]=bf(t),pT(n,e,t)}};function pT(n,{value:e,oldValue:t},s){n._modelValue=e;let r;Ae(e)?r=qA(e,s.props.value)>-1:cp(e)?r=e.has(s.props.value):r=hp(e,WS(n,!0)),n.checked!==r&&(n.checked=r)}function QV(n){return"_value"in n?n._value:n.value}function WS(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const YV=["ctrl","shift","alt","meta"],JV={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>YV.some(t=>n[`${t}Key`]&&!e.includes(t))},wp=(n,e)=>{const t=n._withMods||(n._withMods={}),s=e.join(".");return t[s]||(t[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=JV[e[o]];if(a&&a(r,e))return}return n(r,...i)})},XV=In({patchProp:WV},NV);let mT;function ZV(){return mT||(mT=XL(XV))}const eM=(...n)=>{const e=ZV().createApp(...n),{mount:t}=e;return e.mount=s=>{const r=nM(s);if(!r)return;const i=e._component;!Ne(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=t(r,!1,tM(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function tM(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function nM(n){return Xt(n)?document.querySelector(n):n}var sM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rM={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(n,e){(function(t,s){n.exports=s()})(sM,function(){const t=new Map,s={set(_,h,m){t.has(_)||t.set(_,new Map);const E=t.get(_);if(!E.has(h)&&E.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(E.keys())[0]}.`);return}E.set(h,m)},get(_,h){return t.has(_)&&t.get(_).get(h)||null},remove(_,h){if(!t.has(_))return;const m=t.get(_);m.delete(h),m.size===0&&t.delete(_)}},r=1e6,i=1e3,o="transitionend",a=_=>(_&&window.CSS&&window.CSS.escape&&(_=_.replace(/#([^\s"#']+)/g,(h,m)=>`#${CSS.escape(m)}`)),_),c=_=>_==null?`${_}`:Object.prototype.toString.call(_).match(/\s([a-z]+)/i)[1].toLowerCase(),u=_=>{do _+=Math.floor(Math.random()*r);while(document.getElementById(_));return _},d=_=>{if(!_)return 0;let{transitionDuration:h,transitionDelay:m}=window.getComputedStyle(_);const E=Number.parseFloat(h),P=Number.parseFloat(m);return!E&&!P?0:(h=h.split(",")[0],m=m.split(",")[0],(Number.parseFloat(h)+Number.parseFloat(m))*i)},f=_=>{_.dispatchEvent(new Event(o))},g=_=>!_||typeof _!="object"?!1:(typeof _.jquery<"u"&&(_=_[0]),typeof _.nodeType<"u"),v=_=>g(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(a(_)):null,w=_=>{if(!g(_)||_.getClientRects().length===0)return!1;const h=getComputedStyle(_).getPropertyValue("visibility")==="visible",m=_.closest("details:not([open])");if(!m)return h;if(m!==_){const E=_.closest("summary");if(E&&E.parentNode!==m||E===null)return!1}return h},I=_=>!_||_.nodeType!==Node.ELEMENT_NODE||_.classList.contains("disabled")?!0:typeof _.disabled<"u"?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false",b=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const h=_.getRootNode();return h instanceof ShadowRoot?h:null}return _ instanceof ShadowRoot?_:_.parentNode?b(_.parentNode):null},O=()=>{},x=_=>{_.offsetHeight},M=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,K=[],ie=_=>{document.readyState==="loading"?(K.length||document.addEventListener("DOMContentLoaded",()=>{for(const h of K)h()}),K.push(_)):_()},re=()=>document.documentElement.dir==="rtl",R=_=>{ie(()=>{const h=M();if(h){const m=_.NAME,E=h.fn[m];h.fn[m]=_.jQueryInterface,h.fn[m].Constructor=_,h.fn[m].noConflict=()=>(h.fn[m]=E,_.jQueryInterface)}})},A=(_,h=[],m=_)=>typeof _=="function"?_(...h):m,N=(_,h,m=!0)=>{if(!m){A(_);return}const P=d(h)+5;let j=!1;const W=({target:J})=>{J===h&&(j=!0,h.removeEventListener(o,W),A(_))};h.addEventListener(o,W),setTimeout(()=>{j||f(h)},P)},L=(_,h,m,E)=>{const P=_.length;let j=_.indexOf(h);return j===-1?!m&&E?_[P-1]:_[0]:(j+=m?1:-1,E&&(j=(j+P)%P),_[Math.max(0,Math.min(j,P-1))])},V=/[^.]*(?=\..*)\.|.*/,B=/\..*/,D=/::\d+$/,Zt={};let jn=1;const Ot={mouseenter:"mouseover",mouseleave:"mouseout"},Be=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function xe(_,h){return h&&`${h}::${jn++}`||_.uidEvent||jn++}function An(_){const h=xe(_);return _.uidEvent=h,Zt[h]=Zt[h]||{},Zt[h]}function _s(_,h){return function m(E){return he(E,{delegateTarget:_}),m.oneOff&&$.off(_,E.type,h),h.apply(_,[E])}}function ns(_,h,m){return function E(P){const j=_.querySelectorAll(h);for(let{target:W}=P;W&&W!==this;W=W.parentNode)for(const J of j)if(J===W)return he(P,{delegateTarget:W}),E.oneOff&&$.off(_,P.type,h,m),m.apply(W,[P])}}function gt(_,h,m=null){return Object.values(_).find(E=>E.callable===h&&E.delegationSelector===m)}function _t(_,h,m){const E=typeof h=="string",P=E?m:h||m;let j=Y(_);return Be.has(j)||(j=_),[E,P,j]}function $s(_,h,m,E,P){if(typeof h!="string"||!_)return;let[j,W,J]=_t(h,m,E);h in Ot&&(W=(yt=>function(Fe){if(!Fe.relatedTarget||Fe.relatedTarget!==Fe.delegateTarget&&!Fe.delegateTarget.contains(Fe.relatedTarget))return yt.call(this,Fe)})(W));const se=An(_),ve=se[J]||(se[J]={}),oe=gt(ve,W,j?m:null);if(oe){oe.oneOff=oe.oneOff&&P;return}const Oe=xe(W,h.replace(V,"")),Me=j?ns(_,m,W):_s(_,W);Me.delegationSelector=j?m:null,Me.callable=W,Me.oneOff=P,Me.uidEvent=Oe,ve[Oe]=Me,_.addEventListener(J,Me,j)}function ss(_,h,m,E,P){const j=gt(h[m],E,P);j&&(_.removeEventListener(m,j,!!P),delete h[m][j.uidEvent])}function Sn(_,h,m,E){const P=h[m]||{};for(const[j,W]of Object.entries(P))j.includes(E)&&ss(_,h,m,W.callable,W.delegationSelector)}function Y(_){return _=_.replace(B,""),Ot[_]||_}const $={on(_,h,m,E){$s(_,h,m,E,!1)},one(_,h,m,E){$s(_,h,m,E,!0)},off(_,h,m,E){if(typeof h!="string"||!_)return;const[P,j,W]=_t(h,m,E),J=W!==h,se=An(_),ve=se[W]||{},oe=h.startsWith(".");if(typeof j<"u"){if(!Object.keys(ve).length)return;ss(_,se,W,j,P?m:null);return}if(oe)for(const Oe of Object.keys(se))Sn(_,se,Oe,h.slice(1));for(const[Oe,Me]of Object.entries(ve)){const Re=Oe.replace(D,"");(!J||h.includes(Re))&&ss(_,se,W,Me.callable,Me.delegationSelector)}},trigger(_,h,m){if(typeof h!="string"||!_)return null;const E=M(),P=Y(h),j=h!==P;let W=null,J=!0,se=!0,ve=!1;j&&E&&(W=E.Event(h,m),E(_).trigger(W),J=!W.isPropagationStopped(),se=!W.isImmediatePropagationStopped(),ve=W.isDefaultPrevented());const oe=he(new Event(h,{bubbles:J,cancelable:!0}),m);return ve&&oe.preventDefault(),se&&_.dispatchEvent(oe),oe.defaultPrevented&&W&&W.preventDefault(),oe}};function he(_,h={}){for(const[m,E]of Object.entries(h))try{_[m]=E}catch{Object.defineProperty(_,m,{configurable:!0,get(){return E}})}return _}function ye(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function Ve(_){return _.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const $e={setDataAttribute(_,h,m){_.setAttribute(`data-bs-${Ve(h)}`,m)},removeDataAttribute(_,h){_.removeAttribute(`data-bs-${Ve(h)}`)},getDataAttributes(_){if(!_)return{};const h={},m=Object.keys(_.dataset).filter(E=>E.startsWith("bs")&&!E.startsWith("bsConfig"));for(const E of m){let P=E.replace(/^bs/,"");P=P.charAt(0).toLowerCase()+P.slice(1,P.length),h[P]=ye(_.dataset[E])}return h},getDataAttribute(_,h){return ye(_.getAttribute(`data-bs-${Ve(h)}`))}};class S{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,m){const E=g(m)?$e.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof E=="object"?E:{},...g(m)?$e.getDataAttributes(m):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,m=this.constructor.DefaultType){for(const[E,P]of Object.entries(m)){const j=h[E],W=g(j)?"element":c(j);if(!new RegExp(P).test(W))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${E}" provided type "${W}" but expected type "${P}".`)}}}const C="5.3.3";class q extends S{constructor(h,m){super(),h=v(h),h&&(this._element=h,this._config=this._getConfig(m),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,m,E=!0){N(h,m,E)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return s.get(v(h),this.DATA_KEY)}static getOrCreateInstance(h,m={}){return this.getInstance(h)||new this(h,typeof m=="object"?m:null)}static get VERSION(){return C}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const X=_=>{let h=_.getAttribute("data-bs-target");if(!h||h==="#"){let m=_.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),h=m&&m!=="#"?m.trim():null}return h?h.split(",").map(m=>a(m)).join(","):null},F={find(_,h=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(h,_))},findOne(_,h=document.documentElement){return Element.prototype.querySelector.call(h,_)},children(_,h){return[].concat(..._.children).filter(m=>m.matches(h))},parents(_,h){const m=[];let E=_.parentNode.closest(h);for(;E;)m.push(E),E=E.parentNode.closest(h);return m},prev(_,h){let m=_.previousElementSibling;for(;m;){if(m.matches(h))return[m];m=m.previousElementSibling}return[]},next(_,h){let m=_.nextElementSibling;for(;m;){if(m.matches(h))return[m];m=m.nextElementSibling}return[]},focusableChildren(_){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(h,_).filter(m=>!I(m)&&w(m))},getSelectorFromElement(_){const h=X(_);return h&&F.findOne(h)?h:null},getElementFromSelector(_){const h=X(_);return h?F.findOne(h):null},getMultipleElementsFromSelector(_){const h=X(_);return h?F.find(h):[]}},te=(_,h="hide")=>{const m=`click.dismiss${_.EVENT_KEY}`,E=_.NAME;$.on(document,m,`[data-bs-dismiss="${E}"]`,function(P){if(["A","AREA"].includes(this.tagName)&&P.preventDefault(),I(this))return;const j=F.getElementFromSelector(this)||this.closest(`.${E}`);_.getOrCreateInstance(j)[h]()})},de="alert",ae=".bs.alert",ne=`close${ae}`,be=`closed${ae}`,pe="fade",we="show";class ge extends q{static get NAME(){return de}close(){if($.trigger(this._element,ne).defaultPrevented)return;this._element.classList.remove(we);const m=this._element.classList.contains(pe);this._queueCallback(()=>this._destroyElement(),this._element,m)}_destroyElement(){this._element.remove(),$.trigger(this._element,be),this.dispose()}static jQueryInterface(h){return this.each(function(){const m=ge.getOrCreateInstance(this);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h](this)}})}}te(ge,"close"),R(ge);const Ie="button",Ge=".bs.button",rn=".data-api",Kt="active",zt='[data-bs-toggle="button"]',on=`click${Ge}${rn}`;class rs extends q{static get NAME(){return Ie}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Kt))}static jQueryInterface(h){return this.each(function(){const m=rs.getOrCreateInstance(this);h==="toggle"&&m[h]()})}}$.on(document,on,zt,_=>{_.preventDefault();const h=_.target.closest(zt);rs.getOrCreateInstance(h).toggle()}),R(rs);const Ti="swipe",Mt=".bs.swipe",is=`touchstart${Mt}`,bi=`touchmove${Mt}`,Yh=`touchend${Mt}`,Jh=`pointerdown${Mt}`,Io=`pointerup${Mt}`,kl="touch",Dl="pen",Mr="pointer-event",Xh=40,Ga={endCallback:null,leftCallback:null,rightCallback:null},Zh={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class lr extends S{constructor(h,m){super(),this._element=h,!(!h||!lr.isSupported())&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ga}static get DefaultType(){return Zh}static get NAME(){return Ti}dispose(){$.off(this._element,Mt)}_start(h){if(!this._supportPointerEvents){this._deltaX=h.touches[0].clientX;return}this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX)}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),A(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=Xh)return;const m=h/this._deltaX;this._deltaX=0,m&&A(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,Jh,h=>this._start(h)),$.on(this._element,Io,h=>this._end(h)),this._element.classList.add(Mr)):($.on(this._element,is,h=>this._start(h)),$.on(this._element,bi,h=>this._move(h)),$.on(this._element,Yh,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType===Dl||h.pointerType===kl)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ed="carousel",Bs=".bs.carousel",Ii=".data-api",Ao="ArrowLeft",gm="ArrowRight",_m=500,Cs="next",Ai="prev",Si="left",Fr="right",td=`slide${Bs}`,So=`slid${Bs}`,Qa=`keydown${Bs}`,ur=`mouseenter${Bs}`,nd=`mouseleave${Bs}`,sd=`dragstart${Bs}`,Ol=`load${Bs}${Ii}`,xl=`click${Bs}${Ii}`,Ll="carousel",Ro="active",ym="slide",Ya="carousel-item-end",rd="carousel-item-start",Vl="carousel-item-next",Co="carousel-item-prev",hr=".active",Ja=".carousel-item",vm=hr+Ja,id=".carousel-item img",od=".carousel-indicators",ad="[data-bs-slide], [data-bs-slide-to]",Ml='[data-bs-ride="carousel"]',Fl={[Ao]:Fr,[gm]:Si},cd={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ld={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ri extends q{constructor(h,m){super(h,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=F.findOne(od,this._element),this._addEventListeners(),this._config.ride===Ll&&this.cycle()}static get Default(){return cd}static get DefaultType(){return ld}static get NAME(){return ed}next(){this._slide(Cs)}nextWhenVisible(){!document.hidden&&w(this._element)&&this.next()}prev(){this._slide(Ai)}pause(){this._isSliding&&f(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){$.one(this._element,So,()=>this.cycle());return}this.cycle()}}to(h){const m=this._getItems();if(h>m.length-1||h<0)return;if(this._isSliding){$.one(this._element,So,()=>this.to(h));return}const E=this._getItemIndex(this._getActive());if(E===h)return;const P=h>E?Cs:Ai;this._slide(P,m[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&$.on(this._element,Qa,h=>this._keydown(h)),this._config.pause==="hover"&&($.on(this._element,ur,()=>this.pause()),$.on(this._element,nd,()=>this._maybeEnableCycle())),this._config.touch&&lr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const E of F.find(id,this._element))$.on(E,sd,P=>P.preventDefault());const m={leftCallback:()=>this._slide(this._directionToOrder(Si)),rightCallback:()=>this._slide(this._directionToOrder(Fr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),_m+this._config.interval))}};this._swipeHelper=new lr(this._element,m)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const m=Fl[h.key];m&&(h.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const m=F.findOne(hr,this._indicatorsElement);m.classList.remove(Ro),m.removeAttribute("aria-current");const E=F.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);E&&(E.classList.add(Ro),E.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const m=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(h,m=null){if(this._isSliding)return;const E=this._getActive(),P=h===Cs,j=m||L(this._getItems(),E,P,this._config.wrap);if(j===E)return;const W=this._getItemIndex(j),J=Re=>$.trigger(this._element,Re,{relatedTarget:j,direction:this._orderToDirection(h),from:this._getItemIndex(E),to:W});if(J(td).defaultPrevented||!E||!j)return;const ve=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(W),this._activeElement=j;const oe=P?rd:Ya,Oe=P?Vl:Co;j.classList.add(Oe),x(j),E.classList.add(oe),j.classList.add(oe);const Me=()=>{j.classList.remove(oe,Oe),j.classList.add(Ro),E.classList.remove(Ro,Oe,oe),this._isSliding=!1,J(So)};this._queueCallback(Me,E,this._isAnimated()),ve&&this.cycle()}_isAnimated(){return this._element.classList.contains(ym)}_getActive(){return F.findOne(vm,this._element)}_getItems(){return F.find(Ja,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return re()?h===Si?Ai:Cs:h===Si?Cs:Ai}_orderToDirection(h){return re()?h===Ai?Si:Fr:h===Ai?Fr:Si}static jQueryInterface(h){return this.each(function(){const m=Ri.getOrCreateInstance(this,h);if(typeof h=="number"){m.to(h);return}if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}})}}$.on(document,xl,ad,function(_){const h=F.getElementFromSelector(this);if(!h||!h.classList.contains(Ll))return;_.preventDefault();const m=Ri.getOrCreateInstance(h),E=this.getAttribute("data-bs-slide-to");if(E){m.to(E),m._maybeEnableCycle();return}if($e.getDataAttribute(this,"slide")==="next"){m.next(),m._maybeEnableCycle();return}m.prev(),m._maybeEnableCycle()}),$.on(window,Ol,()=>{const _=F.find(Ml);for(const h of _)Ri.getOrCreateInstance(h)}),R(Ri);const Em="collapse",Ci=".bs.collapse",Tm=".data-api",Ur=`show${Ci}`,js=`shown${Ci}`,Xa=`hide${Ci}`,Za=`hidden${Ci}`,ud=`click${Ci}${Tm}`,at="show",qs="collapse",dr="collapsing",Po="collapsed",bm=`:scope .${qs} .${qs}`,hd="collapse-horizontal",Im="width",Am="height",Sm=".collapse.show, .collapse.collapsing",Ul='[data-bs-toggle="collapse"]',No={parent:null,toggle:!0},fr={parent:"(null|element)",toggle:"boolean"};class $r extends q{constructor(h,m){super(h,m),this._isTransitioning=!1,this._triggerArray=[];const E=F.find(Ul);for(const P of E){const j=F.getSelectorFromElement(P),W=F.find(j).filter(J=>J===this._element);j!==null&&W.length&&this._triggerArray.push(P)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return No}static get DefaultType(){return fr}static get NAME(){return Em}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(Sm).filter(J=>J!==this._element).map(J=>$r.getOrCreateInstance(J,{toggle:!1}))),h.length&&h[0]._isTransitioning||$.trigger(this._element,Ur).defaultPrevented)return;for(const J of h)J.hide();const E=this._getDimension();this._element.classList.remove(qs),this._element.classList.add(dr),this._element.style[E]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const P=()=>{this._isTransitioning=!1,this._element.classList.remove(dr),this._element.classList.add(qs,at),this._element.style[E]="",$.trigger(this._element,js)},W=`scroll${E[0].toUpperCase()+E.slice(1)}`;this._queueCallback(P,this._element,!0),this._element.style[E]=`${this._element[W]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,Xa).defaultPrevented)return;const m=this._getDimension();this._element.style[m]=`${this._element.getBoundingClientRect()[m]}px`,x(this._element),this._element.classList.add(dr),this._element.classList.remove(qs,at);for(const P of this._triggerArray){const j=F.getElementFromSelector(P);j&&!this._isShown(j)&&this._addAriaAndCollapsedClass([P],!1)}this._isTransitioning=!0;const E=()=>{this._isTransitioning=!1,this._element.classList.remove(dr),this._element.classList.add(qs),$.trigger(this._element,Za)};this._element.style[m]="",this._queueCallback(E,this._element,!0)}_isShown(h=this._element){return h.classList.contains(at)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=v(h.parent),h}_getDimension(){return this._element.classList.contains(hd)?Im:Am}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(Ul);for(const m of h){const E=F.getElementFromSelector(m);E&&this._addAriaAndCollapsedClass([m],this._isShown(E))}}_getFirstLevelChildren(h){const m=F.find(bm,this._config.parent);return F.find(h,this._config.parent).filter(E=>!m.includes(E))}_addAriaAndCollapsedClass(h,m){if(h.length)for(const E of h)E.classList.toggle(Po,!m),E.setAttribute("aria-expanded",m)}static jQueryInterface(h){const m={};return typeof h=="string"&&/show|hide/.test(h)&&(m.toggle=!1),this.each(function(){const E=$r.getOrCreateInstance(this,m);if(typeof h=="string"){if(typeof E[h]>"u")throw new TypeError(`No method named "${h}"`);E[h]()}})}}$.on(document,ud,Ul,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();for(const h of F.getMultipleElementsFromSelector(this))$r.getOrCreateInstance(h,{toggle:!1}).toggle()}),R($r);var an="top",Cn="bottom",Gt="right",yn="left",ec="auto",Pi=[an,Cn,Gt,yn],Pn="start",Ni="end",dd="clippingParents",ki="viewport",Hs="popper",$l="reference",Br=Pi.reduce(function(_,h){return _.concat([h+"-"+Pn,h+"-"+Ni])},[]),jr=[].concat(Pi,[ec]).reduce(function(_,h){return _.concat([h,h+"-"+Pn,h+"-"+Ni])},[]),Bl="beforeRead",tc="read",Et="afterRead",fd="beforeMain",pd="main",jl="afterMain",ql="beforeWrite",Hl="write",ko="afterWrite",Wl=[Bl,tc,Et,fd,pd,jl,ql,Hl,ko];function Qt(_){return _?(_.nodeName||"").toLowerCase():null}function Nn(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var h=_.ownerDocument;return h&&h.defaultView||window}return _}function qr(_){var h=Nn(_).Element;return _ instanceof h||_ instanceof Element}function cn(_){var h=Nn(_).HTMLElement;return _ instanceof h||_ instanceof HTMLElement}function nc(_){if(typeof ShadowRoot>"u")return!1;var h=Nn(_).ShadowRoot;return _ instanceof h||_ instanceof ShadowRoot}function Kl(_){var h=_.state;Object.keys(h.elements).forEach(function(m){var E=h.styles[m]||{},P=h.attributes[m]||{},j=h.elements[m];!cn(j)||!Qt(j)||(Object.assign(j.style,E),Object.keys(P).forEach(function(W){var J=P[W];J===!1?j.removeAttribute(W):j.setAttribute(W,J===!0?"":J)}))})}function sc(_){var h=_.state,m={popper:{position:h.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(h.elements.popper.style,m.popper),h.styles=m,h.elements.arrow&&Object.assign(h.elements.arrow.style,m.arrow),function(){Object.keys(h.elements).forEach(function(E){var P=h.elements[E],j=h.attributes[E]||{},W=Object.keys(h.styles.hasOwnProperty(E)?h.styles[E]:m[E]),J=W.reduce(function(se,ve){return se[ve]="",se},{});!cn(P)||!Qt(P)||(Object.assign(P.style,J),Object.keys(j).forEach(function(se){P.removeAttribute(se)}))})}}const rc={name:"applyStyles",enabled:!0,phase:"write",fn:Kl,effect:sc,requires:["computeStyles"]};function qn(_){return _.split("-")[0]}var Hr=Math.max,Do=Math.min,Ps=Math.round;function ic(){var _=navigator.userAgentData;return _!=null&&_.brands&&Array.isArray(_.brands)?_.brands.map(function(h){return h.brand+"/"+h.version}).join(" "):navigator.userAgent}function zl(){return!/^((?!chrome|android).)*safari/i.test(ic())}function pr(_,h,m){h===void 0&&(h=!1),m===void 0&&(m=!1);var E=_.getBoundingClientRect(),P=1,j=1;h&&cn(_)&&(P=_.offsetWidth>0&&Ps(E.width)/_.offsetWidth||1,j=_.offsetHeight>0&&Ps(E.height)/_.offsetHeight||1);var W=qr(_)?Nn(_):window,J=W.visualViewport,se=!zl()&&m,ve=(E.left+(se&&J?J.offsetLeft:0))/P,oe=(E.top+(se&&J?J.offsetTop:0))/j,Oe=E.width/P,Me=E.height/j;return{width:Oe,height:Me,top:oe,right:ve+Oe,bottom:oe+Me,left:ve,x:ve,y:oe}}function Oo(_){var h=pr(_),m=_.offsetWidth,E=_.offsetHeight;return Math.abs(h.width-m)<=1&&(m=h.width),Math.abs(h.height-E)<=1&&(E=h.height),{x:_.offsetLeft,y:_.offsetTop,width:m,height:E}}function Gl(_,h){var m=h.getRootNode&&h.getRootNode();if(_.contains(h))return!0;if(m&&nc(m)){var E=h;do{if(E&&_.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function os(_){return Nn(_).getComputedStyle(_)}function md(_){return["table","td","th"].indexOf(Qt(_))>=0}function Ws(_){return((qr(_)?_.ownerDocument:_.document)||window.document).documentElement}function Ns(_){return Qt(_)==="html"?_:_.assignedSlot||_.parentNode||(nc(_)?_.host:null)||Ws(_)}function Ql(_){return!cn(_)||os(_).position==="fixed"?null:_.offsetParent}function gd(_){var h=/firefox/i.test(ic()),m=/Trident/i.test(ic());if(m&&cn(_)){var E=os(_);if(E.position==="fixed")return null}var P=Ns(_);for(nc(P)&&(P=P.host);cn(P)&&["html","body"].indexOf(Qt(P))<0;){var j=os(P);if(j.transform!=="none"||j.perspective!=="none"||j.contain==="paint"||["transform","perspective"].indexOf(j.willChange)!==-1||h&&j.willChange==="filter"||h&&j.filter&&j.filter!=="none")return P;P=P.parentNode}return null}function Di(_){for(var h=Nn(_),m=Ql(_);m&&md(m)&&os(m).position==="static";)m=Ql(m);return m&&(Qt(m)==="html"||Qt(m)==="body"&&os(m).position==="static")?h:m||gd(_)||h}function oc(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function mr(_,h,m){return Hr(_,Do(h,m))}function Hn(_,h,m){var E=mr(_,h,m);return E>m?m:E}function Yl(){return{top:0,right:0,bottom:0,left:0}}function Jl(_){return Object.assign({},Yl(),_)}function Wr(_,h){return h.reduce(function(m,E){return m[E]=_,m},{})}var l=function(h,m){return h=typeof h=="function"?h(Object.assign({},m.rects,{placement:m.placement})):h,Jl(typeof h!="number"?h:Wr(h,Pi))};function p(_){var h,m=_.state,E=_.name,P=_.options,j=m.elements.arrow,W=m.modifiersData.popperOffsets,J=qn(m.placement),se=oc(J),ve=[yn,Gt].indexOf(J)>=0,oe=ve?"height":"width";if(!(!j||!W)){var Oe=l(P.padding,m),Me=Oo(j),Re=se==="y"?an:yn,yt=se==="y"?Cn:Gt,Fe=m.rects.reference[oe]+m.rects.reference[se]-W[se]-m.rects.popper[oe],tt=W[se]-m.rects.reference[se],wt=Di(j),Bt=wt?se==="y"?wt.clientHeight||0:wt.clientWidth||0:0,jt=Fe/2-tt/2,qe=Oe[Re],ut=Bt-Me[oe]-Oe[yt],ht=Bt/2-Me[oe]/2+jt,Ft=mr(qe,ht,ut),vn=se;m.modifiersData[E]=(h={},h[vn]=Ft,h.centerOffset=Ft-ht,h)}}function y(_){var h=_.state,m=_.options,E=m.element,P=E===void 0?"[data-popper-arrow]":E;P!=null&&(typeof P=="string"&&(P=h.elements.popper.querySelector(P),!P)||Gl(h.elements.popper,P)&&(h.elements.arrow=P))}const T={name:"arrow",enabled:!0,phase:"main",fn:p,effect:y,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function U(_){return _.split("-")[1]}var G={top:"auto",right:"auto",bottom:"auto",left:"auto"};function le(_,h){var m=_.x,E=_.y,P=h.devicePixelRatio||1;return{x:Ps(m*P)/P||0,y:Ps(E*P)/P||0}}function st(_){var h,m=_.popper,E=_.popperRect,P=_.placement,j=_.variation,W=_.offsets,J=_.position,se=_.gpuAcceleration,ve=_.adaptive,oe=_.roundOffsets,Oe=_.isFixed,Me=W.x,Re=Me===void 0?0:Me,yt=W.y,Fe=yt===void 0?0:yt,tt=typeof oe=="function"?oe({x:Re,y:Fe}):{x:Re,y:Fe};Re=tt.x,Fe=tt.y;var wt=W.hasOwnProperty("x"),Bt=W.hasOwnProperty("y"),jt=yn,qe=an,ut=window;if(ve){var ht=Di(m),Ft="clientHeight",vn="clientWidth";if(ht===Nn(m)&&(ht=Ws(m),os(ht).position!=="static"&&J==="absolute"&&(Ft="scrollHeight",vn="scrollWidth")),ht=ht,P===an||(P===yn||P===Gt)&&j===Ni){qe=Cn;var un=Oe&&ht===ut&&ut.visualViewport?ut.visualViewport.height:ht[Ft];Fe-=un-E.height,Fe*=se?1:-1}if(P===yn||(P===an||P===Cn)&&j===Ni){jt=Gt;var tn=Oe&&ht===ut&&ut.visualViewport?ut.visualViewport.width:ht[vn];Re-=tn-E.width,Re*=se?1:-1}}var kn=Object.assign({position:J},ve&&G),zs=oe===!0?le({x:Re,y:Fe},Nn(m)):{x:Re,y:Fe};if(Re=zs.x,Fe=zs.y,se){var Wn;return Object.assign({},kn,(Wn={},Wn[qe]=Bt?"0":"",Wn[jt]=wt?"0":"",Wn.transform=(ut.devicePixelRatio||1)<=1?"translate("+Re+"px, "+Fe+"px)":"translate3d("+Re+"px, "+Fe+"px, 0)",Wn))}return Object.assign({},kn,(h={},h[qe]=Bt?Fe+"px":"",h[jt]=wt?Re+"px":"",h.transform="",h))}function en(_){var h=_.state,m=_.options,E=m.gpuAcceleration,P=E===void 0?!0:E,j=m.adaptive,W=j===void 0?!0:j,J=m.roundOffsets,se=J===void 0?!0:J,ve={placement:qn(h.placement),variation:U(h.placement),popper:h.elements.popper,popperRect:h.rects.popper,gpuAcceleration:P,isFixed:h.options.strategy==="fixed"};h.modifiersData.popperOffsets!=null&&(h.styles.popper=Object.assign({},h.styles.popper,st(Object.assign({},ve,{offsets:h.modifiersData.popperOffsets,position:h.options.strategy,adaptive:W,roundOffsets:se})))),h.modifiersData.arrow!=null&&(h.styles.arrow=Object.assign({},h.styles.arrow,st(Object.assign({},ve,{offsets:h.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:se})))),h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-placement":h.placement})}const je={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:en,data:{}};var $t={passive:!0};function ln(_){var h=_.state,m=_.instance,E=_.options,P=E.scroll,j=P===void 0?!0:P,W=E.resize,J=W===void 0?!0:W,se=Nn(h.elements.popper),ve=[].concat(h.scrollParents.reference,h.scrollParents.popper);return j&&ve.forEach(function(oe){oe.addEventListener("scroll",m.update,$t)}),J&&se.addEventListener("resize",m.update,$t),function(){j&&ve.forEach(function(oe){oe.removeEventListener("scroll",m.update,$t)}),J&&se.removeEventListener("resize",m.update,$t)}}const gr={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ln,data:{}};var ys={left:"right",right:"left",bottom:"top",top:"bottom"};function Kr(_){return _.replace(/left|right|bottom|top/g,function(h){return ys[h]})}var Xl={start:"end",end:"start"};function kE(_){return _.replace(/start|end/g,function(h){return Xl[h]})}function Rm(_){var h=Nn(_),m=h.pageXOffset,E=h.pageYOffset;return{scrollLeft:m,scrollTop:E}}function Cm(_){return pr(Ws(_)).left+Rm(_).scrollLeft}function vk(_,h){var m=Nn(_),E=Ws(_),P=m.visualViewport,j=E.clientWidth,W=E.clientHeight,J=0,se=0;if(P){j=P.width,W=P.height;var ve=zl();(ve||!ve&&h==="fixed")&&(J=P.offsetLeft,se=P.offsetTop)}return{width:j,height:W,x:J+Cm(_),y:se}}function Ek(_){var h,m=Ws(_),E=Rm(_),P=(h=_.ownerDocument)==null?void 0:h.body,j=Hr(m.scrollWidth,m.clientWidth,P?P.scrollWidth:0,P?P.clientWidth:0),W=Hr(m.scrollHeight,m.clientHeight,P?P.scrollHeight:0,P?P.clientHeight:0),J=-E.scrollLeft+Cm(_),se=-E.scrollTop;return os(P||m).direction==="rtl"&&(J+=Hr(m.clientWidth,P?P.clientWidth:0)-j),{width:j,height:W,x:J,y:se}}function Pm(_){var h=os(_),m=h.overflow,E=h.overflowX,P=h.overflowY;return/auto|scroll|overlay|hidden/.test(m+P+E)}function DE(_){return["html","body","#document"].indexOf(Qt(_))>=0?_.ownerDocument.body:cn(_)&&Pm(_)?_:DE(Ns(_))}function Zl(_,h){var m;h===void 0&&(h=[]);var E=DE(_),P=E===((m=_.ownerDocument)==null?void 0:m.body),j=Nn(E),W=P?[j].concat(j.visualViewport||[],Pm(E)?E:[]):E,J=h.concat(W);return P?J:J.concat(Zl(Ns(W)))}function Nm(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function wk(_,h){var m=pr(_,!1,h==="fixed");return m.top=m.top+_.clientTop,m.left=m.left+_.clientLeft,m.bottom=m.top+_.clientHeight,m.right=m.left+_.clientWidth,m.width=_.clientWidth,m.height=_.clientHeight,m.x=m.left,m.y=m.top,m}function OE(_,h,m){return h===ki?Nm(vk(_,m)):qr(h)?wk(h,m):Nm(Ek(Ws(_)))}function Tk(_){var h=Zl(Ns(_)),m=["absolute","fixed"].indexOf(os(_).position)>=0,E=m&&cn(_)?Di(_):_;return qr(E)?h.filter(function(P){return qr(P)&&Gl(P,E)&&Qt(P)!=="body"}):[]}function bk(_,h,m,E){var P=h==="clippingParents"?Tk(_):[].concat(h),j=[].concat(P,[m]),W=j[0],J=j.reduce(function(se,ve){var oe=OE(_,ve,E);return se.top=Hr(oe.top,se.top),se.right=Do(oe.right,se.right),se.bottom=Do(oe.bottom,se.bottom),se.left=Hr(oe.left,se.left),se},OE(_,W,E));return J.width=J.right-J.left,J.height=J.bottom-J.top,J.x=J.left,J.y=J.top,J}function xE(_){var h=_.reference,m=_.element,E=_.placement,P=E?qn(E):null,j=E?U(E):null,W=h.x+h.width/2-m.width/2,J=h.y+h.height/2-m.height/2,se;switch(P){case an:se={x:W,y:h.y-m.height};break;case Cn:se={x:W,y:h.y+h.height};break;case Gt:se={x:h.x+h.width,y:J};break;case yn:se={x:h.x-m.width,y:J};break;default:se={x:h.x,y:h.y}}var ve=P?oc(P):null;if(ve!=null){var oe=ve==="y"?"height":"width";switch(j){case Pn:se[ve]=se[ve]-(h[oe]/2-m[oe]/2);break;case Ni:se[ve]=se[ve]+(h[oe]/2-m[oe]/2);break}}return se}function ac(_,h){h===void 0&&(h={});var m=h,E=m.placement,P=E===void 0?_.placement:E,j=m.strategy,W=j===void 0?_.strategy:j,J=m.boundary,se=J===void 0?dd:J,ve=m.rootBoundary,oe=ve===void 0?ki:ve,Oe=m.elementContext,Me=Oe===void 0?Hs:Oe,Re=m.altBoundary,yt=Re===void 0?!1:Re,Fe=m.padding,tt=Fe===void 0?0:Fe,wt=Jl(typeof tt!="number"?tt:Wr(tt,Pi)),Bt=Me===Hs?$l:Hs,jt=_.rects.popper,qe=_.elements[yt?Bt:Me],ut=bk(qr(qe)?qe:qe.contextElement||Ws(_.elements.popper),se,oe,W),ht=pr(_.elements.reference),Ft=xE({reference:ht,element:jt,strategy:"absolute",placement:P}),vn=Nm(Object.assign({},jt,Ft)),un=Me===Hs?vn:ht,tn={top:ut.top-un.top+wt.top,bottom:un.bottom-ut.bottom+wt.bottom,left:ut.left-un.left+wt.left,right:un.right-ut.right+wt.right},kn=_.modifiersData.offset;if(Me===Hs&&kn){var zs=kn[P];Object.keys(tn).forEach(function(Wn){var Bo=[Gt,Cn].indexOf(Wn)>=0?1:-1,jo=[an,Cn].indexOf(Wn)>=0?"y":"x";tn[Wn]+=zs[jo]*Bo})}return tn}function Ik(_,h){h===void 0&&(h={});var m=h,E=m.placement,P=m.boundary,j=m.rootBoundary,W=m.padding,J=m.flipVariations,se=m.allowedAutoPlacements,ve=se===void 0?jr:se,oe=U(E),Oe=oe?J?Br:Br.filter(function(yt){return U(yt)===oe}):Pi,Me=Oe.filter(function(yt){return ve.indexOf(yt)>=0});Me.length===0&&(Me=Oe);var Re=Me.reduce(function(yt,Fe){return yt[Fe]=ac(_,{placement:Fe,boundary:P,rootBoundary:j,padding:W})[qn(Fe)],yt},{});return Object.keys(Re).sort(function(yt,Fe){return Re[yt]-Re[Fe]})}function Ak(_){if(qn(_)===ec)return[];var h=Kr(_);return[kE(_),h,kE(h)]}function Sk(_){var h=_.state,m=_.options,E=_.name;if(!h.modifiersData[E]._skip){for(var P=m.mainAxis,j=P===void 0?!0:P,W=m.altAxis,J=W===void 0?!0:W,se=m.fallbackPlacements,ve=m.padding,oe=m.boundary,Oe=m.rootBoundary,Me=m.altBoundary,Re=m.flipVariations,yt=Re===void 0?!0:Re,Fe=m.allowedAutoPlacements,tt=h.options.placement,wt=qn(tt),Bt=wt===tt,jt=se||(Bt||!yt?[Kr(tt)]:Ak(tt)),qe=[tt].concat(jt).reduce(function(uc,xi){return uc.concat(qn(xi)===ec?Ik(h,{placement:xi,boundary:oe,rootBoundary:Oe,padding:ve,flipVariations:yt,allowedAutoPlacements:Fe}):xi)},[]),ut=h.rects.reference,ht=h.rects.popper,Ft=new Map,vn=!0,un=qe[0],tn=0;tn<qe.length;tn++){var kn=qe[tn],zs=qn(kn),Wn=U(kn)===Pn,Bo=[an,Cn].indexOf(zs)>=0,jo=Bo?"width":"height",vs=ac(h,{placement:kn,boundary:oe,rootBoundary:Oe,altBoundary:Me,padding:ve}),Gs=Bo?Wn?Gt:yn:Wn?Cn:an;ut[jo]>ht[jo]&&(Gs=Kr(Gs));var Ad=Kr(Gs),qo=[];if(j&&qo.push(vs[zs]<=0),J&&qo.push(vs[Gs]<=0,vs[Ad]<=0),qo.every(function(uc){return uc})){un=kn,vn=!1;break}Ft.set(kn,qo)}if(vn)for(var Sd=yt?3:1,Hm=function(xi){var ru=qe.find(function(Cd){var Ho=Ft.get(Cd);if(Ho)return Ho.slice(0,xi).every(function(Wm){return Wm})});if(ru)return un=ru,"break"},su=Sd;su>0;su--){var Rd=Hm(su);if(Rd==="break")break}h.placement!==un&&(h.modifiersData[E]._skip=!0,h.placement=un,h.reset=!0)}}const LE={name:"flip",enabled:!0,phase:"main",fn:Sk,requiresIfExists:["offset"],data:{_skip:!1}};function VE(_,h,m){return m===void 0&&(m={x:0,y:0}),{top:_.top-h.height-m.y,right:_.right-h.width+m.x,bottom:_.bottom-h.height+m.y,left:_.left-h.width-m.x}}function ME(_){return[an,Gt,Cn,yn].some(function(h){return _[h]>=0})}function Rk(_){var h=_.state,m=_.name,E=h.rects.reference,P=h.rects.popper,j=h.modifiersData.preventOverflow,W=ac(h,{elementContext:"reference"}),J=ac(h,{altBoundary:!0}),se=VE(W,E),ve=VE(J,P,j),oe=ME(se),Oe=ME(ve);h.modifiersData[m]={referenceClippingOffsets:se,popperEscapeOffsets:ve,isReferenceHidden:oe,hasPopperEscaped:Oe},h.attributes.popper=Object.assign({},h.attributes.popper,{"data-popper-reference-hidden":oe,"data-popper-escaped":Oe})}const FE={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Rk};function Ck(_,h,m){var E=qn(_),P=[yn,an].indexOf(E)>=0?-1:1,j=typeof m=="function"?m(Object.assign({},h,{placement:_})):m,W=j[0],J=j[1];return W=W||0,J=(J||0)*P,[yn,Gt].indexOf(E)>=0?{x:J,y:W}:{x:W,y:J}}function Pk(_){var h=_.state,m=_.options,E=_.name,P=m.offset,j=P===void 0?[0,0]:P,W=jr.reduce(function(oe,Oe){return oe[Oe]=Ck(Oe,h.rects,j),oe},{}),J=W[h.placement],se=J.x,ve=J.y;h.modifiersData.popperOffsets!=null&&(h.modifiersData.popperOffsets.x+=se,h.modifiersData.popperOffsets.y+=ve),h.modifiersData[E]=W}const UE={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Pk};function Nk(_){var h=_.state,m=_.name;h.modifiersData[m]=xE({reference:h.rects.reference,element:h.rects.popper,strategy:"absolute",placement:h.placement})}const km={name:"popperOffsets",enabled:!0,phase:"read",fn:Nk,data:{}};function kk(_){return _==="x"?"y":"x"}function Dk(_){var h=_.state,m=_.options,E=_.name,P=m.mainAxis,j=P===void 0?!0:P,W=m.altAxis,J=W===void 0?!1:W,se=m.boundary,ve=m.rootBoundary,oe=m.altBoundary,Oe=m.padding,Me=m.tether,Re=Me===void 0?!0:Me,yt=m.tetherOffset,Fe=yt===void 0?0:yt,tt=ac(h,{boundary:se,rootBoundary:ve,padding:Oe,altBoundary:oe}),wt=qn(h.placement),Bt=U(h.placement),jt=!Bt,qe=oc(wt),ut=kk(qe),ht=h.modifiersData.popperOffsets,Ft=h.rects.reference,vn=h.rects.popper,un=typeof Fe=="function"?Fe(Object.assign({},h.rects,{placement:h.placement})):Fe,tn=typeof un=="number"?{mainAxis:un,altAxis:un}:Object.assign({mainAxis:0,altAxis:0},un),kn=h.modifiersData.offset?h.modifiersData.offset[h.placement]:null,zs={x:0,y:0};if(ht){if(j){var Wn,Bo=qe==="y"?an:yn,jo=qe==="y"?Cn:Gt,vs=qe==="y"?"height":"width",Gs=ht[qe],Ad=Gs+tt[Bo],qo=Gs-tt[jo],Sd=Re?-vn[vs]/2:0,Hm=Bt===Pn?Ft[vs]:vn[vs],su=Bt===Pn?-vn[vs]:-Ft[vs],Rd=h.elements.arrow,uc=Re&&Rd?Oo(Rd):{width:0,height:0},xi=h.modifiersData["arrow#persistent"]?h.modifiersData["arrow#persistent"].padding:Yl(),ru=xi[Bo],Cd=xi[jo],Ho=mr(0,Ft[vs],uc[vs]),Wm=jt?Ft[vs]/2-Sd-Ho-ru-tn.mainAxis:Hm-Ho-ru-tn.mainAxis,Ix=jt?-Ft[vs]/2+Sd+Ho+Cd+tn.mainAxis:su+Ho+Cd+tn.mainAxis,Km=h.elements.arrow&&Di(h.elements.arrow),Ax=Km?qe==="y"?Km.clientTop||0:Km.clientLeft||0:0,Rw=(Wn=kn==null?void 0:kn[qe])!=null?Wn:0,Sx=Gs+Wm-Rw-Ax,Rx=Gs+Ix-Rw,Cw=mr(Re?Do(Ad,Sx):Ad,Gs,Re?Hr(qo,Rx):qo);ht[qe]=Cw,zs[qe]=Cw-Gs}if(J){var Pw,Cx=qe==="x"?an:yn,Px=qe==="x"?Cn:Gt,Wo=ht[ut],Pd=ut==="y"?"height":"width",Nw=Wo+tt[Cx],kw=Wo-tt[Px],zm=[an,yn].indexOf(wt)!==-1,Dw=(Pw=kn==null?void 0:kn[ut])!=null?Pw:0,Ow=zm?Nw:Wo-Ft[Pd]-vn[Pd]-Dw+tn.altAxis,xw=zm?Wo+Ft[Pd]+vn[Pd]-Dw-tn.altAxis:kw,Lw=Re&&zm?Hn(Ow,Wo,xw):mr(Re?Ow:Nw,Wo,Re?xw:kw);ht[ut]=Lw,zs[ut]=Lw-Wo}h.modifiersData[E]=zs}}const $E={name:"preventOverflow",enabled:!0,phase:"main",fn:Dk,requiresIfExists:["offset"]};function Ok(_){return{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}}function xk(_){return _===Nn(_)||!cn(_)?Rm(_):Ok(_)}function Lk(_){var h=_.getBoundingClientRect(),m=Ps(h.width)/_.offsetWidth||1,E=Ps(h.height)/_.offsetHeight||1;return m!==1||E!==1}function Vk(_,h,m){m===void 0&&(m=!1);var E=cn(h),P=cn(h)&&Lk(h),j=Ws(h),W=pr(_,P,m),J={scrollLeft:0,scrollTop:0},se={x:0,y:0};return(E||!E&&!m)&&((Qt(h)!=="body"||Pm(j))&&(J=xk(h)),cn(h)?(se=pr(h,!0),se.x+=h.clientLeft,se.y+=h.clientTop):j&&(se.x=Cm(j))),{x:W.left+J.scrollLeft-se.x,y:W.top+J.scrollTop-se.y,width:W.width,height:W.height}}function Mk(_){var h=new Map,m=new Set,E=[];_.forEach(function(j){h.set(j.name,j)});function P(j){m.add(j.name);var W=[].concat(j.requires||[],j.requiresIfExists||[]);W.forEach(function(J){if(!m.has(J)){var se=h.get(J);se&&P(se)}}),E.push(j)}return _.forEach(function(j){m.has(j.name)||P(j)}),E}function Fk(_){var h=Mk(_);return Wl.reduce(function(m,E){return m.concat(h.filter(function(P){return P.phase===E}))},[])}function Uk(_){var h;return function(){return h||(h=new Promise(function(m){Promise.resolve().then(function(){h=void 0,m(_())})})),h}}function $k(_){var h=_.reduce(function(m,E){var P=m[E.name];return m[E.name]=P?Object.assign({},P,E,{options:Object.assign({},P.options,E.options),data:Object.assign({},P.data,E.data)}):E,m},{});return Object.keys(h).map(function(m){return h[m]})}var BE={placement:"bottom",modifiers:[],strategy:"absolute"};function jE(){for(var _=arguments.length,h=new Array(_),m=0;m<_;m++)h[m]=arguments[m];return!h.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function _d(_){_===void 0&&(_={});var h=_,m=h.defaultModifiers,E=m===void 0?[]:m,P=h.defaultOptions,j=P===void 0?BE:P;return function(J,se,ve){ve===void 0&&(ve=j);var oe={placement:"bottom",orderedModifiers:[],options:Object.assign({},BE,j),modifiersData:{},elements:{reference:J,popper:se},attributes:{},styles:{}},Oe=[],Me=!1,Re={state:oe,setOptions:function(wt){var Bt=typeof wt=="function"?wt(oe.options):wt;Fe(),oe.options=Object.assign({},j,oe.options,Bt),oe.scrollParents={reference:qr(J)?Zl(J):J.contextElement?Zl(J.contextElement):[],popper:Zl(se)};var jt=Fk($k([].concat(E,oe.options.modifiers)));return oe.orderedModifiers=jt.filter(function(qe){return qe.enabled}),yt(),Re.update()},forceUpdate:function(){if(!Me){var wt=oe.elements,Bt=wt.reference,jt=wt.popper;if(jE(Bt,jt)){oe.rects={reference:Vk(Bt,Di(jt),oe.options.strategy==="fixed"),popper:Oo(jt)},oe.reset=!1,oe.placement=oe.options.placement,oe.orderedModifiers.forEach(function(tn){return oe.modifiersData[tn.name]=Object.assign({},tn.data)});for(var qe=0;qe<oe.orderedModifiers.length;qe++){if(oe.reset===!0){oe.reset=!1,qe=-1;continue}var ut=oe.orderedModifiers[qe],ht=ut.fn,Ft=ut.options,vn=Ft===void 0?{}:Ft,un=ut.name;typeof ht=="function"&&(oe=ht({state:oe,options:vn,name:un,instance:Re})||oe)}}}},update:Uk(function(){return new Promise(function(tt){Re.forceUpdate(),tt(oe)})}),destroy:function(){Fe(),Me=!0}};if(!jE(J,se))return Re;Re.setOptions(ve).then(function(tt){!Me&&ve.onFirstUpdate&&ve.onFirstUpdate(tt)});function yt(){oe.orderedModifiers.forEach(function(tt){var wt=tt.name,Bt=tt.options,jt=Bt===void 0?{}:Bt,qe=tt.effect;if(typeof qe=="function"){var ut=qe({state:oe,name:wt,instance:Re,options:jt}),ht=function(){};Oe.push(ut||ht)}})}function Fe(){Oe.forEach(function(tt){return tt()}),Oe=[]}return Re}}var Bk=_d(),jk=[gr,km,je,rc],qk=_d({defaultModifiers:jk}),Hk=[gr,km,je,rc,UE,LE,$E,T,FE],Dm=_d({defaultModifiers:Hk});const qE=Object.freeze(Object.defineProperty({__proto__:null,afterMain:jl,afterRead:Et,afterWrite:ko,applyStyles:rc,arrow:T,auto:ec,basePlacements:Pi,beforeMain:fd,beforeRead:Bl,beforeWrite:ql,bottom:Cn,clippingParents:dd,computeStyles:je,createPopper:Dm,createPopperBase:Bk,createPopperLite:qk,detectOverflow:ac,end:Ni,eventListeners:gr,flip:LE,hide:FE,left:yn,main:pd,modifierPhases:Wl,offset:UE,placements:jr,popper:Hs,popperGenerator:_d,popperOffsets:km,preventOverflow:$E,read:tc,reference:$l,right:Gt,start:Pn,top:an,variationPlacements:Br,viewport:ki,write:Hl},Symbol.toStringTag,{value:"Module"})),HE="dropdown",xo=".bs.dropdown",Om=".data-api",Wk="Escape",WE="Tab",Kk="ArrowUp",KE="ArrowDown",zk=2,Gk=`hide${xo}`,Qk=`hidden${xo}`,Yk=`show${xo}`,Jk=`shown${xo}`,zE=`click${xo}${Om}`,GE=`keydown${xo}${Om}`,Xk=`keyup${xo}${Om}`,cc="show",Zk="dropup",eD="dropend",tD="dropstart",nD="dropup-center",sD="dropdown-center",Lo='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',rD=`${Lo}.${cc}`,yd=".dropdown-menu",iD=".navbar",oD=".navbar-nav",aD=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",cD=re()?"top-end":"top-start",lD=re()?"top-start":"top-end",uD=re()?"bottom-end":"bottom-start",hD=re()?"bottom-start":"bottom-end",dD=re()?"left-start":"right-start",fD=re()?"right-start":"left-start",pD="top",mD="bottom",gD={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},_D={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ks extends q{constructor(h,m){super(h,m),this._popper=null,this._parent=this._element.parentNode,this._menu=F.next(this._element,yd)[0]||F.prev(this._element,yd)[0]||F.findOne(yd,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return gD}static get DefaultType(){return _D}static get NAME(){return HE}toggle(){return this._isShown()?this.hide():this.show()}show(){if(I(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!$.trigger(this._element,Yk,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(oD))for(const E of[].concat(...document.body.children))$.on(E,"mouseover",O);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(cc),this._element.classList.add(cc),$.trigger(this._element,Jk,h)}}hide(){if(I(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!$.trigger(this._element,Gk,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const E of[].concat(...document.body.children))$.off(E,"mouseover",O);this._popper&&this._popper.destroy(),this._menu.classList.remove(cc),this._element.classList.remove(cc),this._element.setAttribute("aria-expanded","false"),$e.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,Qk,h)}}_getConfig(h){if(h=super._getConfig(h),typeof h.reference=="object"&&!g(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${HE.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(typeof qE>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;this._config.reference==="parent"?h=this._parent:g(this._config.reference)?h=v(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const m=this._getPopperConfig();this._popper=Dm(h,this._menu,m)}_isShown(){return this._menu.classList.contains(cc)}_getPlacement(){const h=this._parent;if(h.classList.contains(eD))return dD;if(h.classList.contains(tD))return fD;if(h.classList.contains(nD))return pD;if(h.classList.contains(sD))return mD;const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains(Zk)?m?lD:cD:m?hD:uD}_detectNavbar(){return this._element.closest(iD)!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(m=>Number.parseInt(m,10)):typeof h=="function"?m=>h(m,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&($e.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...A(this._config.popperConfig,[h])}}_selectMenuItem({key:h,target:m}){const E=F.find(aD,this._menu).filter(P=>w(P));E.length&&L(E,m,h===KE,!E.includes(m)).focus()}static jQueryInterface(h){return this.each(function(){const m=Ks.getOrCreateInstance(this,h);if(typeof h=="string"){if(typeof m[h]>"u")throw new TypeError(`No method named "${h}"`);m[h]()}})}static clearMenus(h){if(h.button===zk||h.type==="keyup"&&h.key!==WE)return;const m=F.find(rD);for(const E of m){const P=Ks.getInstance(E);if(!P||P._config.autoClose===!1)continue;const j=h.composedPath(),W=j.includes(P._menu);if(j.includes(P._element)||P._config.autoClose==="inside"&&!W||P._config.autoClose==="outside"&&W||P._menu.contains(h.target)&&(h.type==="keyup"&&h.key===WE||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const J={relatedTarget:P._element};h.type==="click"&&(J.clickEvent=h),P._completeHide(J)}}static dataApiKeydownHandler(h){const m=/input|textarea/i.test(h.target.tagName),E=h.key===Wk,P=[Kk,KE].includes(h.key);if(!P&&!E||m&&!E)return;h.preventDefault();const j=this.matches(Lo)?this:F.prev(this,Lo)[0]||F.next(this,Lo)[0]||F.findOne(Lo,h.delegateTarget.parentNode),W=Ks.getOrCreateInstance(j);if(P){h.stopPropagation(),W.show(),W._selectMenuItem(h);return}W._isShown()&&(h.stopPropagation(),W.hide(),j.focus())}}$.on(document,GE,Lo,Ks.dataApiKeydownHandler),$.on(document,GE,yd,Ks.dataApiKeydownHandler),$.on(document,zE,Ks.clearMenus),$.on(document,Xk,Ks.clearMenus),$.on(document,zE,Lo,function(_){_.preventDefault(),Ks.getOrCreateInstance(this).toggle()}),R(Ks);const QE="backdrop",yD="fade",YE="show",JE=`mousedown.bs.${QE}`,vD={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ED={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class XE extends S{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return vD}static get DefaultType(){return ED}static get NAME(){return QE}show(h){if(!this._config.isVisible){A(h);return}this._append();const m=this._getElement();this._config.isAnimated&&x(m),m.classList.add(YE),this._emulateAnimation(()=>{A(h)})}hide(h){if(!this._config.isVisible){A(h);return}this._getElement().classList.remove(YE),this._emulateAnimation(()=>{this.dispose(),A(h)})}dispose(){this._isAppended&&($.off(this._element,JE),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add(yD),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=v(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),$.on(h,JE,()=>{A(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){N(h,this._getElement(),this._config.isAnimated)}}const wD="focustrap",vd=".bs.focustrap",TD=`focusin${vd}`,bD=`keydown.tab${vd}`,ID="Tab",AD="forward",ZE="backward",SD={autofocus:!0,trapElement:null},RD={autofocus:"boolean",trapElement:"element"};class ew extends S{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return SD}static get DefaultType(){return RD}static get NAME(){return wD}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,vd),$.on(document,TD,h=>this._handleFocusin(h)),$.on(document,bD,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,vd))}_handleFocusin(h){const{trapElement:m}=this._config;if(h.target===document||h.target===m||m.contains(h.target))return;const E=F.focusableChildren(m);E.length===0?m.focus():this._lastTabNavDirection===ZE?E[E.length-1].focus():E[0].focus()}_handleKeydown(h){h.key===ID&&(this._lastTabNavDirection=h.shiftKey?ZE:AD)}}const tw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",nw=".sticky-top",Ed="padding-right",sw="margin-right";class xm{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ed,m=>m+h),this._setElementAttributes(tw,Ed,m=>m+h),this._setElementAttributes(nw,sw,m=>m-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ed),this._resetElementAttributes(tw,Ed),this._resetElementAttributes(nw,sw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,m,E){const P=this.getWidth(),j=W=>{if(W!==this._element&&window.innerWidth>W.clientWidth+P)return;this._saveInitialAttribute(W,m);const J=window.getComputedStyle(W).getPropertyValue(m);W.style.setProperty(m,`${E(Number.parseFloat(J))}px`)};this._applyManipulationCallback(h,j)}_saveInitialAttribute(h,m){const E=h.style.getPropertyValue(m);E&&$e.setDataAttribute(h,m,E)}_resetElementAttributes(h,m){const E=P=>{const j=$e.getDataAttribute(P,m);if(j===null){P.style.removeProperty(m);return}$e.removeDataAttribute(P,m),P.style.setProperty(m,j)};this._applyManipulationCallback(h,E)}_applyManipulationCallback(h,m){if(g(h)){m(h);return}for(const E of F.find(h,this._element))m(E)}}const CD="modal",ks=".bs.modal",PD=".data-api",ND="Escape",kD=`hide${ks}`,DD=`hidePrevented${ks}`,rw=`hidden${ks}`,iw=`show${ks}`,OD=`shown${ks}`,xD=`resize${ks}`,LD=`click.dismiss${ks}`,VD=`mousedown.dismiss${ks}`,MD=`keydown.dismiss${ks}`,FD=`click${ks}${PD}`,ow="modal-open",UD="fade",aw="show",Lm="modal-static",$D=".modal.show",BD=".modal-dialog",jD=".modal-body",qD='[data-bs-toggle="modal"]',HD={backdrop:!0,focus:!0,keyboard:!0},WD={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Vo extends q{constructor(h,m){super(h,m),this._dialog=F.findOne(BD,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new xm,this._addEventListeners()}static get Default(){return HD}static get DefaultType(){return WD}static get NAME(){return CD}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||$.trigger(this._element,iw,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ow),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){!this._isShown||this._isTransitioning||$.trigger(this._element,kD).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(aw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){$.off(window,ks),$.off(this._dialog,ks),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new XE({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ew({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=F.findOne(jD,this._dialog);m&&(m.scrollTop=0),x(this._element),this._element.classList.add(aw);const E=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,OD,{relatedTarget:h})};this._queueCallback(E,this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,MD,h=>{if(h.key===ND){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),$.on(window,xD,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,VD,h=>{$.one(this._element,LD,m=>{if(!(this._element!==h.target||this._element!==m.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ow),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,rw)})}_isAnimated(){return this._element.classList.contains(UD)}_triggerBackdropTransition(){if($.trigger(this._element,DD).defaultPrevented)return;const m=this._element.scrollHeight>document.documentElement.clientHeight,E=this._element.style.overflowY;E==="hidden"||this._element.classList.contains(Lm)||(m||(this._element.style.overflowY="hidden"),this._element.classList.add(Lm),this._queueCallback(()=>{this._element.classList.remove(Lm),this._queueCallback(()=>{this._element.style.overflowY=E},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),E=m>0;if(E&&!h){const P=re()?"paddingLeft":"paddingRight";this._element.style[P]=`${m}px`}if(!E&&h){const P=re()?"paddingRight":"paddingLeft";this._element.style[P]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,m){return this.each(function(){const E=Vo.getOrCreateInstance(this,h);if(typeof h=="string"){if(typeof E[h]>"u")throw new TypeError(`No method named "${h}"`);E[h](m)}})}}$.on(document,FD,qD,function(_){const h=F.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),$.one(h,iw,P=>{P.defaultPrevented||$.one(h,rw,()=>{w(this)&&this.focus()})});const m=F.findOne($D);m&&Vo.getInstance(m).hide(),Vo.getOrCreateInstance(h).toggle(this)}),te(Vo),R(Vo);const KD="offcanvas",zr=".bs.offcanvas",cw=".data-api",zD=`load${zr}${cw}`,GD="Escape",lw="show",uw="showing",hw="hiding",QD="offcanvas-backdrop",dw=".offcanvas.show",YD=`show${zr}`,JD=`shown${zr}`,XD=`hide${zr}`,fw=`hidePrevented${zr}`,pw=`hidden${zr}`,ZD=`resize${zr}`,eO=`click${zr}${cw}`,tO=`keydown.dismiss${zr}`,nO='[data-bs-toggle="offcanvas"]',sO={backdrop:!0,keyboard:!0,scroll:!1},rO={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Gr extends q{constructor(h,m){super(h,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return sO}static get DefaultType(){return rO}static get NAME(){return KD}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){if(this._isShown||$.trigger(this._element,YD,{relatedTarget:h}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new xm().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(uw);const E=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(lw),this._element.classList.remove(uw),$.trigger(this._element,JD,{relatedTarget:h})};this._queueCallback(E,this._element,!0)}hide(){if(!this._isShown||$.trigger(this._element,XD).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(hw),this._backdrop.hide();const m=()=>{this._element.classList.remove(lw,hw),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new xm().reset(),$.trigger(this._element,pw)};this._queueCallback(m,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=()=>{if(this._config.backdrop==="static"){$.trigger(this._element,fw);return}this.hide()},m=!!this._config.backdrop;return new XE({className:QD,isVisible:m,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:m?h:null})}_initializeFocusTrap(){return new ew({trapElement:this._element})}_addEventListeners(){$.on(this._element,tO,h=>{if(h.key===GD){if(this._config.keyboard){this.hide();return}$.trigger(this._element,fw)}})}static jQueryInterface(h){return this.each(function(){const m=Gr.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h](this)}})}}$.on(document,eO,nO,function(_){const h=F.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),I(this))return;$.one(h,pw,()=>{w(this)&&this.focus()});const m=F.findOne(dw);m&&m!==h&&Gr.getInstance(m).hide(),Gr.getOrCreateInstance(h).toggle(this)}),$.on(window,zD,()=>{for(const _ of F.find(dw))Gr.getOrCreateInstance(_).show()}),$.on(window,ZD,()=>{for(const _ of F.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&Gr.getOrCreateInstance(_).hide()}),te(Gr),R(Gr);const mw={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},iO=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),oO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,aO=(_,h)=>{const m=_.nodeName.toLowerCase();return h.includes(m)?iO.has(m)?!!oO.test(_.nodeValue):!0:h.filter(E=>E instanceof RegExp).some(E=>E.test(m))};function cO(_,h,m){if(!_.length)return _;if(m&&typeof m=="function")return m(_);const P=new window.DOMParser().parseFromString(_,"text/html"),j=[].concat(...P.body.querySelectorAll("*"));for(const W of j){const J=W.nodeName.toLowerCase();if(!Object.keys(h).includes(J)){W.remove();continue}const se=[].concat(...W.attributes),ve=[].concat(h["*"]||[],h[J]||[]);for(const oe of se)aO(oe,ve)||W.removeAttribute(oe.nodeName)}return P.body.innerHTML}const lO="TemplateFactory",uO={allowList:mw,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},hO={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},dO={entry:"(string|element|function|null)",selector:"(string|element)"};class fO extends S{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return uO}static get DefaultType(){return hO}static get NAME(){return lO}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[P,j]of Object.entries(this._config.content))this._setContent(h,j,P);const m=h.children[0],E=this._resolvePossibleFunction(this._config.extraClass);return E&&m.classList.add(...E.split(" ")),m}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[m,E]of Object.entries(h))super._typeCheckConfig({selector:m,entry:E},dO)}_setContent(h,m,E){const P=F.findOne(E,h);if(P){if(m=this._resolvePossibleFunction(m),!m){P.remove();return}if(g(m)){this._putElementInTemplate(v(m),P);return}if(this._config.html){P.innerHTML=this._maybeSanitize(m);return}P.textContent=m}}_maybeSanitize(h){return this._config.sanitize?cO(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return A(h,[this])}_putElementInTemplate(h,m){if(this._config.html){m.innerHTML="",m.append(h);return}m.textContent=h.textContent}}const pO="tooltip",mO=new Set(["sanitize","allowList","sanitizeFn"]),Vm="fade",gO="modal",wd="show",_O=".tooltip-inner",gw=`.${gO}`,_w="hide.bs.modal",eu="hover",Mm="focus",yO="click",vO="manual",EO="hide",wO="hidden",TO="show",bO="shown",IO="inserted",AO="click",SO="focusin",RO="focusout",CO="mouseenter",PO="mouseleave",NO={AUTO:"auto",TOP:"top",RIGHT:re()?"left":"right",BOTTOM:"bottom",LEFT:re()?"right":"left"},kO={allowList:mw,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DO={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Mo extends q{constructor(h,m){if(typeof qE>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return kO}static get DefaultType(){return DO}static get NAME(){return pO}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(gw),_w,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const h=$.trigger(this._element,this.constructor.eventName(TO)),E=(b(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!E)return;this._disposePopper();const P=this._getTipElement();this._element.setAttribute("aria-describedby",P.getAttribute("id"));const{container:j}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(j.append(P),$.trigger(this._element,this.constructor.eventName(IO))),this._popper=this._createPopper(P),P.classList.add(wd),"ontouchstart"in document.documentElement)for(const J of[].concat(...document.body.children))$.on(J,"mouseover",O);const W=()=>{$.trigger(this._element,this.constructor.eventName(bO)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(W,this.tip,this._isAnimated())}hide(){if(!this._isShown()||$.trigger(this._element,this.constructor.eventName(EO)).defaultPrevented)return;if(this._getTipElement().classList.remove(wd),"ontouchstart"in document.documentElement)for(const P of[].concat(...document.body.children))$.off(P,"mouseover",O);this._activeTrigger[yO]=!1,this._activeTrigger[Mm]=!1,this._activeTrigger[eu]=!1,this._isHovered=null;const E=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName(wO)))};this._queueCallback(E,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const m=this._getTemplateFactory(h).toHtml();if(!m)return null;m.classList.remove(Vm,wd),m.classList.add(`bs-${this.constructor.NAME}-auto`);const E=u(this.constructor.NAME).toString();return m.setAttribute("id",E),this._isAnimated()&&m.classList.add(Vm),m}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new fO({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[_O]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vm)}_isShown(){return this.tip&&this.tip.classList.contains(wd)}_createPopper(h){const m=A(this._config.placement,[this,h,this._element]),E=NO[m.toUpperCase()];return Dm(this._element,h,this._getPopperConfig(E))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(m=>Number.parseInt(m,10)):typeof h=="function"?m=>h(m,this._element):h}_resolvePossibleFunction(h){return A(h,[this._element])}_getPopperConfig(h){const m={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:E=>{this._getTipElement().setAttribute("data-popper-placement",E.state.placement)}}]};return{...m,...A(this._config.popperConfig,[m])}}_setListeners(){const h=this._config.trigger.split(" ");for(const m of h)if(m==="click")$.on(this._element,this.constructor.eventName(AO),this._config.selector,E=>{this._initializeOnDelegatedTarget(E).toggle()});else if(m!==vO){const E=m===eu?this.constructor.eventName(CO):this.constructor.eventName(SO),P=m===eu?this.constructor.eventName(PO):this.constructor.eventName(RO);$.on(this._element,E,this._config.selector,j=>{const W=this._initializeOnDelegatedTarget(j);W._activeTrigger[j.type==="focusin"?Mm:eu]=!0,W._enter()}),$.on(this._element,P,this._config.selector,j=>{const W=this._initializeOnDelegatedTarget(j);W._activeTrigger[j.type==="focusout"?Mm:eu]=W._element.contains(j.relatedTarget),W._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(gw),_w,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,m){clearTimeout(this._timeout),this._timeout=setTimeout(h,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const m=$e.getDataAttributes(this._element);for(const E of Object.keys(m))mO.has(E)&&delete m[E];return h={...m,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:v(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[m,E]of Object.entries(this._config))this.constructor.Default[m]!==E&&(h[m]=E);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const m=Mo.getOrCreateInstance(this,h);if(typeof h=="string"){if(typeof m[h]>"u")throw new TypeError(`No method named "${h}"`);m[h]()}})}}R(Mo);const OO="popover",xO=".popover-header",LO=".popover-body",VO={...Mo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},MO={...Mo.DefaultType,content:"(null|string|element|function)"};class Td extends Mo{static get Default(){return VO}static get DefaultType(){return MO}static get NAME(){return OO}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[xO]:this._getTitle(),[LO]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const m=Td.getOrCreateInstance(this,h);if(typeof h=="string"){if(typeof m[h]>"u")throw new TypeError(`No method named "${h}"`);m[h]()}})}}R(Td);const FO="scrollspy",Fm=".bs.scrollspy",UO=".data-api",$O=`activate${Fm}`,yw=`click${Fm}`,BO=`load${Fm}${UO}`,jO="dropdown-item",lc="active",qO='[data-bs-spy="scroll"]',Um="[href]",HO=".nav, .list-group",vw=".nav-link",WO=`${vw}, .nav-item > ${vw}, .list-group-item`,KO=".dropdown",zO=".dropdown-toggle",GO={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},QO={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class tu extends q{constructor(h,m){super(h,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return GO}static get DefaultType(){return QO}static get NAME(){return FO}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=v(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(m=>Number.parseFloat(m))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,yw),$.on(this._config.target,yw,Um,h=>{const m=this._observableSections.get(h.target.hash);if(m){h.preventDefault();const E=this._rootElement||window,P=m.offsetTop-this._element.offsetTop;if(E.scrollTo){E.scrollTo({top:P,behavior:"smooth"});return}E.scrollTop=P}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),h)}_observerCallback(h){const m=W=>this._targetLinks.get(`#${W.target.id}`),E=W=>{this._previousScrollData.visibleEntryTop=W.target.offsetTop,this._process(m(W))},P=(this._rootElement||document.documentElement).scrollTop,j=P>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=P;for(const W of h){if(!W.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(W));continue}const J=W.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(j&&J){if(E(W),!P)return;continue}!j&&!J&&E(W)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=F.find(Um,this._config.target);for(const m of h){if(!m.hash||I(m))continue;const E=F.findOne(decodeURI(m.hash),this._element);w(E)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,E))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(lc),this._activateParents(h),$.trigger(this._element,$O,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains(jO)){F.findOne(zO,h.closest(KO)).classList.add(lc);return}for(const m of F.parents(h,HO))for(const E of F.prev(m,WO))E.classList.add(lc)}_clearActiveClass(h){h.classList.remove(lc);const m=F.find(`${Um}.${lc}`,h);for(const E of m)E.classList.remove(lc)}static jQueryInterface(h){return this.each(function(){const m=tu.getOrCreateInstance(this,h);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}})}}$.on(window,BO,()=>{for(const _ of F.find(qO))tu.getOrCreateInstance(_)}),R(tu);const YO="tab",Fo=".bs.tab",JO=`hide${Fo}`,XO=`hidden${Fo}`,ZO=`show${Fo}`,ex=`shown${Fo}`,tx=`click${Fo}`,nx=`keydown${Fo}`,sx=`load${Fo}`,rx="ArrowLeft",Ew="ArrowRight",ix="ArrowUp",ww="ArrowDown",$m="Home",Tw="End",Uo="active",bw="fade",Bm="show",ox="dropdown",Iw=".dropdown-toggle",ax=".dropdown-menu",jm=`:not(${Iw})`,cx='.list-group, .nav, [role="tablist"]',lx=".nav-item, .list-group-item",ux=`.nav-link${jm}, .list-group-item${jm}, [role="tab"]${jm}`,Aw='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',qm=`${ux}, ${Aw}`,hx=`.${Uo}[data-bs-toggle="tab"], .${Uo}[data-bs-toggle="pill"], .${Uo}[data-bs-toggle="list"]`;class $o extends q{constructor(h){super(h),this._parent=this._element.closest(cx),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,nx,m=>this._keydown(m)))}static get NAME(){return YO}show(){const h=this._element;if(this._elemIsActive(h))return;const m=this._getActiveElem(),E=m?$.trigger(m,JO,{relatedTarget:h}):null;$.trigger(h,ZO,{relatedTarget:m}).defaultPrevented||E&&E.defaultPrevented||(this._deactivate(m,h),this._activate(h,m))}_activate(h,m){if(!h)return;h.classList.add(Uo),this._activate(F.getElementFromSelector(h));const E=()=>{if(h.getAttribute("role")!=="tab"){h.classList.add(Bm);return}h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),$.trigger(h,ex,{relatedTarget:m})};this._queueCallback(E,h,h.classList.contains(bw))}_deactivate(h,m){if(!h)return;h.classList.remove(Uo),h.blur(),this._deactivate(F.getElementFromSelector(h));const E=()=>{if(h.getAttribute("role")!=="tab"){h.classList.remove(Bm);return}h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),$.trigger(h,XO,{relatedTarget:m})};this._queueCallback(E,h,h.classList.contains(bw))}_keydown(h){if(![rx,Ew,ix,ww,$m,Tw].includes(h.key))return;h.stopPropagation(),h.preventDefault();const m=this._getChildren().filter(P=>!I(P));let E;if([$m,Tw].includes(h.key))E=m[h.key===$m?0:m.length-1];else{const P=[Ew,ww].includes(h.key);E=L(m,h.target,P,!0)}E&&(E.focus({preventScroll:!0}),$o.getOrCreateInstance(E).show())}_getChildren(){return F.find(qm,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,m){this._setAttributeIfNotExists(h,"role","tablist");for(const E of m)this._setInitialAttributesOnChild(E)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const m=this._elemIsActive(h),E=this._getOuterElement(h);h.setAttribute("aria-selected",m),E!==h&&this._setAttributeIfNotExists(E,"role","presentation"),m||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const m=F.getElementFromSelector(h);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,m){const E=this._getOuterElement(h);if(!E.classList.contains(ox))return;const P=(j,W)=>{const J=F.findOne(j,E);J&&J.classList.toggle(W,m)};P(Iw,Uo),P(ax,Bm),E.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(h,m,E){h.hasAttribute(m)||h.setAttribute(m,E)}_elemIsActive(h){return h.classList.contains(Uo)}_getInnerElement(h){return h.matches(qm)?h:F.findOne(qm,h)}_getOuterElement(h){return h.closest(lx)||h}static jQueryInterface(h){return this.each(function(){const m=$o.getOrCreateInstance(this);if(typeof h=="string"){if(m[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);m[h]()}})}}$.on(document,tx,Aw,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),!I(this)&&$o.getOrCreateInstance(this).show()}),$.on(window,sx,()=>{for(const _ of F.find(hx))$o.getOrCreateInstance(_)}),R($o);const dx="toast",Oi=".bs.toast",fx=`mouseover${Oi}`,px=`mouseout${Oi}`,mx=`focusin${Oi}`,gx=`focusout${Oi}`,_x=`hide${Oi}`,yx=`hidden${Oi}`,vx=`show${Oi}`,Ex=`shown${Oi}`,wx="fade",Sw="hide",bd="show",Id="showing",Tx={animation:"boolean",autohide:"boolean",delay:"number"},bx={animation:!0,autohide:!0,delay:5e3};class nu extends q{constructor(h,m){super(h,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return bx}static get DefaultType(){return Tx}static get NAME(){return dx}show(){if($.trigger(this._element,vx).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(wx);const m=()=>{this._element.classList.remove(Id),$.trigger(this._element,Ex),this._maybeScheduleHide()};this._element.classList.remove(Sw),x(this._element),this._element.classList.add(bd,Id),this._queueCallback(m,this._element,this._config.animation)}hide(){if(!this.isShown()||$.trigger(this._element,_x).defaultPrevented)return;const m=()=>{this._element.classList.add(Sw),this._element.classList.remove(Id,bd),$.trigger(this._element,yx)};this._element.classList.add(Id),this._queueCallback(m,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(bd),super.dispose()}isShown(){return this._element.classList.contains(bd)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,m){switch(h.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=m;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=m;break}}if(m){this._clearTimeout();return}const E=h.relatedTarget;this._element===E||this._element.contains(E)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,fx,h=>this._onInteraction(h,!0)),$.on(this._element,px,h=>this._onInteraction(h,!1)),$.on(this._element,mx,h=>this._onInteraction(h,!0)),$.on(this._element,gx,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const m=nu.getOrCreateInstance(this,h);if(typeof h=="string"){if(typeof m[h]>"u")throw new TypeError(`No method named "${h}"`);m[h](this)}})}}return te(nu),R(nu),{Alert:ge,Button:rs,Carousel:Ri,Collapse:$r,Dropdown:Ks,Modal:Vo,Offcanvas:Gr,Popover:Td,ScrollSpy:tu,Tab:$o,Toast:nu,Tooltip:Mo}})})(rM);function KS(n,e){return function(){return n.apply(e,arguments)}}const{toString:iM}=Object.prototype,{getPrototypeOf:Ey}=Object,Tp=(n=>e=>{const t=iM.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ar=n=>(n=n.toLowerCase(),e=>Tp(e)===n),bp=n=>e=>typeof e===n,{isArray:hl}=Array,Xu=bp("undefined");function oM(n){return n!==null&&!Xu(n)&&n.constructor!==null&&!Xu(n.constructor)&&Is(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const zS=ar("ArrayBuffer");function aM(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&zS(n.buffer),e}const cM=bp("string"),Is=bp("function"),GS=bp("number"),Ip=n=>n!==null&&typeof n=="object",lM=n=>n===!0||n===!1,ef=n=>{if(Tp(n)!=="object")return!1;const e=Ey(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},uM=ar("Date"),hM=ar("File"),dM=ar("Blob"),fM=ar("FileList"),pM=n=>Ip(n)&&Is(n.pipe),mM=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Is(n.append)&&((e=Tp(n))==="formdata"||e==="object"&&Is(n.toString)&&n.toString()==="[object FormData]"))},gM=ar("URLSearchParams"),[_M,yM,vM,EM]=["ReadableStream","Request","Response","Headers"].map(ar),wM=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sh(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,r;if(typeof n!="object"&&(n=[n]),hl(n))for(s=0,r=n.length;s<r;s++)e.call(null,n[s],s,n);else{const i=t?Object.getOwnPropertyNames(n):Object.keys(n),o=i.length;let a;for(s=0;s<o;s++)a=i[s],e.call(null,n[a],a,n)}}function QS(n,e){e=e.toLowerCase();const t=Object.keys(n);let s=t.length,r;for(;s-- >0;)if(r=t[s],e===r.toLowerCase())return r;return null}const oa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,YS=n=>!Xu(n)&&n!==oa;function Qg(){const{caseless:n}=YS(this)&&this||{},e={},t=(s,r)=>{const i=n&&QS(e,r)||r;ef(e[i])&&ef(s)?e[i]=Qg(e[i],s):ef(s)?e[i]=Qg({},s):hl(s)?e[i]=s.slice():e[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Sh(arguments[s],t);return e}const TM=(n,e,t,{allOwnKeys:s}={})=>(Sh(e,(r,i)=>{t&&Is(r)?n[i]=KS(r,t):n[i]=r},{allOwnKeys:s}),n),bM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),IM=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},AM=(n,e,t,s)=>{let r,i,o;const a={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),i=r.length;i-- >0;)o=r[i],(!s||s(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&Ey(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},SM=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},RM=n=>{if(!n)return null;if(hl(n))return n;let e=n.length;if(!GS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},CM=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Ey(Uint8Array)),PM=(n,e)=>{const s=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(n,i[0],i[1])}},NM=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},kM=ar("HTMLFormElement"),DM=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,r){return s.toUpperCase()+r}),gT=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),OM=ar("RegExp"),JS=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};Sh(t,(r,i)=>{let o;(o=e(r,i,n))!==!1&&(s[i]=o||r)}),Object.defineProperties(n,s)},xM=n=>{JS(n,(e,t)=>{if(Is(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(Is(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},LM=(n,e)=>{const t={},s=r=>{r.forEach(i=>{t[i]=!0})};return hl(n)?s(n):s(String(n).split(e)),t},VM=()=>{},MM=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,rg="abcdefghijklmnopqrstuvwxyz",_T="0123456789",XS={DIGIT:_T,ALPHA:rg,ALPHA_DIGIT:rg+rg.toUpperCase()+_T},FM=(n=16,e=XS.ALPHA_DIGIT)=>{let t="";const{length:s}=e;for(;n--;)t+=e[Math.random()*s|0];return t};function UM(n){return!!(n&&Is(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const $M=n=>{const e=new Array(10),t=(s,r)=>{if(Ip(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const i=hl(s)?[]:{};return Sh(s,(o,a)=>{const c=t(o,r+1);!Xu(c)&&(i[a]=c)}),e[r]=void 0,i}}return s};return t(n,0)},BM=ar("AsyncFunction"),jM=n=>n&&(Ip(n)||Is(n))&&Is(n.then)&&Is(n.catch),ZS=((n,e)=>n?setImmediate:e?((t,s)=>(oa.addEventListener("message",({source:r,data:i})=>{r===oa&&i===t&&s.length&&s.shift()()},!1),r=>{s.push(r),oa.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Is(oa.postMessage)),qM=typeof queueMicrotask<"u"?queueMicrotask.bind(oa):typeof process<"u"&&process.nextTick||ZS,Q={isArray:hl,isArrayBuffer:zS,isBuffer:oM,isFormData:mM,isArrayBufferView:aM,isString:cM,isNumber:GS,isBoolean:lM,isObject:Ip,isPlainObject:ef,isReadableStream:_M,isRequest:yM,isResponse:vM,isHeaders:EM,isUndefined:Xu,isDate:uM,isFile:hM,isBlob:dM,isRegExp:OM,isFunction:Is,isStream:pM,isURLSearchParams:gM,isTypedArray:CM,isFileList:fM,forEach:Sh,merge:Qg,extend:TM,trim:wM,stripBOM:bM,inherits:IM,toFlatObject:AM,kindOf:Tp,kindOfTest:ar,endsWith:SM,toArray:RM,forEachEntry:PM,matchAll:NM,isHTMLForm:kM,hasOwnProperty:gT,hasOwnProp:gT,reduceDescriptors:JS,freezeMethods:xM,toObjectSet:LM,toCamelCase:DM,noop:VM,toFiniteNumber:MM,findKey:QS,global:oa,isContextDefined:YS,ALPHABET:XS,generateString:FM,isSpecCompliantForm:UM,toJSONObject:$M,isAsyncFn:BM,isThenable:jM,setImmediate:ZS,asap:qM};function ke(n,e,t,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}Q.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const e0=ke.prototype,t0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{t0[n]={value:n}});Object.defineProperties(ke,t0);Object.defineProperty(e0,"isAxiosError",{value:!0});ke.from=(n,e,t,s,r,i)=>{const o=Object.create(e0);return Q.toFlatObject(n,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),ke.call(o,n.message,e,t,s,r),o.cause=n,o.name=n.name,i&&Object.assign(o,i),o};const HM=null;function Yg(n){return Q.isPlainObject(n)||Q.isArray(n)}function n0(n){return Q.endsWith(n,"[]")?n.slice(0,-2):n}function yT(n,e,t){return n?n.concat(e).map(function(r,i){return r=n0(r),!t&&i?"["+r+"]":r}).join(t?".":""):e}function WM(n){return Q.isArray(n)&&!n.some(Yg)}const KM=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function Ap(n,e,t){if(!Q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,b){return!Q.isUndefined(b[I])});const s=t.metaTokens,r=t.visitor||d,i=t.dots,o=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(r))throw new TypeError("visitor must be a function");function u(w){if(w===null)return"";if(Q.isDate(w))return w.toISOString();if(!c&&Q.isBlob(w))throw new ke("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(w)||Q.isTypedArray(w)?c&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function d(w,I,b){let O=w;if(w&&!b&&typeof w=="object"){if(Q.endsWith(I,"{}"))I=s?I:I.slice(0,-2),w=JSON.stringify(w);else if(Q.isArray(w)&&WM(w)||(Q.isFileList(w)||Q.endsWith(I,"[]"))&&(O=Q.toArray(w)))return I=n0(I),O.forEach(function(M,K){!(Q.isUndefined(M)||M===null)&&e.append(o===!0?yT([I],K,i):o===null?I:I+"[]",u(M))}),!1}return Yg(w)?!0:(e.append(yT(b,I,i),u(w)),!1)}const f=[],g=Object.assign(KM,{defaultVisitor:d,convertValue:u,isVisitable:Yg});function v(w,I){if(!Q.isUndefined(w)){if(f.indexOf(w)!==-1)throw Error("Circular reference detected in "+I.join("."));f.push(w),Q.forEach(w,function(O,x){(!(Q.isUndefined(O)||O===null)&&r.call(e,O,Q.isString(x)?x.trim():x,I,g))===!0&&v(O,I?I.concat(x):[x])}),f.pop()}}if(!Q.isObject(n))throw new TypeError("data must be an object");return v(n),e}function vT(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function wy(n,e){this._pairs=[],n&&Ap(n,this,e)}const s0=wy.prototype;s0.append=function(e,t){this._pairs.push([e,t])};s0.toString=function(e){const t=e?function(s){return e.call(this,s,vT)}:vT;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function zM(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function r0(n,e,t){if(!e)return n;const s=t&&t.encode||zM,r=t&&t.serialize;let i;if(r?i=r(e,t):i=Q.isURLSearchParams(e)?e.toString():new wy(e,t).toString(s),i){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class ET{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(s){s!==null&&e(s)})}}const i0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GM=typeof URLSearchParams<"u"?URLSearchParams:wy,QM=typeof FormData<"u"?FormData:null,YM=typeof Blob<"u"?Blob:null,JM={isBrowser:!0,classes:{URLSearchParams:GM,FormData:QM,Blob:YM},protocols:["http","https","file","blob","url","data"]},Ty=typeof window<"u"&&typeof document<"u",Jg=typeof navigator=="object"&&navigator||void 0,XM=Ty&&(!Jg||["ReactNative","NativeScript","NS"].indexOf(Jg.product)<0),ZM=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eF=Ty&&window.location.href||"http://localhost",tF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ty,hasStandardBrowserEnv:XM,hasStandardBrowserWebWorkerEnv:ZM,navigator:Jg,origin:eF},Symbol.toStringTag,{value:"Module"})),ds={...tF,...JM};function nF(n,e){return Ap(n,new ds.classes.URLSearchParams,Object.assign({visitor:function(t,s,r,i){return ds.isNode&&Q.isBuffer(t)?(this.append(s,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function sF(n){return Q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rF(n){const e={},t=Object.keys(n);let s;const r=t.length;let i;for(s=0;s<r;s++)i=t[s],e[i]=n[i];return e}function o0(n){function e(t,s,r,i){let o=t[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=t.length;return o=!o&&Q.isArray(r)?r.length:o,c?(Q.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!a):((!r[o]||!Q.isObject(r[o]))&&(r[o]=[]),e(t,s,r[o],i)&&Q.isArray(r[o])&&(r[o]=rF(r[o])),!a)}if(Q.isFormData(n)&&Q.isFunction(n.entries)){const t={};return Q.forEachEntry(n,(s,r)=>{e(sF(s),r,t,0)}),t}return null}function iF(n,e,t){if(Q.isString(n))try{return(e||JSON.parse)(n),Q.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(0,JSON.stringify)(n)}const Rh={transitional:i0,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,i=Q.isObject(e);if(i&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return r?JSON.stringify(o0(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return nF(e,this.formSerializer).toString();if((a=Q.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Ap(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),iF(e)):e}],transformResponse:[function(e){const t=this.transitional||Rh.transitional,s=t&&t.forcedJSONParsing,r=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(s&&!this.responseType||r)){const o=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ke.from(a,ke.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ds.classes.FormData,Blob:ds.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],n=>{Rh.headers[n]={}});const oF=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aF=n=>{const e={};let t,s,r;return n&&n.split(`
`).forEach(function(o){r=o.indexOf(":"),t=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!t||e[t]&&oF[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},wT=Symbol("internals");function cu(n){return n&&String(n).trim().toLowerCase()}function tf(n){return n===!1||n==null?n:Q.isArray(n)?n.map(tf):String(n)}function cF(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const lF=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ig(n,e,t,s,r){if(Q.isFunction(s))return s.call(this,e,t);if(r&&(e=t),!!Q.isString(e)){if(Q.isString(s))return e.indexOf(s)!==-1;if(Q.isRegExp(s))return s.test(e)}}function uF(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function hF(n,e){const t=Q.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}class fs{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function i(a,c,u){const d=cu(c);if(!d)throw new Error("header name must be a non-empty string");const f=Q.findKey(r,d);(!f||r[f]===void 0||u===!0||u===void 0&&r[f]!==!1)&&(r[f||c]=tf(a))}const o=(a,c)=>Q.forEach(a,(u,d)=>i(u,d,c));if(Q.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Q.isString(e)&&(e=e.trim())&&!lF(e))o(aF(e),t);else if(Q.isHeaders(e))for(const[a,c]of e.entries())i(c,a,s);else e!=null&&i(t,e,s);return this}get(e,t){if(e=cu(e),e){const s=Q.findKey(this,e);if(s){const r=this[s];if(!t)return r;if(t===!0)return cF(r);if(Q.isFunction(t))return t.call(this,r,s);if(Q.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=cu(e),e){const s=Q.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||ig(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let r=!1;function i(o){if(o=cu(o),o){const a=Q.findKey(s,o);a&&(!t||ig(s,s[a],a,t))&&(delete s[a],r=!0)}}return Q.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const i=t[s];(!e||ig(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const t=this,s={};return Q.forEach(this,(r,i)=>{const o=Q.findKey(s,i);if(o){t[o]=tf(r),delete t[i];return}const a=e?uF(i):String(i).trim();a!==i&&delete t[i],t[a]=tf(r),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Q.forEach(this,(s,r)=>{s!=null&&s!==!1&&(t[r]=e&&Q.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[wT]=this[wT]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=cu(o);s[a]||(hF(r,o),s[a]=!0)}return Q.isArray(e)?e.forEach(i):i(e),this}}fs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(fs.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});Q.freezeMethods(fs);function og(n,e){const t=this||Rh,s=e||t,r=fs.from(s.headers);let i=s.data;return Q.forEach(n,function(a){i=a.call(t,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function a0(n){return!!(n&&n.__CANCEL__)}function dl(n,e,t){ke.call(this,n??"canceled",ke.ERR_CANCELED,e,t),this.name="CanceledError"}Q.inherits(dl,ke,{__CANCEL__:!0});function c0(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new ke("Request failed with status code "+t.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function dF(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function fF(n,e){n=n||10;const t=new Array(n),s=new Array(n);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=s[i];o||(o=u),t[r]=c,s[r]=u;let f=i,g=0;for(;f!==r;)g+=t[f++],f=f%n;if(r=(r+1)%n,r===i&&(i=(i+1)%n),u-o<e)return;const v=d&&u-d;return v?Math.round(g*1e3/v):void 0}}function pF(n,e){let t=0,s=1e3/e,r,i;const o=(u,d=Date.now())=>{t=d,r=null,i&&(clearTimeout(i),i=null),n.apply(null,u)};return[(...u)=>{const d=Date.now(),f=d-t;f>=s?o(u,d):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const If=(n,e,t=3)=>{let s=0;const r=fF(50,250);return pF(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),d=o<=a;s=o;const f={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(f)},t)},TT=(n,e)=>{const t=n!=null;return[s=>e[0]({lengthComputable:t,total:n,loaded:s}),e[1]]},bT=n=>(...e)=>Q.asap(()=>n(...e)),mF=ds.hasStandardBrowserEnv?function(){const e=ds.navigator&&/(msie|trident)/i.test(ds.navigator.userAgent),t=document.createElement("a");let s;function r(i){let o=i;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return s=r(window.location.href),function(o){const a=Q.isString(o)?r(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}(),gF=ds.hasStandardBrowserEnv?{write(n,e,t,s,r,i){const o=[n+"="+encodeURIComponent(e)];Q.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),Q.isString(s)&&o.push("path="+s),Q.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _F(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function yF(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function l0(n,e){return n&&!_F(e)?yF(n,e):e}const IT=n=>n instanceof fs?{...n}:n;function va(n,e){e=e||{};const t={};function s(u,d,f){return Q.isPlainObject(u)&&Q.isPlainObject(d)?Q.merge.call({caseless:f},u,d):Q.isPlainObject(d)?Q.merge({},d):Q.isArray(d)?d.slice():d}function r(u,d,f){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return s(void 0,u,f)}else return s(u,d,f)}function i(u,d){if(!Q.isUndefined(d))return s(void 0,d)}function o(u,d){if(Q.isUndefined(d)){if(!Q.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function a(u,d,f){if(f in e)return s(u,d);if(f in n)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d)=>r(IT(u),IT(d),!0)};return Q.forEach(Object.keys(Object.assign({},n,e)),function(d){const f=c[d]||r,g=f(n[d],e[d],d);Q.isUndefined(g)&&f!==a||(t[d]=g)}),t}const u0=n=>{const e=va({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=fs.from(o),e.url=r0(l0(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(Q.isFormData(t)){if(ds.hasStandardBrowserEnv||ds.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...d]=c?c.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(ds.hasStandardBrowserEnv&&(s&&Q.isFunction(s)&&(s=s(e)),s||s!==!1&&mF(e.url))){const u=r&&i&&gF.read(i);u&&o.set(r,u)}return e},vF=typeof XMLHttpRequest<"u",EF=vF&&function(n){return new Promise(function(t,s){const r=u0(n);let i=r.data;const o=fs.from(r.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=r,d,f,g,v,w;function I(){v&&v(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function O(){if(!b)return;const M=fs.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),ie={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:M,config:n,request:b};c0(function(R){t(R),I()},function(R){s(R),I()},ie),b=null}"onloadend"in b?b.onloadend=O:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(O)},b.onabort=function(){b&&(s(new ke("Request aborted",ke.ECONNABORTED,n,b)),b=null)},b.onerror=function(){s(new ke("Network Error",ke.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let K=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const ie=r.transitional||i0;r.timeoutErrorMessage&&(K=r.timeoutErrorMessage),s(new ke(K,ie.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,n,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&Q.forEach(o.toJSON(),function(K,ie){b.setRequestHeader(ie,K)}),Q.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),a&&a!=="json"&&(b.responseType=r.responseType),u&&([g,w]=If(u,!0),b.addEventListener("progress",g)),c&&b.upload&&([f,v]=If(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",v)),(r.cancelToken||r.signal)&&(d=M=>{b&&(s(!M||M.type?new dl(null,n,b):M),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const x=dF(r.url);if(x&&ds.protocols.indexOf(x)===-1){s(new ke("Unsupported protocol "+x+":",ke.ERR_BAD_REQUEST,n));return}b.send(i||null)})},wF=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let s=new AbortController,r;const i=function(u){if(!r){r=!0,a();const d=u instanceof Error?u:this.reason;s.abort(d instanceof ke?d:new dl(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new ke(`timeout ${e} of ms exceeded`,ke.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),n=null)};n.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>Q.asap(a),c}},TF=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let s=0,r;for(;s<t;)r=s+e,yield n.slice(s,r),s=r},bF=async function*(n,e){for await(const t of IF(n))yield*TF(t,e)},IF=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},AT=(n,e,t,s)=>{const r=bF(n,e);let i=0,o,a=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await r.next();if(u){a(),c.close();return}let f=d.byteLength;if(t){let g=i+=f;t(g)}c.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(c){return a(c),r.return()}},{highWaterMark:2})},Sp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",h0=Sp&&typeof ReadableStream=="function",AF=Sp&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),d0=(n,...e)=>{try{return!!n(...e)}catch{return!1}},SF=h0&&d0(()=>{let n=!1;const e=new Request(ds.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),ST=64*1024,Xg=h0&&d0(()=>Q.isReadableStream(new Response("").body)),Af={stream:Xg&&(n=>n.body)};Sp&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Af[e]&&(Af[e]=Q.isFunction(n[e])?t=>t[e]():(t,s)=>{throw new ke(`Response type '${e}' is not supported`,ke.ERR_NOT_SUPPORT,s)})})})(new Response);const RF=async n=>{if(n==null)return 0;if(Q.isBlob(n))return n.size;if(Q.isSpecCompliantForm(n))return(await new Request(ds.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(n)||Q.isArrayBuffer(n))return n.byteLength;if(Q.isURLSearchParams(n)&&(n=n+""),Q.isString(n))return(await AF(n)).byteLength},CF=async(n,e)=>{const t=Q.toFiniteNumber(n.getContentLength());return t??RF(e)},PF=Sp&&(async n=>{let{url:e,method:t,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:d,withCredentials:f="same-origin",fetchOptions:g}=u0(n);u=u?(u+"").toLowerCase():"text";let v=wF([r,i&&i.toAbortSignal()],o),w;const I=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let b;try{if(c&&SF&&t!=="get"&&t!=="head"&&(b=await CF(d,s))!==0){let ie=new Request(e,{method:"POST",body:s,duplex:"half"}),re;if(Q.isFormData(s)&&(re=ie.headers.get("content-type"))&&d.setContentType(re),ie.body){const[R,A]=TT(b,If(bT(c)));s=AT(ie.body,ST,R,A)}}Q.isString(f)||(f=f?"include":"omit");const O="credentials"in Request.prototype;w=new Request(e,{...g,signal:v,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:O?f:void 0});let x=await fetch(w);const M=Xg&&(u==="stream"||u==="response");if(Xg&&(a||M&&I)){const ie={};["status","statusText","headers"].forEach(N=>{ie[N]=x[N]});const re=Q.toFiniteNumber(x.headers.get("content-length")),[R,A]=a&&TT(re,If(bT(a),!0))||[];x=new Response(AT(x.body,ST,R,()=>{A&&A(),I&&I()}),ie)}u=u||"text";let K=await Af[Q.findKey(Af,u)||"text"](x,n);return!M&&I&&I(),await new Promise((ie,re)=>{c0(ie,re,{data:K,headers:fs.from(x.headers),status:x.status,statusText:x.statusText,config:n,request:w})})}catch(O){throw I&&I(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,n,w),{cause:O.cause||O}):ke.from(O,O&&O.code,n,w)}}),Zg={http:HM,xhr:EF,fetch:PF};Q.forEach(Zg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const RT=n=>`- ${n}`,NF=n=>Q.isFunction(n)||n===null||n===!1,f0={getAdapter:n=>{n=Q.isArray(n)?n:[n];const{length:e}=n;let t,s;const r={};for(let i=0;i<e;i++){t=n[i];let o;if(s=t,!NF(t)&&(s=Zg[(o=String(t)).toLowerCase()],s===void 0))throw new ke(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(RT).join(`
`):" "+RT(i[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Zg};function ag(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new dl(null,n)}function CT(n){return ag(n),n.headers=fs.from(n.headers),n.data=og.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),f0.getAdapter(n.adapter||Rh.adapter)(n).then(function(s){return ag(n),s.data=og.call(n,n.transformResponse,s),s.headers=fs.from(s.headers),s},function(s){return a0(s)||(ag(n),s&&s.response&&(s.response.data=og.call(n,n.transformResponse,s.response),s.response.headers=fs.from(s.response.headers))),Promise.reject(s)})}const p0="1.7.7",by={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{by[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const PT={};by.transitional=function(e,t,s){function r(i,o){return"[Axios v"+p0+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(e===!1)throw new ke(r(o," has been removed"+(t?" in "+t:"")),ke.ERR_DEPRECATED);return t&&!PT[o]&&(PT[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,o,a):!0}};function kF(n,e,t){if(typeof n!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const a=n[i],c=a===void 0||o(a,i,n);if(c!==!0)throw new ke("option "+i+" must be "+c,ke.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ke("Unknown option "+i,ke.ERR_BAD_OPTION)}}const e_={assertOptions:kF,validators:by},Vi=e_.validators;class fa{constructor(e){this.defaults=e,this.interceptors={request:new ET,response:new ET}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=va(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:i}=t;s!==void 0&&e_.assertOptions(s,{silentJSONParsing:Vi.transitional(Vi.boolean),forcedJSONParsing:Vi.transitional(Vi.boolean),clarifyTimeoutError:Vi.transitional(Vi.boolean)},!1),r!=null&&(Q.isFunction(r)?t.paramsSerializer={serialize:r}:e_.assertOptions(r,{encode:Vi.function,serialize:Vi.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Q.merge(i.common,i[t.method]);i&&Q.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),t.headers=fs.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(t)===!1||(c=c&&I.synchronous,a.unshift(I.fulfilled,I.rejected))});const u=[];this.interceptors.response.forEach(function(I){u.push(I.fulfilled,I.rejected)});let d,f=0,g;if(!c){const w=[CT.bind(this),void 0];for(w.unshift.apply(w,a),w.push.apply(w,u),g=w.length,d=Promise.resolve(t);f<g;)d=d.then(w[f++],w[f++]);return d}g=a.length;let v=t;for(f=0;f<g;){const w=a[f++],I=a[f++];try{v=w(v)}catch(b){I.call(this,b);break}}try{d=CT.call(this,v)}catch(w){return Promise.reject(w)}for(f=0,g=u.length;f<g;)d=d.then(u[f++],u[f++]);return d}getUri(e){e=va(this.defaults,e);const t=l0(e.baseURL,e.url);return r0(t,e.params,e.paramsSerializer)}}Q.forEach(["delete","get","head","options"],function(e){fa.prototype[e]=function(t,s){return this.request(va(s||{},{method:e,url:t,data:(s||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function t(s){return function(i,o,a){return this.request(va(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}fa.prototype[e]=t(),fa.prototype[e+"Form"]=t(!0)});class Iy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,a){s.reason||(s.reason=new dl(i,o,a),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Iy(function(r){e=r}),cancel:e}}}function DF(n){return function(t){return n.apply(null,t)}}function OF(n){return Q.isObject(n)&&n.isAxiosError===!0}const t_={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(t_).forEach(([n,e])=>{t_[e]=n});function m0(n){const e=new fa(n),t=KS(fa.prototype.request,e);return Q.extend(t,fa.prototype,e,{allOwnKeys:!0}),Q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return m0(va(n,r))},t}const Le=m0(Rh);Le.Axios=fa;Le.CanceledError=dl;Le.CancelToken=Iy;Le.isCancel=a0;Le.VERSION=p0;Le.toFormData=Ap;Le.AxiosError=ke;Le.Cancel=Le.CanceledError;Le.all=function(e){return Promise.all(e)};Le.spread=DF;Le.isAxiosError=OF;Le.mergeConfig=va;Le.AxiosHeaders=fs;Le.formToJSON=n=>o0(Q.isHTMLForm(n)?new FormData(n):n);Le.getAdapter=f0.getAdapter;Le.HttpStatusCode=t_;Le.default=Le;const xF="/assets/logo%20newpng-Bcb3abFB.png";var NT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me=function(n,e){if(!n)throw fl(e)},fl=function(n){return new Error("Firebase Database ("+g0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},LF=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[t++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],o=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Ay={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,u=c?n[r+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let g=(a&15)<<2|u>>6,v=u&63;c||(v=64,o||(g=64)),s.push(t[d],t[f],t[g],t[v])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):LF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const u=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,i==null||a==null||u==null||f==null)throw new VF;const g=i<<2|a>>4;if(s.push(g),u!==64){const v=a<<4&240|u>>2;if(s.push(v),f!==64){const w=u<<6&192|f;s.push(w)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const y0=function(n){const e=_0(n);return Ay.encodeByteArray(e,!0)},Sf=function(n){return y0(n).replace(/\./g,"")},Rf=function(n){try{return Ay.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(n){return Zu(void 0,n)}function Zu(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!FF(t)||(n[t]=Zu(n[t],e[t]));return n}function FF(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UF=()=>v0().__FIREBASE_DEFAULTS__,$F=()=>{if(typeof process>"u"||typeof NT>"u")return;const n=NT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Rf(n[1]);return e&&JSON.parse(e)},Rp=()=>{try{return UF()||$F()||BF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},E0=n=>{var e,t;return(t=(e=Rp())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Sy=n=>{const e=E0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},w0=()=>{var n;return(n=Rp())===null||n===void 0?void 0:n.config},T0=n=>{var e;return(e=Rp())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sf(JSON.stringify(t)),Sf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Cy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function jF(){var n;const e=(n=Rp())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qF(){return typeof window<"u"||b0()}function b0(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function HF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function A0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WF(){const n=nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function S0(){return g0.NODE_ADMIN===!0}function R0(){return!jF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Py(){try{return typeof indexedDB=="object"}catch{return!1}}function C0(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function KF(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="FirebaseError";class Rs extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=zF,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_i.prototype.create)}}class _i{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?GF(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Rs(r,a,s)}}function GF(n,e){return n.replace(QF,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const QF=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(n){return JSON.parse(n)}function wn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=function(n){let e={},t={},s={},r="";try{const i=n.split(".");e=eh(Rf(i[0])||""),t=eh(Rf(i[1])||""),r=i[2],s=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:s,signature:r}},YF=function(n){const e=P0(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},JF=function(n){const e=P0(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function qc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function n_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cf(n,e,t){const s={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=e.call(t,n[r],r,n));return s}function Ea(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const i=n[r],o=e[r];if(kT(i)&&kT(o)){if(!Ea(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function kT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function wu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Tu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const s=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)s[f]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let f=0;f<16;f++)s[f]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let f=16;f<80;f++){const g=s[f-3]^s[f-8]^s[f-14]^s[f-16];s[f]=(g<<1|g>>>31)&4294967295}let r=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,d;for(let f=0;f<80;f++){f<40?f<20?(u=a^i&(o^a),d=1518500249):(u=i^o^a,d=1859775393):f<60?(u=i&o|a&(i|o),d=2400959708):(u=i^o^a,d=3395469782);const g=(r<<5|r>>>27)+u+c+d+s[f]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=r,r=g}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const s=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(o===0)for(;r<=s;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let s=0;for(let r=0;r<5;r++)for(let i=24;i>=0;i-=8)e[s]=this.chain_[r]>>i&255,++s;return e}}function N0(n,e){const t=new ZF(n,e);return t.subscribe.bind(t)}class ZF{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let r;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");e2(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:s},r.next===void 0&&(r.next=cg),r.error===void 0&&(r.error=cg),r.complete===void 0&&(r.complete=cg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function cg(){}function k0(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);if(r>=55296&&r<=56319){const i=r-55296;s++,me(s<n.length,"Surrogate pair missing trail surrogate.");const o=n.charCodeAt(s)-56320;r=65536+(i<<10)+o}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Pp=function(n){let e=0;for(let t=0;t<n.length;t++){const s=n.charCodeAt(t);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1e3,s2=2,r2=4*60*60*1e3,i2=.5;function DT(n,e=n2,t=s2){const s=e*Math.pow(t,n),r=Math.round(i2*s*(Math.random()-.5)*2);return Math.min(r2,s+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n){return n&&n._delegate?n._delegate:n}class $n{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Cp;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(c2(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,t){var s;const r=this.normalizeInstanceIdentifier(t),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:a2(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a2(n){return n===Yo?void 0:n}function c2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=[];var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const O0={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},l2=Ue.INFO,u2={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},h2=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=u2[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ml{constructor(e){this.name=e,this._logLevel=l2,this._logHandler=h2,this._userLogHandler=null,Ny.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?O0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}function d2(n){Ny.forEach(e=>{e.setLogLevel(n)})}function f2(n,e){for(const t of Ny){let s=null;e&&e.level&&(s=O0[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(r,i,...o)=>{const a=o.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");i>=(s??r.logLevel)&&n({level:Ue[i].toLowerCase(),message:a,args:o,type:r.name})}}}const p2=(n,e)=>e.some(t=>n instanceof t);let OT,xT;function m2(){return OT||(OT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g2(){return xT||(xT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const x0=new WeakMap,s_=new WeakMap,L0=new WeakMap,lg=new WeakMap,ky=new WeakMap;function _2(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Xi(n.result)),r()},o=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&x0.set(t,n)}).catch(()=>{}),ky.set(e,n),e}function y2(n){if(s_.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});s_.set(n,e)}let r_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return s_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||L0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function v2(n){r_=n(r_)}function E2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(ug(this),e,...t);return L0.set(s,e.sort?e.sort():[e]),Xi(s)}:g2().includes(n)?function(...e){return n.apply(ug(this),e),Xi(x0.get(this))}:function(...e){return Xi(n.apply(ug(this),e))}}function w2(n){return typeof n=="function"?E2(n):(n instanceof IDBTransaction&&y2(n),p2(n,m2())?new Proxy(n,r_):n)}function Xi(n){if(n instanceof IDBRequest)return _2(n);if(lg.has(n))return lg.get(n);const e=w2(n);return e!==n&&(lg.set(n,e),ky.set(e,n)),e}const ug=n=>ky.get(n);function V0(n,e,{blocked:t,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(n,e),a=Xi(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Xi(o.result),c.oldVersion,c.newVersion,Xi(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const T2=["get","getKey","getAll","getAllKeys","count"],b2=["put","add","delete","clear"],hg=new Map;function LT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hg.get(e))return hg.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=b2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||T2.includes(t)))return;const i=async function(o,...a){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),r&&c.done]))[0]};return hg.set(e,i),i}v2(n=>({...n,get:(e,t,s)=>LT(e,t)||n.get(e,t,s),has:(e,t)=>!!LT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(A2(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function A2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pf="@firebase/app",i_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new ml("@firebase/app"),S2="@firebase/app-compat",R2="@firebase/analytics-compat",C2="@firebase/analytics",P2="@firebase/app-check-compat",N2="@firebase/app-check",k2="@firebase/auth",D2="@firebase/auth-compat",O2="@firebase/database",x2="@firebase/data-connect",L2="@firebase/database-compat",V2="@firebase/functions",M2="@firebase/functions-compat",F2="@firebase/installations",U2="@firebase/installations-compat",$2="@firebase/messaging",B2="@firebase/messaging-compat",j2="@firebase/performance",q2="@firebase/performance-compat",H2="@firebase/remote-config",W2="@firebase/remote-config-compat",K2="@firebase/storage",z2="@firebase/storage-compat",G2="@firebase/firestore",Q2="@firebase/vertexai-preview",Y2="@firebase/firestore-compat",J2="firebase",X2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]",Z2={[Pf]:"fire-core",[S2]:"fire-core-compat",[C2]:"fire-analytics",[R2]:"fire-analytics-compat",[N2]:"fire-app-check",[P2]:"fire-app-check-compat",[k2]:"fire-auth",[D2]:"fire-auth-compat",[O2]:"fire-rtdb",[x2]:"fire-data-connect",[L2]:"fire-rtdb-compat",[V2]:"fire-fn",[M2]:"fire-fn-compat",[F2]:"fire-iid",[U2]:"fire-iid-compat",[$2]:"fire-fcm",[B2]:"fire-fcm-compat",[j2]:"fire-perf",[q2]:"fire-perf-compat",[H2]:"fire-rc",[W2]:"fire-rc-compat",[K2]:"fire-gcs",[z2]:"fire-gcs-compat",[G2]:"fire-fst",[Y2]:"fire-fst-compat",[Q2]:"fire-vertex","fire-js":"fire-js",[J2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Map,Hc=new Map,Wc=new Map;function th(n,e){try{n.container.addComponent(e)}catch(t){li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function M0(n,e){n.container.addOrOverwriteComponent(e)}function gs(n){const e=n.name;if(Wc.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;Wc.set(e,n);for(const t of ro.values())th(t,n);for(const t of Hc.values())th(t,n);return!0}function cr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function eU(n,e,t=so){cr(n,e).clearInstance(t)}function F0(n){return n.options!==void 0}function Xs(n){return n.settings!==void 0}function tU(){Wc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new _i("app","Firebase",nU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U0=class{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $n("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU extends U0{constructor(e,t,s,r){const i=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,o={name:s,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,r);else{const a=e;super(a.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Jt(Pf,i_,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Dy(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Fs.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=X2;function Np(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s=Object.assign({name:so,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw Fs.create("bad-app-name",{appName:String(r)});if(t||(t=w0()),!t)throw Fs.create("no-options");const i=ro.get(r);if(i){if(Ea(t,i.options)&&Ea(s,i.config))return i;throw Fs.create("duplicate-app",{appName:r})}const o=new D0(r);for(const c of Wc.values())o.addComponent(c);const a=new U0(t,s,o);return ro.set(r,a),a}function rU(n,e){if(qF()&&!b0())throw Fs.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;F0(n)?t=n.options:t=n;const s=Object.assign(Object.assign({},e),t);s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const r=u=>[...u].reduce((d,f)=>Math.imul(31,d)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Fs.create("finalization-registry-not-supported",{});const i=""+r(JSON.stringify(s)),o=Hc.get(i);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new D0(i);for(const u of Wc.values())a.addComponent(u);const c=new sU(t,e,i,a);return Hc.set(i,c),c}function gl(n=so){const e=ro.get(n);if(!e&&n===so&&w0())return Np();if(!e)throw Fs.create("no-app",{appName:n});return e}function iU(){return Array.from(ro.values())}async function Dy(n){let e=!1;const t=n.name;ro.has(t)?(e=!0,ro.delete(t)):Hc.has(t)&&n.decRefCount()<=0&&(Hc.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(s=>s.delete())),n.isDeleted=!0)}function Jt(n,e,t){var s;let r=(s=Z2[n])!==null&&s!==void 0?s:n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(a.join(" "));return}gs(new $n(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function $0(n,e){if(n!==null&&typeof n!="function")throw Fs.create("invalid-log-argument");f2(n,e)}function B0(n){d2(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU="firebase-heartbeat-database",aU=1,nh="firebase-heartbeat-store";let dg=null;function j0(){return dg||(dg=V0(oU,aU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fs.create("idb-open",{originalErrorMessage:n.message})})),dg}async function cU(n){try{const t=(await j0()).transaction(nh),s=await t.objectStore(nh).get(q0(n));return await t.done,s}catch(e){if(e instanceof Rs)li.warn(e.message);else{const t=Fs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});li.warn(t.message)}}}async function VT(n,e){try{const s=(await j0()).transaction(nh,"readwrite");await s.objectStore(nh).put(e,q0(n)),await s.done}catch(t){if(t instanceof Rs)li.warn(t.message);else{const s=Fs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});li.warn(s.message)}}}function q0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=1024,uU=30*24*60*60*1e3;class hU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fU(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=MT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=uU}),this._storage.overwrite(this._heartbeatsCache))}catch(s){li.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=MT(),{heartbeatsToSend:s,unsentEntries:r}=dU(this._heartbeatsCache.heartbeats),i=Sf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return li.warn(t),""}}}function MT(){return new Date().toISOString().substring(0,10)}function dU(n,e=lU){const t=[];let s=n.slice();for(const r of n){const i=t.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),FT(t)>e){i.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),FT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class fU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Py()?C0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cU(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return VT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return VT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function FT(n){return Sf(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(n){gs(new $n("platform-logger",e=>new I2(e),"PRIVATE")),gs(new $n("heartbeat",e=>new hU(e),"PRIVATE")),Jt(Pf,i_,n),Jt(Pf,i_,"esm2017"),Jt("fire-js","")}pU("");const mU=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Rs,SDK_VERSION:Vr,_DEFAULT_ENTRY_NAME:so,_addComponent:th,_addOrOverwriteComponent:M0,_apps:ro,_clearComponents:tU,_components:Wc,_getProvider:cr,_isFirebaseApp:F0,_isFirebaseServerApp:Xs,_registerComponent:gs,_removeServiceInstance:eU,_serverApps:Hc,deleteApp:Dy,getApp:gl,getApps:iU,initializeApp:Np,initializeServerApp:rU,onLog:$0,registerVersion:Jt,setLogLevel:B0},Symbol.toStringTag,{value:"Module"}));function Oy(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function H0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gU=H0,W0=new _i("auth","Firebase",H0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new ml("@firebase/auth");function _U(n,...e){Nf.logLevel<=Ue.WARN&&Nf.warn(`Auth (${Vr}): ${n}`,...e)}function nf(n,...e){Nf.logLevel<=Ue.ERROR&&Nf.error(`Auth (${Vr}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(n,...e){throw xy(n,...e)}function Sr(n,...e){return xy(n,...e)}function K0(n,e,t){const s=Object.assign(Object.assign({},gU()),{[e]:t});return new _i("auth","Firebase",s).create(e,{appName:n.name})}function oi(n){return K0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xy(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return W0.create(n,...e)}function Se(n,e,...t){if(!n)throw xy(e,...t)}function ei(n){const e="INTERNAL ASSERTION FAILED: "+n;throw nf(e),new Error(e)}function ui(n,e){n||ei(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function yU(){return UT()==="http:"||UT()==="https:"}function UT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yU()||I0()||"connection"in navigator)?navigator.onLine:!0}function EU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t){this.shortDelay=e,this.longDelay=t,ui(t>e,"Short delay should be less than long delay!"),this.isMobile=Cy()||A0()}get(){return vU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(n,e){ui(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ei("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ei("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ei("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new Ch(3e4,6e4);function _o(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function yo(n,e,t,s,r={}){return G0(n,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=pl(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},i);return HF()||(u.referrerPolicy="no-referrer"),z0.fetch()(Q0(n,n.config.apiHost,t,a),u)})}async function G0(n,e,t){n._canInitEmulator=!1;const s=Object.assign(Object.assign({},wU),e);try{const r=new IU(n),i=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Vd(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vd(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Vd(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Vd(n,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw K0(n,d,u);ir(n,d)}}catch(r){if(r instanceof Rs)throw r;ir(n,"network-request-failed",{message:String(r)})}}async function Ph(n,e,t,s,r={}){const i=await yo(n,e,t,s,r);return"mfaPendingCredential"in i&&ir(n,"multi-factor-auth-required",{_serverResponse:i}),i}function Q0(n,e,t,s){const r=`${e}${t}?${s}`;return n.config.emulator?Ly(n.config,r):`${n.config.apiScheme}://${r}`}function bU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Sr(this.auth,"network-request-failed")),TU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const r=Sr(n,e,s);return r.customData._tokenResponse=t,r}function $T(n){return n!==void 0&&n.enterprise!==void 0}class AU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function SU(n,e){return yo(n,"GET","/v2/recaptchaConfig",_o(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(n,e){return yo(n,"POST","/v1/accounts:delete",e)}async function Y0(n,e){return yo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CU(n,e=!1){const t=Pe(n),s=await t.getIdToken(e),r=Vy(s);Se(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Du(fg(r.auth_time)),issuedAtTime:Du(fg(r.iat)),expirationTime:Du(fg(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function fg(n){return Number(n)*1e3}function Vy(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return nf("JWT malformed, contained fewer than 3 sections"),null;try{const r=Rf(t);return r?JSON.parse(r):(nf("Failed to decode base64 JWT payload"),null)}catch(r){return nf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function BT(n){const e=Vy(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Rs&&PU(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function PU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Du(this.lastLoginAt),this.creationTime=Du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){var e;const t=n.auth,s=await n.getIdToken(),r=await sh(n,Y0(t,{idToken:s}));Se(r==null?void 0:r.users.length,t,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?J0(i.providerUserInfo):[],a=DU(n.providerData,o),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new a_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,f)}async function kU(n){const e=Pe(n);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DU(n,e){return[...n.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function J0(n){return n.map(e=>{var{providerId:t}=e,s=Oy(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e){const t=await G0(n,{},async()=>{const s=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=n.config,o=Q0(n,r,"/v1/token",`key=${i}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",z0.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xU(n,e){return yo(n,"POST","/v2/accounts:revokeToken",_o(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=BT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:r,expiresIn:i}=await OU(e,t);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:r,expirationTime:i}=t,o=new xc;return s&&(Se(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Se(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xc,this.toJSON())}_performRefresh(){return ei("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ti{constructor(e){var{uid:t,auth:s,stsTokenManager:r}=e,i=Oy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new a_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await sh(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CU(this,e)}reload(){return kU(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xs(this.auth.app))return Promise.reject(oi(this.auth));const e=await this.getIdToken();return await sh(this,RU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,r,i,o,a,c,u,d;const f=(s=t.displayName)!==null&&s!==void 0?s:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,v=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,I=(a=t.tenantId)!==null&&a!==void 0?a:void 0,b=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,O=(u=t.createdAt)!==null&&u!==void 0?u:void 0,x=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:M,emailVerified:K,isAnonymous:ie,providerData:re,stsTokenManager:R}=t;Se(M&&R,e,"internal-error");const A=xc.fromJSON(this.name,R);Se(typeof M=="string",e,"internal-error"),Mi(f,e.name),Mi(g,e.name),Se(typeof K=="boolean",e,"internal-error"),Se(typeof ie=="boolean",e,"internal-error"),Mi(v,e.name),Mi(w,e.name),Mi(I,e.name),Mi(b,e.name),Mi(O,e.name),Mi(x,e.name);const N=new ti({uid:M,auth:e,email:g,emailVerified:K,displayName:f,isAnonymous:ie,photoURL:w,phoneNumber:v,tenantId:I,stsTokenManager:A,createdAt:O,lastLoginAt:x});return re&&Array.isArray(re)&&(N.providerData=re.map(L=>Object.assign({},L))),b&&(N._redirectEventId=b),N}static async _fromIdTokenResponse(e,t,s=!1){const r=new xc;r.updateFromServerResponse(t);const i=new ti({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await kf(i),i}static async _fromGetAccountInfoResponse(e,t,s){const r=t.users[0];Se(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?J0(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new xc;a.updateFromIdToken(s);const c=new ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new a_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=new Map;function ni(n){ui(n instanceof Function,"Expected a class definition");let e=jT.get(n);return e?(ui(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}X0.type="NONE";const qT=X0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(n,e,t){return`firebase:${n}:${e}:${t}`}class Lc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=sf(this.userKey,r.apiKey,i),this.fullPersistenceKey=sf("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Lc(ni(qT),e,s);const r=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||ni(qT);const o=sf(s,e.config.apiKey,e.name);let a=null;for(const u of t)try{const d=await u._get(o);if(d){const f=ti._fromJSON(e,d);u!==i&&(a=f),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Lc(i,e,s):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Lc(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rR(e))return"Blackberry";if(iR(e))return"Webos";if(eR(e))return"Safari";if((e.includes("chrome/")||tR(e))&&!e.includes("edge/"))return"Chrome";if(sR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function Z0(n=nn()){return/firefox\//i.test(n)}function eR(n=nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tR(n=nn()){return/crios\//i.test(n)}function nR(n=nn()){return/iemobile/i.test(n)}function sR(n=nn()){return/android/i.test(n)}function rR(n=nn()){return/blackberry/i.test(n)}function iR(n=nn()){return/webos/i.test(n)}function My(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function LU(n=nn()){var e;return My(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VU(){return WF()&&document.documentMode===10}function oR(n=nn()){return My(n)||sR(n)||iR(n)||rR(n)||/windows phone/i.test(n)||nR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n,e=[]){let t;switch(n){case"Browser":t=HT(nn());break;case"Worker":t=`${HT(nn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});s.onAbort=t,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(n,e={}){return yo(n,"GET","/v2/passwordPolicy",_o(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=6;class $U{constructor(e){var t,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:UU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,r,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,t,s,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new WT(this),this.idTokenSubscription=new WT(this),this.beforeStateQueue=new MU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ni(t)),this._initializationPromise=this.queue(async()=>{var s,r;if(!this._deleted&&(this.persistenceManager=await Lc.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Y0(this,{idToken:e}),s=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xs(this.app))return Promise.reject(oi(this));const t=e?Pe(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xs(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xs(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FU(this),t=new $U(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _i("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await xU(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ni(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Lc.create(this,[ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,r){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&_U(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function $a(n){return Pe(n)}class WT{constructor(e){this.auth=e,this.observer=null,this.addObserver=N0(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jU(n){kp=n}function cR(n){return kp.loadJS(n)}function qU(){return kp.recaptchaEnterpriseScript}function HU(){return kp.gapiScript}function WU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const KU="recaptcha-enterprise",zU="NO_RECAPTCHA";class GU{constructor(e){this.type=KU,this.auth=$a(e)}async verify(e="verify",t=!1){async function s(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{SU(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new AU(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})})}function r(i,o,a){const c=window.grecaptcha;$T(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(zU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{s(this.auth).then(a=>{if(!t&&$T(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=qU();c.length!==0&&(c+=a),cR(c).then(()=>{r(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function KT(n,e,t,s=!1){const r=new GU(n);let i;try{i=await r.verify(t)}catch{i=await r.verify(t,!0)}const o=Object.assign({},e);return s?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function c_(n,e,t,s){var r;if(!((r=n._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await KT(n,e,t,t==="getOobCode");return s(n,i)}else return s(n,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await KT(n,e,t,t==="getOobCode");return s(n,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n,e){const t=cr(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),i=t.getOptions();if(Ea(i,e??{}))return r;ir(r,"already-initialized")}return t.initialize({options:e})}function YU(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ni);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function JU(n,e,t){const s=$a(n);Se(s._canInitEmulator,s,"emulator-config-failed"),Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=lR(e),{host:o,port:a}=XU(e),c=a===null?"":`:${a}`;s.config.emulator={url:`${i}//${o}${c}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})}),ZU()}function lR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XU(n){const e=lR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:zT(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:zT(o)}}}function zT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ei("not implemented")}_getIdTokenResponse(e){return ei("not implemented")}_linkToIdToken(e,t){return ei("not implemented")}_getReauthenticationResolver(e){return ei("not implemented")}}async function e$(n,e){return yo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t$(n,e){return Ph(n,"POST","/v1/accounts:signInWithPassword",_o(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n$(n,e){return Ph(n,"POST","/v1/accounts:signInWithEmailLink",_o(n,e))}async function s$(n,e){return Ph(n,"POST","/v1/accounts:signInWithEmailLink",_o(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends Fy{constructor(e,t,s,r=null){super("password",s),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rh(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new rh(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c_(e,t,"signInWithPassword",t$);case"emailLink":return n$(e,{email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c_(e,s,"signUpPassword",e$);case"emailLink":return s$(e,{idToken:t,email:this._email,oobCode:this._password});default:ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(n,e){return Ph(n,"POST","/v1/accounts:signInWithIdp",_o(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$="http://localhost";class wa extends Fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=t,i=Oy(t,["providerId","signInMethod"]);if(!s||!r)return null;const o=new wa(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Vc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Vc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vc(e,t)}buildRequest(){const e={requestUri:r$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function o$(n){const e=wu(Tu(n)).link,t=e?wu(Tu(e)).deep_link_id:null,s=wu(Tu(n)).deep_link_id;return(s?wu(Tu(s)).link:null)||s||t||e||n}class Uy{constructor(e){var t,s,r,i,o,a;const c=wu(Tu(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,d=(s=c.oobCode)!==null&&s!==void 0?s:null,f=i$((r=c.mode)!==null&&r!==void 0?r:null);Se(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=o$(e);try{return new Uy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.providerId=_l.PROVIDER_ID}static credential(e,t){return rh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Uy.parseLink(t);return Se(s,"argument-error"),rh._fromEmailAndCode(e,s.code,s.tenantId)}}_l.PROVIDER_ID="password";_l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends uR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Nh{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Nh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wa._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ki.credential(t,s)}catch{return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com";Ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Nh{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi extends Nh{constructor(){super("twitter.com")}static credential(e,t){return wa._fromParams({providerId:Gi.PROVIDER_ID,signInMethod:Gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gi.credentialFromTaggedObject(e)}static credentialFromError(e){return Gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Gi.credential(t,s)}catch{return null}}}Gi.TWITTER_SIGN_IN_METHOD="twitter.com";Gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(n,e){return Ph(n,"POST","/v1/accounts:signUp",_o(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,r=!1){const i=await ti._fromIdTokenResponse(e,s,r),o=GT(s);return new Ta({user:i,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const r=GT(s);return new Ta({user:e,providerId:r,_tokenResponse:s,operationType:t})}}function GT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Rs{constructor(e,t,s,r){var i;super(t.code,t.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,Df.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,r){return new Df(e,t,s,r)}}function hR(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Df._fromErrorAndOperation(n,i,e,s):i})}async function c$(n,e,t=!1){const s=await sh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ta._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l$(n,e,t=!1){const{auth:s}=n;if(Xs(s.app))return Promise.reject(oi(s));const r="reauthenticate";try{const i=await sh(n,hR(s,r,e,n),t);Se(i.idToken,s,"internal-error");const o=Vy(i.idToken);Se(o,s,"internal-error");const{sub:a}=o;return Se(n.uid===a,s,"user-mismatch"),Ta._forOperation(n,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ir(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(n,e,t=!1){if(Xs(n.app))return Promise.reject(oi(n));const s="signIn",r=await hR(n,s,e),i=await Ta._fromIdTokenResponse(n,s,r);return t||await n._updateCurrentUser(i.user),i}async function u$(n,e){return dR($a(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(n){const e=$a(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function h$(n,e,t){if(Xs(n.app))return Promise.reject(oi(n));const s=$a(n),o=await c_(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&fR(n),c}),a=await Ta._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function d$(n,e,t){return Xs(n.app)?Promise.reject(oi(n)):u$(Pe(n),_l.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&fR(n),s})}function f$(n,e,t,s){return Pe(n).onIdTokenChanged(e,t,s)}function p$(n,e,t){return Pe(n).beforeAuthStateChanged(e,t)}function pR(n,e,t,s){return Pe(n).onAuthStateChanged(e,t,s)}function m$(n){return Pe(n).signOut()}const Of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Of,"1"),this.storage.removeItem(Of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=1e3,_$=10;class gR extends mR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),r=this.localCache[t];s!==r&&e(t,r,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);VU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,_$):r()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},g$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gR.type="LOCAL";const y$=gR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R extends mR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_R.type="SESSION";const yR=_R;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const s=new Dp(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async u=>u(t.origin,i)),c=await v$(a);t.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,c)=>{const u=$y("",20);r.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(f){const g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(g.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(){return window}function w$(n){Rr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){return typeof Rr().WorkerGlobalScope<"u"&&typeof Rr().importScripts=="function"}async function T$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b$(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function I$(){return vR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="firebaseLocalStorageDb",A$=1,xf="firebaseLocalStorage",wR="fbase_key";class kh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Op(n,e){return n.transaction([xf],e?"readwrite":"readonly").objectStore(xf)}function S$(){const n=indexedDB.deleteDatabase(ER);return new kh(n).toPromise()}function l_(){const n=indexedDB.open(ER,A$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(xf,{keyPath:wR})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(xf)?e(s):(s.close(),await S$(),e(await l_()))})})}async function QT(n,e,t){const s=Op(n,!0).put({[wR]:e,value:t});return new kh(s).toPromise()}async function R$(n,e){const t=Op(n,!1).get(e),s=await new kh(t).toPromise();return s===void 0?null:s.value}function YT(n,e){const t=Op(n,!0).delete(e);return new kh(t).toPromise()}const C$=800,P$=3;class TR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await l_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>P$)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dp._getInstance(I$()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await T$(),!this.activeServiceWorker)return;this.sender=new E$(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await l_();return await QT(e,Of,"1"),await YT(e,Of),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>QT(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>R$(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>YT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=Op(r,!1).getAll();return new kh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TR.type="LOCAL";const N$=TR;new Ch(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$(n,e){return e?ni(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By extends Fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function D$(n){return dR(n.auth,new By(n),n.bypassAuthState)}function O$(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),l$(t,new By(n),n.bypassAuthState)}async function x$(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),c$(t,new By(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D$;case"linkViaPopup":case"linkViaRedirect":return x$;case"reauthViaPopup":case"reauthViaRedirect":return O$;default:ir(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$=new Ch(2e3,1e4);class Sc extends bR{constructor(e,t,s,r,i){super(e,t,r,i),this.provider=s,this.authWindow=null,this.pollId=null,Sc.currentPopupAction&&Sc.currentPopupAction.cancel(),Sc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=$y();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,L$.get())};e()}}Sc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$="pendingRedirect",rf=new Map;class M$ extends bR{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=rf.get(this.auth._key());if(!e){try{const s=await F$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}rf.set(this.auth._key(),e)}return this.bypassAuthState||rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F$(n,e){const t=B$(e),s=$$(n);if(!await s._isAvailable())return!1;const r=await s._get(t)==="true";return await s._remove(t),r}function U$(n,e){rf.set(n._key(),e)}function $$(n){return ni(n._redirectPersistence)}function B$(n){return sf(V$,n.config.apiKey,n.name)}async function j$(n,e,t=!1){if(Xs(n.app))return Promise.reject(oi(n));const s=$a(n),r=k$(s,e),o=await new M$(s,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$=10*60*1e3;class H${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!IR(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Sr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q$&&this.cachedEventUids.clear(),this.cachedEventUids.has(JT(e))}saveEventToCache(e){this.cachedEventUids.add(JT(e)),this.lastProcessedEventTime=Date.now()}}function JT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function W$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K$(n,e={}){return yo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,G$=/^https?/;async function Q$(n){if(n.config.emulator)return;const{authorizedDomains:e}=await K$(n);for(const t of e)try{if(Y$(t))return}catch{}ir(n,"unauthorized-domain")}function Y$(n){const e=o_(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!G$.test(t))return!1;if(z$.test(n))return s===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$=new Ch(3e4,6e4);function XT(){const n=Rr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function X$(n){return new Promise((e,t)=>{var s,r,i;function o(){XT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XT(),t(Sr(n,"network-request-failed"))},timeout:J$.get()})}if(!((r=(s=Rr().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=Rr().gapi)===null||i===void 0)&&i.load)o();else{const a=WU("iframefcb");return Rr()[a]=()=>{gapi.load?o():t(Sr(n,"network-request-failed"))},cR(`${HU()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw of=null,e})}let of=null;function Z$(n){return of=of||X$(n),of}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=new Ch(5e3,15e3),tB="__/auth/iframe",nB="emulator/auth/iframe",sB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iB(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ly(e,nB):`https://${n.config.authDomain}/${tB}`,s={apiKey:e.apiKey,appName:n.name,v:Vr},r=rB.get(n.config.apiHost);r&&(s.eid=r);const i=n._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${pl(s).slice(1)}`}async function oB(n){const e=await Z$(n),t=Rr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:iB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sB,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Sr(n,"network-request-failed"),a=Rr().setTimeout(()=>{i(o)},eB.get());function c(){Rr().clearTimeout(a),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cB=500,lB=600,uB="_blank",hB="http://localhost";class ZT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dB(n,e,t,s=cB,r=lB){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},aB),{width:s.toString(),height:r.toString(),top:i,left:o}),u=nn().toLowerCase();t&&(a=tR(u)?uB:t),Z0(u)&&(e=e||hB,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[v,w])=>`${g}${v}=${w},`,"");if(LU(u)&&a!=="_self")return fB(e||"",a),new ZT(null);const f=window.open(e||"",a,d);Se(f,n,"popup-blocked");try{f.focus()}catch{}return new ZT(f)}function fB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB="__/auth/handler",mB="emulator/auth/handler",gB=encodeURIComponent("fac");async function eb(n,e,t,s,r,i){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Vr,eventId:r};if(e instanceof uR){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",n_(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Nh){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await n._getAppCheckToken(),u=c?`#${gB}=${encodeURIComponent(c)}`:"";return`${_B(n)}?${pl(a).slice(1)}${u}`}function _B({config:n}){return n.emulator?Ly(n,mB):`https://${n.authDomain}/${pB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="webStorageSupport";class yB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yR,this._completeRedirectFn=j$,this._overrideRedirectResult=U$}async _openPopup(e,t,s,r){var i;ui((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await eb(e,t,s,o_(),r);return dB(e,o,$y())}async _openRedirect(e,t,s,r){await this._originValidation(e);const i=await eb(e,t,s,o_(),r);return w$(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:i}=this.eventManagers[t];return r?Promise.resolve(r):(ui(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await oB(e),s=new H$(e);return t.register("authEvent",r=>(Se(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pg,{type:pg},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[pg];o!==void 0&&t(!!o),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Q$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return oR()||eR()||My()}}const vB=yB;var tb="@firebase/auth",nb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TB(n){gs(new $n("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Se(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aR(n)},u=new BU(s,r,i,c);return YU(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),gs(new $n("auth-internal",e=>{const t=$a(e.getProvider("auth").getImmediate());return(s=>new EB(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(tb,nb,wB(n)),Jt(tb,nb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=5*60,IB=T0("authIdTokenMaxAge")||bB;let sb=null;const AB=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>IB)return;const r=t==null?void 0:t.token;sb!==r&&(sb=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function hi(n=gl()){const e=cr(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QU(n,{popupRedirectResolver:vB,persistence:[N$,y$,yR]}),s=T0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=AB(i.toString());p$(t,o,()=>o(t.currentUser)),f$(t,a=>o(a))}}const r=E0("auth");return r&&JU(t,`http://${r}`),t}function SB(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}jU({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=r=>{const i=Sr("internal-error");i.customData=r,t(i)},s.type="text/javascript",s.charset="UTF-8",SB().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TB("Browser");/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ec=typeof document<"u";function AR(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function RB(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&AR(n.default)}const ct=Object.assign;function mg(n,e){const t={};for(const s in e){const r=e[s];t[s]=or(r)?r.map(n):n(r)}return t}const Ou=()=>{},or=Array.isArray,SR=/#/g,CB=/&/g,PB=/\//g,NB=/=/g,kB=/\?/g,RR=/\+/g,DB=/%5B/g,OB=/%5D/g,CR=/%5E/g,xB=/%60/g,PR=/%7B/g,LB=/%7C/g,NR=/%7D/g,VB=/%20/g;function jy(n){return encodeURI(""+n).replace(LB,"|").replace(DB,"[").replace(OB,"]")}function MB(n){return jy(n).replace(PR,"{").replace(NR,"}").replace(CR,"^")}function u_(n){return jy(n).replace(RR,"%2B").replace(VB,"+").replace(SR,"%23").replace(CB,"%26").replace(xB,"`").replace(PR,"{").replace(NR,"}").replace(CR,"^")}function FB(n){return u_(n).replace(NB,"%3D")}function UB(n){return jy(n).replace(SR,"%23").replace(kB,"%3F")}function $B(n){return n==null?"":UB(n).replace(PB,"%2F")}function ih(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const BB=/\/$/,jB=n=>n.replace(BB,"");function gg(n,e,t="/"){let s,r={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),r=n(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=KB(s??e,t),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:ih(o)}}function qB(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function rb(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function HB(n,e,t){const s=e.matched.length-1,r=t.matched.length-1;return s>-1&&s===r&&Kc(e.matched[s],t.matched[r])&&kR(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Kc(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function kR(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!WB(n[t],e[t]))return!1;return!0}function WB(n,e){return or(n)?ib(n,e):or(e)?ib(e,n):n===e}function ib(n,e){return or(e)?n.length===e.length&&n.every((t,s)=>t===e[s]):n.length===1&&n[0]===e}function KB(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),s=n.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=t.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Fi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var oh;(function(n){n.pop="pop",n.push="push"})(oh||(oh={}));var xu;(function(n){n.back="back",n.forward="forward",n.unknown=""})(xu||(xu={}));function zB(n){if(!n)if(Ec){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),jB(n)}const GB=/^[^#]+#/;function QB(n,e){return n.replace(GB,"#")+e}function YB(n,e){const t=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:e.behavior,left:s.left-t.left-(e.left||0),top:s.top-t.top-(e.top||0)}}const xp=()=>({left:window.scrollX,top:window.scrollY});function JB(n){let e;if("el"in n){const t=n.el,s=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?s?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=YB(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ob(n,e){return(history.state?history.state.position-e:-1)+n}const h_=new Map;function XB(n,e){h_.set(n,e)}function ZB(n){const e=h_.get(n);return h_.delete(n),e}let e4=()=>location.protocol+"//"+location.host;function DR(n,e){const{pathname:t,search:s,hash:r}=e,i=n.indexOf("#");if(i>-1){let a=r.includes(n.slice(i))?n.slice(i).length:1,c=r.slice(a);return c[0]!=="/"&&(c="/"+c),rb(c,"")}return rb(t,n)+s+r}function t4(n,e,t,s){let r=[],i=[],o=null;const a=({state:g})=>{const v=DR(n,location),w=t.value,I=e.value;let b=0;if(g){if(t.value=v,e.value=g,o&&o===w){o=null;return}b=I?g.position-I.position:0}else s(v);r.forEach(O=>{O(t.value,w,{delta:b,type:oh.pop,direction:b?b>0?xu.forward:xu.back:xu.unknown})})};function c(){o=t.value}function u(g){r.push(g);const v=()=>{const w=r.indexOf(g);w>-1&&r.splice(w,1)};return i.push(v),v}function d(){const{history:g}=window;g.state&&g.replaceState(ct({},g.state,{scroll:xp()}),"")}function f(){for(const g of i)g();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function ab(n,e,t,s=!1,r=!1){return{back:n,current:e,forward:t,replaced:s,position:window.history.length,scroll:r?xp():null}}function n4(n){const{history:e,location:t}=window,s={value:DR(n,t)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,d){const f=n.indexOf("#"),g=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+c:e4()+n+c;try{e[d?"replaceState":"pushState"](u,"",g),r.value=u}catch(v){console.error(v),t[d?"replace":"assign"](g)}}function o(c,u){const d=ct({},e.state,ab(r.value.back,c,r.value.forward,!0),u,{position:r.value.position});i(c,d,!0),s.value=c}function a(c,u){const d=ct({},r.value,e.state,{forward:c,scroll:xp()});i(d.current,d,!0);const f=ct({},ab(s.value,c,null),{position:d.position+1},u);i(c,f,!1),s.value=c}return{location:s,state:r,push:a,replace:o}}function s4(n){n=zB(n);const e=n4(n),t=t4(n,e.state,e.location,e.replace);function s(i,o=!0){o||t.pauseListeners(),history.go(i)}const r=ct({location:"",base:n,go:s,createHref:QB.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function r4(n){return typeof n=="string"||n&&typeof n=="object"}function OR(n){return typeof n=="string"||typeof n=="symbol"}const xR=Symbol("");var cb;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(cb||(cb={}));function zc(n,e){return ct(new Error,{type:n,[xR]:!0},e)}function Yr(n,e){return n instanceof Error&&xR in n&&(e==null||!!(n.type&e))}const lb="[^/]+?",i4={sensitive:!1,strict:!1,start:!0,end:!0},o4=/[.+*?^${}()[\]/\\]/g;function a4(n,e){const t=ct({},i4,e),s=[];let r=t.start?"^":"";const i=[];for(const u of n){const d=u.length?[]:[90];t.strict&&!u.length&&(r+="/");for(let f=0;f<u.length;f++){const g=u[f];let v=40+(t.sensitive?.25:0);if(g.type===0)f||(r+="/"),r+=g.value.replace(o4,"\\$&"),v+=40;else if(g.type===1){const{value:w,repeatable:I,optional:b,regexp:O}=g;i.push({name:w,repeatable:I,optional:b});const x=O||lb;if(x!==lb){v+=10;try{new RegExp(`(${x})`)}catch(K){throw new Error(`Invalid custom RegExp for param "${w}" (${x}): `+K.message)}}let M=I?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;f||(M=b&&u.length<2?`(?:/${M})`:"/"+M),b&&(M+="?"),r+=M,v+=20,b&&(v+=-8),I&&(v+=-20),x===".*"&&(v+=-50)}d.push(v)}s.push(d)}if(t.strict&&t.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(u){const d=u.match(o),f={};if(!d)return null;for(let g=1;g<d.length;g++){const v=d[g]||"",w=i[g-1];f[w.name]=v&&w.repeatable?v.split("/"):v}return f}function c(u){let d="",f=!1;for(const g of n){(!f||!d.endsWith("/"))&&(d+="/"),f=!1;for(const v of g)if(v.type===0)d+=v.value;else if(v.type===1){const{value:w,repeatable:I,optional:b}=v,O=w in u?u[w]:"";if(or(O)&&!I)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const x=or(O)?O.join("/"):O;if(!x)if(b)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);d+=x}}return d||"/"}return{re:o,score:s,keys:i,parse:a,stringify:c}}function c4(n,e){let t=0;for(;t<n.length&&t<e.length;){const s=e[t]-n[t];if(s)return s;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function LR(n,e){let t=0;const s=n.score,r=e.score;for(;t<s.length&&t<r.length;){const i=c4(s[t],r[t]);if(i)return i;t++}if(Math.abs(r.length-s.length)===1){if(ub(s))return 1;if(ub(r))return-1}return r.length-s.length}function ub(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const l4={type:0,value:""},u4=/[a-zA-Z0-9_]/;function h4(n){if(!n)return[[]];if(n==="/")return[[l4]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(v){throw new Error(`ERR (${t})/"${u}": ${v}`)}let t=0,s=t;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,c,u="",d="";function f(){u&&(t===0?i.push({type:0,value:u}):t===1||t===2||t===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function g(){u+=c}for(;a<n.length;){if(c=n[a++],c==="\\"&&t!==2){s=t,t=4;continue}switch(t){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),t=1):g();break;case 4:g(),t=s;break;case 1:c==="("?t=2:u4.test(c)?g():(f(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:t=3:d+=c;break;case 3:f(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,d="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),r}function d4(n,e,t){const s=a4(h4(n.path),t),r=ct(s,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function f4(n,e){const t=[],s=new Map;e=pb({strict:!1,end:!0,sensitive:!1},e);function r(f){return s.get(f)}function i(f,g,v){const w=!v,I=db(f);I.aliasOf=v&&v.record;const b=pb(e,f),O=[I];if("alias"in f){const K=typeof f.alias=="string"?[f.alias]:f.alias;for(const ie of K)O.push(db(ct({},I,{components:v?v.record.components:I.components,path:ie,aliasOf:v?v.record:I})))}let x,M;for(const K of O){const{path:ie}=K;if(g&&ie[0]!=="/"){const re=g.record.path,R=re[re.length-1]==="/"?"":"/";K.path=g.record.path+(ie&&R+ie)}if(x=d4(K,g,b),v?v.alias.push(x):(M=M||x,M!==x&&M.alias.push(x),w&&f.name&&!fb(x)&&o(f.name)),VR(x)&&c(x),I.children){const re=I.children;for(let R=0;R<re.length;R++)i(re[R],x,v&&v.children[R])}v=v||x}return M?()=>{o(M)}:Ou}function o(f){if(OR(f)){const g=s.get(f);g&&(s.delete(f),t.splice(t.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=t.indexOf(f);g>-1&&(t.splice(g,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return t}function c(f){const g=g4(f,t);t.splice(g,0,f),f.record.name&&!fb(f)&&s.set(f.record.name,f)}function u(f,g){let v,w={},I,b;if("name"in f&&f.name){if(v=s.get(f.name),!v)throw zc(1,{location:f});b=v.record.name,w=ct(hb(g.params,v.keys.filter(M=>!M.optional).concat(v.parent?v.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),f.params&&hb(f.params,v.keys.map(M=>M.name))),I=v.stringify(w)}else if(f.path!=null)I=f.path,v=t.find(M=>M.re.test(I)),v&&(w=v.parse(I),b=v.record.name);else{if(v=g.name?s.get(g.name):t.find(M=>M.re.test(g.path)),!v)throw zc(1,{location:f,currentLocation:g});b=v.record.name,w=ct({},g.params,f.params),I=v.stringify(w)}const O=[];let x=v;for(;x;)O.unshift(x.record),x=x.parent;return{name:b,path:I,params:w,matched:O,meta:m4(O)}}n.forEach(f=>i(f));function d(){t.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:r}}function hb(n,e){const t={};for(const s of e)s in n&&(t[s]=n[s]);return t}function db(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:p4(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function p4(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const s in n.components)e[s]=typeof t=="object"?t[s]:t;return e}function fb(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function m4(n){return n.reduce((e,t)=>ct(e,t.meta),{})}function pb(n,e){const t={};for(const s in n)t[s]=s in e?e[s]:n[s];return t}function g4(n,e){let t=0,s=e.length;for(;t!==s;){const i=t+s>>1;LR(n,e[i])<0?s=i:t=i+1}const r=_4(n);return r&&(s=e.lastIndexOf(r,s-1)),s}function _4(n){let e=n;for(;e=e.parent;)if(VR(e)&&LR(n,e)===0)return e}function VR({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function y4(n){const e={};if(n===""||n==="?")return e;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(RR," "),o=i.indexOf("="),a=ih(o<0?i:i.slice(0,o)),c=o<0?null:ih(i.slice(o+1));if(a in e){let u=e[a];or(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function mb(n){let e="";for(let t in n){const s=n[t];if(t=FB(t),s==null){s!==void 0&&(e+=(e.length?"&":"")+t);continue}(or(s)?s.map(i=>i&&u_(i)):[s&&u_(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function v4(n){const e={};for(const t in n){const s=n[t];s!==void 0&&(e[t]=or(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const E4=Symbol(""),gb=Symbol(""),Lp=Symbol(""),qy=Symbol(""),d_=Symbol("");function lu(){let n=[];function e(s){return n.push(s),()=>{const r=n.indexOf(s);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Hi(n,e,t,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,c)=>{const u=g=>{g===!1?c(zc(4,{from:t,to:e})):g instanceof Error?c(g):r4(g)?c(zc(2,{from:e,to:g})):(o&&s.enterCallbacks[r]===o&&typeof g=="function"&&o.push(g),a())},d=i(()=>n.call(s&&s.instances[r],e,t,u));let f=Promise.resolve(d);n.length<3&&(f=f.then(u)),f.catch(g=>c(g))})}function _g(n,e,t,s,r=i=>i()){const i=[];for(const o of n)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(AR(c)){const d=(c.__vccOpts||c)[e];d&&i.push(Hi(d,t,s,o,a,r))}else{let u=c();i.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=RB(d)?d.default:d;o.mods[a]=d,o.components[a]=f;const v=(f.__vccOpts||f)[e];return v&&Hi(v,t,s,o,a,r)()}))}}return i}function _b(n){const e=tr(Lp),t=tr(qy),s=Qs(()=>{const c=Ds(n.to);return e.resolve(c)}),r=Qs(()=>{const{matched:c}=s.value,{length:u}=c,d=c[u-1],f=t.matched;if(!d||!f.length)return-1;const g=f.findIndex(Kc.bind(null,d));if(g>-1)return g;const v=yb(c[u-2]);return u>1&&yb(d)===v&&f[f.length-1].path!==v?f.findIndex(Kc.bind(null,c[u-2])):g}),i=Qs(()=>r.value>-1&&b4(t.params,s.value.params)),o=Qs(()=>r.value>-1&&r.value===t.matched.length-1&&kR(t.params,s.value.params));function a(c={}){return T4(c)?e[Ds(n.replace)?"replace":"push"](Ds(n.to)).catch(Ou):Promise.resolve()}return{route:s,href:Qs(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}const w4=gS({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:_b,setup(n,{slots:e}){const t=pp(_b(n)),{options:s}=tr(Lp),r=Qs(()=>({[vb(n.activeClass,s.linkActiveClass,"router-link-active")]:t.isActive,[vb(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&e.default(t);return n.custom?i:jS("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},i)}}}),Jo=w4;function T4(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function b4(n,e){for(const t in e){const s=e[t],r=n[t];if(typeof s=="string"){if(s!==r)return!1}else if(!or(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function yb(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const vb=(n,e,t)=>n??e??t,I4=gS({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const s=tr(d_),r=Qs(()=>n.route||s.value),i=tr(gb,0),o=Qs(()=>{let u=Ds(i);const{matched:d}=r.value;let f;for(;(f=d[u])&&!f.components;)u++;return u}),a=Qs(()=>r.value.matched[o.value]);Qd(gb,Qs(()=>o.value+1)),Qd(E4,a),Qd(d_,r);const c=Xe();return Yd(()=>[c.value,a.value,n.name],([u,d,f],[g,v,w])=>{d&&(d.instances[f]=u,v&&v!==d&&u&&u===g&&(d.leaveGuards.size||(d.leaveGuards=v.leaveGuards),d.updateGuards.size||(d.updateGuards=v.updateGuards))),u&&d&&(!v||!Kc(d,v)||!g)&&(d.enterCallbacks[f]||[]).forEach(I=>I(u))},{flush:"post"}),()=>{const u=r.value,d=n.name,f=a.value,g=f&&f.components[d];if(!g)return Eb(t.default,{Component:g,route:u});const v=f.props[d],w=v?v===!0?u.params:typeof v=="function"?v(u):v:null,b=jS(g,ct({},w,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(f.instances[d]=null)},ref:c}));return Eb(t.default,{Component:b,route:u})||b}}});function Eb(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const A4=I4;function S4(n){const e=f4(n.routes,n),t=n.parseQuery||y4,s=n.stringifyQuery||mb,r=n.history,i=lu(),o=lu(),a=lu(),c=dL(Fi);let u=Fi;Ec&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=mg.bind(null,Y=>""+Y),f=mg.bind(null,$B),g=mg.bind(null,ih);function v(Y,$){let he,ye;return OR(Y)?(he=e.getRecordMatcher(Y),ye=$):ye=Y,e.addRoute(ye,he)}function w(Y){const $=e.getRecordMatcher(Y);$&&e.removeRoute($)}function I(){return e.getRoutes().map(Y=>Y.record)}function b(Y){return!!e.getRecordMatcher(Y)}function O(Y,$){if($=ct({},$||c.value),typeof Y=="string"){const C=gg(t,Y,$.path),q=e.resolve({path:C.path},$),X=r.createHref(C.fullPath);return ct(C,q,{params:g(q.params),hash:ih(C.hash),redirectedFrom:void 0,href:X})}let he;if(Y.path!=null)he=ct({},Y,{path:gg(t,Y.path,$.path).path});else{const C=ct({},Y.params);for(const q in C)C[q]==null&&delete C[q];he=ct({},Y,{params:f(C)}),$.params=f($.params)}const ye=e.resolve(he,$),Ve=Y.hash||"";ye.params=d(g(ye.params));const $e=qB(s,ct({},Y,{hash:MB(Ve),path:ye.path})),S=r.createHref($e);return ct({fullPath:$e,hash:Ve,query:s===mb?v4(Y.query):Y.query||{}},ye,{redirectedFrom:void 0,href:S})}function x(Y){return typeof Y=="string"?gg(t,Y,c.value.path):ct({},Y)}function M(Y,$){if(u!==Y)return zc(8,{from:$,to:Y})}function K(Y){return R(Y)}function ie(Y){return K(ct(x(Y),{replace:!0}))}function re(Y){const $=Y.matched[Y.matched.length-1];if($&&$.redirect){const{redirect:he}=$;let ye=typeof he=="function"?he(Y):he;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=x(ye):{path:ye},ye.params={}),ct({query:Y.query,hash:Y.hash,params:ye.path!=null?{}:Y.params},ye)}}function R(Y,$){const he=u=O(Y),ye=c.value,Ve=Y.state,$e=Y.force,S=Y.replace===!0,C=re(he);if(C)return R(ct(x(C),{state:typeof C=="object"?ct({},Ve,C.state):Ve,force:$e,replace:S}),$||he);const q=he;q.redirectedFrom=$;let X;return!$e&&HB(s,ye,he)&&(X=zc(16,{to:q,from:ye}),ns(ye,ye,!0,!1)),(X?Promise.resolve(X):L(q,ye)).catch(F=>Yr(F)?Yr(F,2)?F:_s(F):xe(F,q,ye)).then(F=>{if(F){if(Yr(F,2))return R(ct({replace:S},x(F.to),{state:typeof F.to=="object"?ct({},Ve,F.to.state):Ve,force:$e}),$||q)}else F=B(q,ye,!0,S,Ve);return V(q,ye,F),F})}function A(Y,$){const he=M(Y,$);return he?Promise.reject(he):Promise.resolve()}function N(Y){const $=$s.values().next().value;return $&&typeof $.runWithContext=="function"?$.runWithContext(Y):Y()}function L(Y,$){let he;const[ye,Ve,$e]=R4(Y,$);he=_g(ye.reverse(),"beforeRouteLeave",Y,$);for(const C of ye)C.leaveGuards.forEach(q=>{he.push(Hi(q,Y,$))});const S=A.bind(null,Y,$);return he.push(S),Sn(he).then(()=>{he=[];for(const C of i.list())he.push(Hi(C,Y,$));return he.push(S),Sn(he)}).then(()=>{he=_g(Ve,"beforeRouteUpdate",Y,$);for(const C of Ve)C.updateGuards.forEach(q=>{he.push(Hi(q,Y,$))});return he.push(S),Sn(he)}).then(()=>{he=[];for(const C of $e)if(C.beforeEnter)if(or(C.beforeEnter))for(const q of C.beforeEnter)he.push(Hi(q,Y,$));else he.push(Hi(C.beforeEnter,Y,$));return he.push(S),Sn(he)}).then(()=>(Y.matched.forEach(C=>C.enterCallbacks={}),he=_g($e,"beforeRouteEnter",Y,$,N),he.push(S),Sn(he))).then(()=>{he=[];for(const C of o.list())he.push(Hi(C,Y,$));return he.push(S),Sn(he)}).catch(C=>Yr(C,8)?C:Promise.reject(C))}function V(Y,$,he){a.list().forEach(ye=>N(()=>ye(Y,$,he)))}function B(Y,$,he,ye,Ve){const $e=M(Y,$);if($e)return $e;const S=$===Fi,C=Ec?history.state:{};he&&(ye||S?r.replace(Y.fullPath,ct({scroll:S&&C&&C.scroll},Ve)):r.push(Y.fullPath,Ve)),c.value=Y,ns(Y,$,he,S),_s()}let D;function Zt(){D||(D=r.listen((Y,$,he)=>{if(!ss.listening)return;const ye=O(Y),Ve=re(ye);if(Ve){R(ct(Ve,{replace:!0}),ye).catch(Ou);return}u=ye;const $e=c.value;Ec&&XB(ob($e.fullPath,he.delta),xp()),L(ye,$e).catch(S=>Yr(S,12)?S:Yr(S,2)?(R(S.to,ye).then(C=>{Yr(C,20)&&!he.delta&&he.type===oh.pop&&r.go(-1,!1)}).catch(Ou),Promise.reject()):(he.delta&&r.go(-he.delta,!1),xe(S,ye,$e))).then(S=>{S=S||B(ye,$e,!1),S&&(he.delta&&!Yr(S,8)?r.go(-he.delta,!1):he.type===oh.pop&&Yr(S,20)&&r.go(-1,!1)),V(ye,$e,S)}).catch(Ou)}))}let jn=lu(),Ot=lu(),Be;function xe(Y,$,he){_s(Y);const ye=Ot.list();return ye.length?ye.forEach(Ve=>Ve(Y,$,he)):console.error(Y),Promise.reject(Y)}function An(){return Be&&c.value!==Fi?Promise.resolve():new Promise((Y,$)=>{jn.add([Y,$])})}function _s(Y){return Be||(Be=!Y,Zt(),jn.list().forEach(([$,he])=>Y?he(Y):$()),jn.reset()),Y}function ns(Y,$,he,ye){const{scrollBehavior:Ve}=n;if(!Ec||!Ve)return Promise.resolve();const $e=!he&&ZB(ob(Y.fullPath,0))||(ye||!he)&&history.state&&history.state.scroll||null;return hS().then(()=>Ve(Y,$,$e)).then(S=>S&&JB(S)).catch(S=>xe(S,Y,$))}const gt=Y=>r.go(Y);let _t;const $s=new Set,ss={currentRoute:c,listening:!0,addRoute:v,removeRoute:w,clearRoutes:e.clearRoutes,hasRoute:b,getRoutes:I,resolve:O,options:n,push:K,replace:ie,go:gt,back:()=>gt(-1),forward:()=>gt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ot.add,isReady:An,install(Y){const $=this;Y.component("RouterLink",Jo),Y.component("RouterView",A4),Y.config.globalProperties.$router=$,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Ds(c)}),Ec&&!_t&&c.value===Fi&&(_t=!0,K(r.location).catch(Ve=>{}));const he={};for(const Ve in Fi)Object.defineProperty(he,Ve,{get:()=>c.value[Ve],enumerable:!0});Y.provide(Lp,$),Y.provide(qy,oS(he)),Y.provide(d_,c);const ye=Y.unmount;$s.add(Y),Y.unmount=function(){$s.delete(Y),$s.size<1&&(u=Fi,D&&D(),D=null,c.value=Fi,_t=!1,Be=!1),ye()}}};function Sn(Y){return Y.reduce(($,he)=>$.then(()=>N(he)),Promise.resolve())}return ss}function R4(n,e){const t=[],s=[],r=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(u=>Kc(u,a))?s.push(a):t.push(a));const c=n.matched[o];c&&(e.matched.find(u=>Kc(u,c))||r.push(c))}return[t,s,r]}function Hy(){return tr(Lp)}function MR(n){return tr(qy)}var C4="firebase",P4="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt(C4,P4,"app");const FR="@firebase/installations",Wy="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=1e4,$R=`w:${Wy}`,BR="FIS_v2",N4="https://firebaseinstallations.googleapis.com/v1",k4=60*60*1e3,D4="installations",O4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ba=new _i(D4,O4,x4);function jR(n){return n instanceof Rs&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR({projectId:n}){return`${N4}/projects/${n}/installations`}function HR(n){return{token:n.token,requestStatus:2,expiresIn:V4(n.expiresIn),creationTime:Date.now()}}async function WR(n,e){const s=(await e.json()).error;return ba.create("request-failed",{requestName:n,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function KR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function L4(n,{refreshToken:e}){const t=KR(n);return t.append("Authorization",M4(e)),t}async function zR(n){const e=await n();return e.status>=500&&e.status<600?n():e}function V4(n){return Number(n.replace("s","000"))}function M4(n){return`${BR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F4({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const s=qR(n),r=KR(n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:t,authVersion:BR,appId:n.appId,sdkVersion:$R},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await zR(()=>fetch(s,a));if(c.ok){const u=await c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:HR(u.authToken)}}else throw await WR("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=/^[cdef][\w-]{21}$/,f_="";function B4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=j4(n);return $4.test(t)?t:f_}catch{return f_}}function j4(n){return U4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new Map;function YR(n,e){const t=Vp(n);JR(t,e),q4(t,e)}function JR(n,e){const t=QR.get(n);if(t)for(const s of t)s(e)}function q4(n,e){const t=H4();t&&t.postMessage({key:n,fid:e}),W4()}let aa=null;function H4(){return!aa&&"BroadcastChannel"in self&&(aa=new BroadcastChannel("[Firebase] FID Change"),aa.onmessage=n=>{JR(n.data.key,n.data.fid)}),aa}function W4(){QR.size===0&&aa&&(aa.close(),aa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4="firebase-installations-database",z4=1,Ia="firebase-installations-store";let yg=null;function Ky(){return yg||(yg=V0(K4,z4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ia)}}})),yg}async function Lf(n,e){const t=Vp(n),r=(await Ky()).transaction(Ia,"readwrite"),i=r.objectStore(Ia),o=await i.get(t);return await i.put(e,t),await r.done,(!o||o.fid!==e.fid)&&YR(n,e.fid),e}async function XR(n){const e=Vp(n),s=(await Ky()).transaction(Ia,"readwrite");await s.objectStore(Ia).delete(e),await s.done}async function Mp(n,e){const t=Vp(n),r=(await Ky()).transaction(Ia,"readwrite"),i=r.objectStore(Ia),o=await i.get(t),a=e(o);return a===void 0?await i.delete(t):await i.put(a,t),await r.done,a&&(!o||o.fid!==a.fid)&&YR(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zy(n){let e;const t=await Mp(n.appConfig,s=>{const r=G4(s),i=Q4(n,r);return e=i.registrationPromise,i.installationEntry});return t.fid===f_?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function G4(n){const e=n||{fid:B4(),registrationStatus:0};return ZR(e)}function Q4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ba.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=Y4(n,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:J4(n)}:{installationEntry:e}}async function Y4(n,e){try{const t=await F4(n,e);return Lf(n.appConfig,t)}catch(t){throw jR(t)&&t.customData.serverCode===409?await XR(n.appConfig):await Lf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function J4(n){let e=await wb(n.appConfig);for(;e.registrationStatus===1;)await GR(100),e=await wb(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await zy(n);return s||t}return e}function wb(n){return Mp(n,e=>{if(!e)throw ba.create("installation-not-found");return ZR(e)})}function ZR(n){return X4(n)?{fid:n.fid,registrationStatus:0}:n}function X4(n){return n.registrationStatus===1&&n.registrationTime+UR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z4({appConfig:n,heartbeatServiceProvider:e},t){const s=ej(n,t),r=L4(n,t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:$R,appId:n.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},c=await zR(()=>fetch(s,a));if(c.ok){const u=await c.json();return HR(u)}else throw await WR("Generate Auth Token",c)}function ej(n,{fid:e}){return`${qR(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gy(n,e=!1){let t;const s=await Mp(n.appConfig,i=>{if(!eC(i))throw ba.create("not-registered");const o=i.authToken;if(!e&&sj(o))return i;if(o.requestStatus===1)return t=tj(n,e),i;{if(!navigator.onLine)throw ba.create("app-offline");const a=ij(i);return t=nj(n,a),a}});return t?await t:s.authToken}async function tj(n,e){let t=await Tb(n.appConfig);for(;t.authToken.requestStatus===1;)await GR(100),t=await Tb(n.appConfig);const s=t.authToken;return s.requestStatus===0?Gy(n,e):s}function Tb(n){return Mp(n,e=>{if(!eC(e))throw ba.create("not-registered");const t=e.authToken;return oj(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function nj(n,e){try{const t=await Z4(n,e),s=Object.assign(Object.assign({},e),{authToken:t});return await Lf(n.appConfig,s),t}catch(t){if(jR(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await XR(n.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Lf(n.appConfig,s)}throw t}}function eC(n){return n!==void 0&&n.registrationStatus===2}function sj(n){return n.requestStatus===2&&!rj(n)}function rj(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+k4}function ij(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function oj(n){return n.requestStatus===1&&n.requestTime+UR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aj(n){const e=n,{installationEntry:t,registrationPromise:s}=await zy(e);return s?s.catch(console.error):Gy(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cj(n,e=!1){const t=n;return await lj(t),(await Gy(t,e)).token}async function lj(n){const{registrationPromise:e}=await zy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(n){if(!n||!n.options)throw vg("App Configuration");if(!n.name)throw vg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw vg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function vg(n){return ba.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="installations",hj="installations-internal",dj=n=>{const e=n.getProvider("app").getImmediate(),t=uj(e),s=cr(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},fj=n=>{const e=n.getProvider("app").getImmediate(),t=cr(e,tC).getImmediate();return{getId:()=>aj(t),getToken:r=>cj(t,r)}};function pj(){gs(new $n(tC,dj,"PUBLIC")),gs(new $n(hj,fj,"PRIVATE"))}pj();Jt(FR,Wy);Jt(FR,Wy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="analytics",mj="firebase_id",gj="origin",_j=60*1e3,yj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new ml("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},As=new _i("analytics","Analytics",vj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(n){if(!n.startsWith(Qy)){const e=As.create("invalid-gtag-resource",{gtagURL:n});return ps.warn(e.message),""}return n}function nC(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function wj(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Tj(n,e){const t=wj("firebase-js-sdk-policy",{createScriptURL:Ej}),s=document.createElement("script"),r=`${Qy}?l=${n}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(r):r,s.async=!0,document.head.appendChild(s)}function bj(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Ij(n,e,t,s,r,i){const o=s[r];try{if(o)await e[o];else{const c=(await nC(t)).find(u=>u.measurementId===r);c&&await e[c.appId]}}catch(a){ps.error(a)}n("config",r,i)}async function Aj(n,e,t,s,r){try{let i=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await nC(t);for(const c of o){const u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",s,r||{})}catch(i){ps.error(i)}}function Sj(n,e,t,s){async function r(i,...o){try{if(i==="event"){const[a,c]=o;await Aj(n,e,t,a,c)}else if(i==="config"){const[a,c]=o;await Ij(n,e,t,s,a,c)}else if(i==="consent"){const[a,c]=o;n("consent",a,c)}else if(i==="get"){const[a,c,u]=o;n("get",a,c,u)}else if(i==="set"){const[a]=o;n("set",a)}else n(i,...o)}catch(a){ps.error(a)}}return r}function Rj(n,e,t,s,r){let i=function(...o){window[s].push(arguments)};return window[r]&&typeof window[r]=="function"&&(i=window[r]),window[r]=Sj(i,n,e,t),{gtagCore:i,wrappedGtag:window[r]}}function Cj(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Qy)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=30,Nj=1e3;class kj{constructor(e={},t=Nj){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sC=new kj;function Dj(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function Oj(n){var e;const{appId:t,apiKey:s}=n,r={method:"GET",headers:Dj(s)},i=yj.replace("{app-id}",t),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let a="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw As.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function xj(n,e=sC,t){const{appId:s,apiKey:r,measurementId:i}=n.options;if(!s)throw As.create("no-app-id");if(!r){if(i)return{measurementId:i,appId:s};throw As.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Mj;return setTimeout(async()=>{a.abort()},_j),rC({appId:s,apiKey:r,measurementId:i},o,a,e)}async function rC(n,{throttleEndTimeMillis:e,backoffCount:t},s,r=sC){var i;const{appId:o,measurementId:a}=n;try{await Lj(s,e)}catch(c){if(a)return ps.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await Oj(n);return r.deleteThrottleMetadata(o),c}catch(c){const u=c;if(!Vj(u)){if(r.deleteThrottleMetadata(o),a)return ps.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw c}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?DT(t,r.intervalMillis,Pj):DT(t,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return r.setThrottleMetadata(o,f),ps.debug(`Calling attemptFetch again in ${d} millis`),rC(n,f,s,r)}}function Lj(n,e){return new Promise((t,s)=>{const r=Math.max(e-Date.now(),0),i=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(i),s(As.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Vj(n){if(!(n instanceof Rs)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class Mj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Fj(n,e,t,s,r){if(r&&r.global){n("event",t,s);return}else{const i=await e,o=Object.assign(Object.assign({},s),{send_to:i});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(){if(Py())try{await C0()}catch(n){return ps.warn(As.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ps.warn(As.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function $j(n,e,t,s,r,i,o){var a;const c=xj(n);c.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&ps.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>ps.error(v)),e.push(c);const u=Uj().then(v=>{if(v)return s.getId()}),[d,f]=await Promise.all([c,u]);Cj(i)||Tj(i,d.measurementId),r("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[gj]="firebase",g.update=!0,f!=null&&(g[mj]=f),r("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.app=e}_delete(){return delete Lu[this.app.options.appId],Promise.resolve()}}let Lu={},bb=[];const Ib={};let Eg="dataLayer",jj="gtag",Ab,iC,Sb=!1;function qj(){const n=[];if(I0()&&n.push("This is a browser extension environment."),KF()||n.push("Cookies are not available."),n.length>0){const e=n.map((s,r)=>`(${r+1}) ${s}`).join(" "),t=As.create("invalid-analytics-context",{errorInfo:e});ps.warn(t.message)}}function Hj(n,e,t){qj();const s=n.options.appId;if(!s)throw As.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ps.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw As.create("no-api-key");if(Lu[s]!=null)throw As.create("already-exists",{id:s});if(!Sb){bj(Eg);const{wrappedGtag:i,gtagCore:o}=Rj(Lu,bb,Ib,Eg,jj);iC=i,Ab=o,Sb=!0}return Lu[s]=$j(n,bb,Ib,e,Ab,Eg,t),new Bj(n)}function Wj(n=gl()){n=Pe(n);const e=cr(n,Vf);return e.isInitialized()?e.getImmediate():Kj(n)}function Kj(n,e={}){const t=cr(n,Vf);if(t.isInitialized()){const r=t.getImmediate();if(Ea(e,t.getOptions()))return r;throw As.create("already-initialized")}return t.initialize({options:e})}function zj(n,e,t,s){n=Pe(n),Fj(iC,Lu[n.app.options.appId],e,t,s).catch(r=>ps.error(r))}const Rb="@firebase/analytics",Cb="0.10.8";function Gj(){gs(new $n(Vf,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return Hj(s,r,t)},"PUBLIC")),gs(new $n("analytics-internal",n,"PRIVATE")),Jt(Rb,Cb),Jt(Rb,Cb,"esm2017");function n(e){try{const t=e.getProvider(Vf).getImmediate();return{logEvent:(s,r,i)=>zj(t,s,r,i)}}catch(t){throw As.create("interop-component-reg-failed",{reason:t})}}}Gj();var Pb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pa,oC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function N(){}N.prototype=A.prototype,R.D=A.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(L,V,B){for(var D=Array(arguments.length-2),Zt=2;Zt<arguments.length;Zt++)D[Zt-2]=arguments[Zt];return A.prototype[V].apply(L,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,A,N){N||(N=0);var L=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)L[V]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(V=0;16>V;++V)L[V]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=R.g[0],N=R.g[1],V=R.g[2];var B=R.g[3],D=A+(B^N&(V^B))+L[0]+3614090360&4294967295;A=N+(D<<7&4294967295|D>>>25),D=B+(V^A&(N^V))+L[1]+3905402710&4294967295,B=A+(D<<12&4294967295|D>>>20),D=V+(N^B&(A^N))+L[2]+606105819&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(A^V&(B^A))+L[3]+3250441966&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(B^N&(V^B))+L[4]+4118548399&4294967295,A=N+(D<<7&4294967295|D>>>25),D=B+(V^A&(N^V))+L[5]+1200080426&4294967295,B=A+(D<<12&4294967295|D>>>20),D=V+(N^B&(A^N))+L[6]+2821735955&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(A^V&(B^A))+L[7]+4249261313&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(B^N&(V^B))+L[8]+1770035416&4294967295,A=N+(D<<7&4294967295|D>>>25),D=B+(V^A&(N^V))+L[9]+2336552879&4294967295,B=A+(D<<12&4294967295|D>>>20),D=V+(N^B&(A^N))+L[10]+4294925233&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(A^V&(B^A))+L[11]+2304563134&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(B^N&(V^B))+L[12]+1804603682&4294967295,A=N+(D<<7&4294967295|D>>>25),D=B+(V^A&(N^V))+L[13]+4254626195&4294967295,B=A+(D<<12&4294967295|D>>>20),D=V+(N^B&(A^N))+L[14]+2792965006&4294967295,V=B+(D<<17&4294967295|D>>>15),D=N+(A^V&(B^A))+L[15]+1236535329&4294967295,N=V+(D<<22&4294967295|D>>>10),D=A+(V^B&(N^V))+L[1]+4129170786&4294967295,A=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(A^N))+L[6]+3225465664&4294967295,B=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(B^A))+L[11]+643717713&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^A&(V^B))+L[0]+3921069994&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(V^B&(N^V))+L[5]+3593408605&4294967295,A=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(A^N))+L[10]+38016083&4294967295,B=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(B^A))+L[15]+3634488961&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^A&(V^B))+L[4]+3889429448&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(V^B&(N^V))+L[9]+568446438&4294967295,A=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(A^N))+L[14]+3275163606&4294967295,B=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(B^A))+L[3]+4107603335&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^A&(V^B))+L[8]+1163531501&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(V^B&(N^V))+L[13]+2850285829&4294967295,A=N+(D<<5&4294967295|D>>>27),D=B+(N^V&(A^N))+L[2]+4243563512&4294967295,B=A+(D<<9&4294967295|D>>>23),D=V+(A^N&(B^A))+L[7]+1735328473&4294967295,V=B+(D<<14&4294967295|D>>>18),D=N+(B^A&(V^B))+L[12]+2368359562&4294967295,N=V+(D<<20&4294967295|D>>>12),D=A+(N^V^B)+L[5]+4294588738&4294967295,A=N+(D<<4&4294967295|D>>>28),D=B+(A^N^V)+L[8]+2272392833&4294967295,B=A+(D<<11&4294967295|D>>>21),D=V+(B^A^N)+L[11]+1839030562&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^A)+L[14]+4259657740&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(N^V^B)+L[1]+2763975236&4294967295,A=N+(D<<4&4294967295|D>>>28),D=B+(A^N^V)+L[4]+1272893353&4294967295,B=A+(D<<11&4294967295|D>>>21),D=V+(B^A^N)+L[7]+4139469664&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^A)+L[10]+3200236656&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(N^V^B)+L[13]+681279174&4294967295,A=N+(D<<4&4294967295|D>>>28),D=B+(A^N^V)+L[0]+3936430074&4294967295,B=A+(D<<11&4294967295|D>>>21),D=V+(B^A^N)+L[3]+3572445317&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^A)+L[6]+76029189&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(N^V^B)+L[9]+3654602809&4294967295,A=N+(D<<4&4294967295|D>>>28),D=B+(A^N^V)+L[12]+3873151461&4294967295,B=A+(D<<11&4294967295|D>>>21),D=V+(B^A^N)+L[15]+530742520&4294967295,V=B+(D<<16&4294967295|D>>>16),D=N+(V^B^A)+L[2]+3299628645&4294967295,N=V+(D<<23&4294967295|D>>>9),D=A+(V^(N|~B))+L[0]+4096336452&4294967295,A=N+(D<<6&4294967295|D>>>26),D=B+(N^(A|~V))+L[7]+1126891415&4294967295,B=A+(D<<10&4294967295|D>>>22),D=V+(A^(B|~N))+L[14]+2878612391&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~A))+L[5]+4237533241&4294967295,N=V+(D<<21&4294967295|D>>>11),D=A+(V^(N|~B))+L[12]+1700485571&4294967295,A=N+(D<<6&4294967295|D>>>26),D=B+(N^(A|~V))+L[3]+2399980690&4294967295,B=A+(D<<10&4294967295|D>>>22),D=V+(A^(B|~N))+L[10]+4293915773&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~A))+L[1]+2240044497&4294967295,N=V+(D<<21&4294967295|D>>>11),D=A+(V^(N|~B))+L[8]+1873313359&4294967295,A=N+(D<<6&4294967295|D>>>26),D=B+(N^(A|~V))+L[15]+4264355552&4294967295,B=A+(D<<10&4294967295|D>>>22),D=V+(A^(B|~N))+L[6]+2734768916&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~A))+L[13]+1309151649&4294967295,N=V+(D<<21&4294967295|D>>>11),D=A+(V^(N|~B))+L[4]+4149444226&4294967295,A=N+(D<<6&4294967295|D>>>26),D=B+(N^(A|~V))+L[11]+3174756917&4294967295,B=A+(D<<10&4294967295|D>>>22),D=V+(A^(B|~N))+L[2]+718787259&4294967295,V=B+(D<<15&4294967295|D>>>17),D=N+(B^(V|~A))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+B&4294967295}s.prototype.u=function(R,A){A===void 0&&(A=R.length);for(var N=A-this.blockSize,L=this.B,V=this.h,B=0;B<A;){if(V==0)for(;B<=N;)r(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<A;)if(L[V++]=R.charCodeAt(B++),V==this.blockSize){r(this,L),V=0;break}}else for(;B<A;)if(L[V++]=R[B++],V==this.blockSize){r(this,L),V=0;break}}this.h=V,this.o+=A},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;var N=8*this.o;for(A=R.length-8;A<R.length;++A)R[A]=N&255,N/=256;for(this.u(R),R=Array(16),A=N=0;4>A;++A)for(var L=0;32>L;L+=8)R[N++]=this.g[A]>>>L&255;return R};function i(R,A){var N=a;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=A(R)}function o(R,A){this.h=A;for(var N=[],L=!0,V=R.length-1;0<=V;V--){var B=R[V]|0;L&&B==A||(N[V]=B,L=!1)}this.g=N}var a={};function c(R){return-128<=R&&128>R?i(R,function(A){return new o([A|0],0>A?-1:0)}):new o([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return b(u(-R));for(var A=[],N=1,L=0;R>=N;L++)A[L]=R/N|0,N*=4294967296;return new o(A,0)}function d(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return b(d(R.substring(1),A));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=u(Math.pow(A,8)),L=f,V=0;V<R.length;V+=8){var B=Math.min(8,R.length-V),D=parseInt(R.substring(V,V+B),A);8>B?(B=u(Math.pow(A,B)),L=L.j(B).add(u(D))):(L=L.j(N),L=L.add(u(D)))}return L}var f=c(0),g=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(I(this))return-b(this).m();for(var R=0,A=1,N=0;N<this.g.length;N++){var L=this.i(N);R+=(0<=L?L:4294967296+L)*A,A*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(I(this))return"-"+b(this).toString(R);for(var A=u(Math.pow(R,6)),N=this,L="";;){var V=K(N,A).g;N=O(N,V.j(A));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=V,w(N))return B+L;for(;6>B.length;)B="0"+B;L=B+L}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(var A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function I(R){return R.h==-1}n.l=function(R){return R=O(this,R),I(R)?-1:w(R)?0:1};function b(R){for(var A=R.g.length,N=[],L=0;L<A;L++)N[L]=~R.g[L];return new o(N,~R.h).add(g)}n.abs=function(){return I(this)?b(this):this},n.add=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],L=0,V=0;V<=A;V++){var B=L+(this.i(V)&65535)+(R.i(V)&65535),D=(B>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);L=D>>>16,B&=65535,D&=65535,N[V]=D<<16|B}return new o(N,N[N.length-1]&-2147483648?-1:0)};function O(R,A){return R.add(b(A))}n.j=function(R){if(w(this)||w(R))return f;if(I(this))return I(R)?b(this).j(b(R)):b(b(this).j(R));if(I(R))return b(this.j(b(R)));if(0>this.l(v)&&0>R.l(v))return u(this.m()*R.m());for(var A=this.g.length+R.g.length,N=[],L=0;L<2*A;L++)N[L]=0;for(L=0;L<this.g.length;L++)for(var V=0;V<R.g.length;V++){var B=this.i(L)>>>16,D=this.i(L)&65535,Zt=R.i(V)>>>16,jn=R.i(V)&65535;N[2*L+2*V]+=D*jn,x(N,2*L+2*V),N[2*L+2*V+1]+=B*jn,x(N,2*L+2*V+1),N[2*L+2*V+1]+=D*Zt,x(N,2*L+2*V+1),N[2*L+2*V+2]+=B*Zt,x(N,2*L+2*V+2)}for(L=0;L<A;L++)N[L]=N[2*L+1]<<16|N[2*L];for(L=A;L<2*A;L++)N[L]=0;return new o(N,0)};function x(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function M(R,A){this.g=R,this.h=A}function K(R,A){if(w(A))throw Error("division by zero");if(w(R))return new M(f,f);if(I(R))return A=K(b(R),A),new M(b(A.g),b(A.h));if(I(A))return A=K(R,b(A)),new M(b(A.g),A.h);if(30<R.g.length){if(I(R)||I(A))throw Error("slowDivide_ only works with positive integers.");for(var N=g,L=A;0>=L.l(R);)N=ie(N),L=ie(L);var V=re(N,1),B=re(L,1);for(L=re(L,2),N=re(N,2);!w(L);){var D=B.add(L);0>=D.l(R)&&(V=V.add(N),B=D),L=re(L,1),N=re(N,1)}return A=O(R,V.j(A)),new M(V,A)}for(V=f;0<=R.l(A);){for(N=Math.max(1,Math.floor(R.m()/A.m())),L=Math.ceil(Math.log(N)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),B=u(N),D=B.j(A);I(D)||0<D.l(R);)N-=L,B=u(N),D=B.j(A);w(B)&&(B=g),V=V.add(B),R=O(R,D)}return new M(V,R)}n.A=function(R){return K(this,R).h},n.and=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)&R.i(L);return new o(N,this.h&R.h)},n.or=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)|R.i(L);return new o(N,this.h|R.h)},n.xor=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],L=0;L<A;L++)N[L]=this.i(L)^R.i(L);return new o(N,this.h^R.h)};function ie(R){for(var A=R.g.length+1,N=[],L=0;L<A;L++)N[L]=R.i(L)<<1|R.i(L-1)>>>31;return new o(N,R.h)}function re(R,A){var N=A>>5;A%=32;for(var L=R.g.length-N,V=[],B=0;B<L;B++)V[B]=0<A?R.i(B+N)>>>A|R.i(B+N+1)<<32-A:R.i(B+N);return new o(V,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,oC=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,pa=o}).apply(typeof Pb<"u"?Pb:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aC,bu,cC,af,p_,lC,uC,hC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,y){return l==Array.prototype||l==Object.prototype||(l[p]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function r(l,p){if(p)e:{var y=s;l=l.split(".");for(var T=0;T<l.length-1;T++){var U=l[T];if(!(U in y))break e;y=y[U]}l=l[l.length-1],T=y[l],p=p(T),p!=T&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}function i(l,p){l instanceof String&&(l+="");var y=0,T=!1,U={next:function(){if(!T&&y<l.length){var G=y++;return{value:p(G,l[G]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}r("Array.prototype.values",function(l){return l||function(){return i(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function u(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function d(l,p,y){return l.call.apply(l.bind,arguments)}function f(l,p,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),l.apply(p,U)}}return function(){return l.apply(p,arguments)}}function g(l,p,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function v(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function w(l,p){function y(){}y.prototype=p.prototype,l.aa=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,U,G){for(var le=Array(arguments.length-2),st=2;st<arguments.length;st++)le[st-2]=arguments[st];return p.prototype[U].apply(T,le)}}function I(l){const p=l.length;if(0<p){const y=Array(p);for(let T=0;T<p;T++)y[T]=l[T];return y}return[]}function b(l,p){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(c(T)){const U=l.length||0,G=T.length||0;l.length=U+G;for(let le=0;le<G;le++)l[U+le]=T[le]}else l.push(T)}}class O{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(l){return/^[\s\xa0]*$/.test(l)}function M(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function K(l){return K[" "](l),l}K[" "]=function(){};var ie=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function re(l,p,y){for(const T in l)p.call(y,l[T],T,l)}function R(l,p){for(const y in l)p.call(void 0,l[y],y,l)}function A(l){const p={};for(const y in l)p[y]=l[y];return p}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(l,p){let y,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(y in T)l[y]=T[y];for(let G=0;G<N.length;G++)y=N[G],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function V(l){var p=1;l=l.split(":");const y=[];for(;0<p&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function B(l){a.setTimeout(()=>{throw l},0)}function D(){var l=An;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class Zt{constructor(){this.h=this.g=null}add(p,y){const T=jn.get();T.set(p,y),this.h?this.h.next=T:this.g=T,this.h=T}}var jn=new O(()=>new Ot,l=>l.reset());class Ot{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,xe=!1,An=new Zt,_s=()=>{const l=a.Promise.resolve(void 0);Be=()=>{l.then(ns)}};var ns=()=>{for(var l;l=D();){try{l.h.call(l.g)}catch(y){B(y)}var p=jn;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}xe=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var $s=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return l}();function ss(l,p){if(_t.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(ie){e:{try{K(p.nodeName);var U=!0;break e}catch{}U=!1}U||(p=null)}}else y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Sn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ss.aa.h.call(this)}}w(ss,_t);var Sn={2:"touch",3:"pen",4:"mouse"};ss.prototype.h=function(){ss.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),$=0;function he(l,p,y,T,U){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!T,this.ha=U,this.key=++$,this.da=this.fa=!1}function ye(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ve(l){this.src=l,this.g={},this.h=0}Ve.prototype.add=function(l,p,y,T,U){var G=l.toString();l=this.g[G],l||(l=this.g[G]=[],this.h++);var le=S(l,p,T,U);return-1<le?(p=l[le],y||(p.fa=!1)):(p=new he(p,this.src,G,!!T,U),p.fa=y,l.push(p)),p};function $e(l,p){var y=p.type;if(y in l.g){var T=l.g[y],U=Array.prototype.indexOf.call(T,p,void 0),G;(G=0<=U)&&Array.prototype.splice.call(T,U,1),G&&(ye(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function S(l,p,y,T){for(var U=0;U<l.length;++U){var G=l[U];if(!G.da&&G.listener==p&&G.capture==!!y&&G.ha==T)return U}return-1}var C="closure_lm_"+(1e6*Math.random()|0),q={};function X(l,p,y,T,U){if(Array.isArray(p)){for(var G=0;G<p.length;G++)X(l,p[G],y,T,U);return null}return y=we(y),l&&l[Y]?l.K(p,y,u(T)?!!T.capture:!!T,U):F(l,p,y,!1,T,U)}function F(l,p,y,T,U,G){if(!p)throw Error("Invalid event type");var le=u(U)?!!U.capture:!!U,st=be(l);if(st||(l[C]=st=new Ve(l)),y=st.add(p,y,T,le,G),y.proxy)return y;if(T=te(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)$s||(U=le),U===void 0&&(U=!1),l.addEventListener(p.toString(),T,U);else if(l.attachEvent)l.attachEvent(ae(p.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function te(){function l(y){return p.call(l.src,l.listener,y)}const p=ne;return l}function de(l,p,y,T,U){if(Array.isArray(p))for(var G=0;G<p.length;G++)de(l,p[G],y,T,U);else T=u(T)?!!T.capture:!!T,y=we(y),l&&l[Y]?(l=l.i,p=String(p).toString(),p in l.g&&(G=l.g[p],y=S(G,y,T,U),-1<y&&(ye(G[y]),Array.prototype.splice.call(G,y,1),G.length==0&&(delete l.g[p],l.h--)))):l&&(l=be(l))&&(p=l.g[p.toString()],l=-1,p&&(l=S(p,y,T,U)),(y=-1<l?p[l]:null)&&ce(y))}function ce(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Y])$e(p.i,l);else{var y=l.type,T=l.proxy;p.removeEventListener?p.removeEventListener(y,T,l.capture):p.detachEvent?p.detachEvent(ae(y),T):p.addListener&&p.removeListener&&p.removeListener(T),(y=be(p))?($e(y,l),y.h==0&&(y.src=null,p[C]=null)):ye(l)}}}function ae(l){return l in q?q[l]:q[l]="on"+l}function ne(l,p){if(l.da)l=!0;else{p=new ss(p,this);var y=l.listener,T=l.ha||l.src;l.fa&&ce(l),l=y.call(T,p)}return l}function be(l){return l=l[C],l instanceof Ve?l:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(l){return typeof l=="function"?l:(l[pe]||(l[pe]=function(p){return l.handleEvent(p)}),l[pe])}function ge(){gt.call(this),this.i=new Ve(this),this.M=this,this.F=null}w(ge,gt),ge.prototype[Y]=!0,ge.prototype.removeEventListener=function(l,p,y,T){de(this,l,p,y,T)};function Ie(l,p){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=p.type||p,typeof p=="string")p=new _t(p,l);else if(p instanceof _t)p.target=p.target||l;else{var U=p;p=new _t(T,l),L(p,U)}if(U=!0,y)for(var G=y.length-1;0<=G;G--){var le=p.g=y[G];U=et(le,T,!0,p)&&U}if(le=p.g=l,U=et(le,T,!0,p)&&U,U=et(le,T,!1,p)&&U,y)for(G=0;G<y.length;G++)le=p.g=y[G],U=et(le,T,!1,p)&&U}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var y=l.g[p],T=0;T<y.length;T++)ye(y[T]);delete l.g[p],l.h--}}this.F=null},ge.prototype.K=function(l,p,y,T){return this.i.add(String(l),p,!1,y,T)},ge.prototype.L=function(l,p,y,T){return this.i.add(String(l),p,!0,y,T)};function et(l,p,y,T){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var U=!0,G=0;G<p.length;++G){var le=p[G];if(le&&!le.da&&le.capture==y){var st=le.listener,en=le.ha||le.src;le.fa&&$e(l.i,le),U=st.call(en,T)!==!1&&U}}return U&&!T.defaultPrevented}function Ge(l,p,y){if(typeof l=="function")y&&(l=g(l,y));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function rn(l){l.g=Ge(()=>{l.g=null,l.i&&(l.i=!1,rn(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Kt extends gt{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:rn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(l){gt.call(this),this.h=l,this.g={}}w(zt,gt);var on=[];function rs(l){re(l.g,function(p,y){this.g.hasOwnProperty(y)&&ce(p)},l),l.g={}}zt.prototype.N=function(){zt.aa.N.call(this),rs(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ti=a.JSON.stringify,Mt=a.JSON.parse,is=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function bi(){}bi.prototype.h=null;function Yh(l){return l.h||(l.h=l.i())}function Jh(){}var Io={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kl(){_t.call(this,"d")}w(kl,_t);function Dl(){_t.call(this,"c")}w(Dl,_t);var Mr={},Xh=null;function Ga(){return Xh=Xh||new ge}Mr.La="serverreachability";function Zh(l){_t.call(this,Mr.La,l)}w(Zh,_t);function lr(l){const p=Ga();Ie(p,new Zh(p))}Mr.STAT_EVENT="statevent";function ed(l,p){_t.call(this,Mr.STAT_EVENT,l),this.stat=p}w(ed,_t);function Rn(l){const p=Ga();Ie(p,new ed(p,l))}Mr.Ma="timingevent";function Bs(l,p){_t.call(this,Mr.Ma,l),this.size=p}w(Bs,_t);function Ii(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function gm(l,p,y,T,U,G){l.info(function(){if(l.g)if(G)for(var le="",st=G.split("&"),en=0;en<st.length;en++){var je=st[en].split("=");if(1<je.length){var $t=je[0];je=je[1];var ln=$t.split("_");le=2<=ln.length&&ln[1]=="type"?le+($t+"="+je+"&"):le+($t+"=redacted&")}}else le=null;else le=G;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+p+`
`+y+`
`+le})}function _m(l,p,y,T,U,G,le){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+p+`
`+y+`
`+G+" "+le})}function Cs(l,p,y,T){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Si(l,y)+(T?" "+T:"")})}function Ai(l,p){l.info(function(){return"TIMEOUT: "+p})}Ao.prototype.info=function(){};function Si(l,p){if(!l.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var G=U[0];if(G!="noop"&&G!="stop"&&G!="close")for(var le=1;le<U.length;le++)U[le]=""}}}}return Ti(y)}catch{return p}}var Fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},td={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},So;function Qa(){}w(Qa,bi),Qa.prototype.g=function(){return new XMLHttpRequest},Qa.prototype.i=function(){return{}},So=new Qa;function ur(l,p,y,T){this.j=l,this.i=p,this.l=y,this.R=T||1,this.U=new zt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nd}function nd(){this.i=null,this.g="",this.h=!1}var sd={},Ol={};function xl(l,p,y){l.L=1,l.v=qs(js(p)),l.m=y,l.P=!0,Ll(l,null)}function Ll(l,p){l.F=Date.now(),Ya(l),l.A=js(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Cn(y.i,"t",T),l.C=0,y=l.j.J,l.h=new nd,l.g=Di(l.j,y?p:null,!l.m),0<l.O&&(l.M=new Kt(g(l.Y,l,l.g),l.O)),p=l.U,y=l.g,T=l.ca;var U="readystatechange";Array.isArray(U)||(U&&(on[0]=U.toString()),U=on);for(var G=0;G<U.length;G++){var le=X(y,U[G],T||p.handleEvent,!1,p.h||p);if(!le)break;p.g[le.key]=le}p=l.H?A(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),lr(),gm(l.i,l.u,l.A,l.l,l.R,l.m)}ur.prototype.ca=function(l){l=l.target;const p=this.M;p&&Qt(l)==3?p.j():this.Y(l)},ur.prototype.Y=function(l){try{if(l==this.g)e:{const ln=Qt(this.g);var p=this.g.Ba();const gr=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||Nn(this.g)))){this.J||ln!=4||p==7||(p==8||0>=gr?lr(3):lr(2)),Vl(this);var y=this.g.Z();this.X=y;t:if(Ro(this)){var T=Nn(this.g);l="";var U=T.length,G=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),Co(this);var le="";break t}this.h.i=new a.TextDecoder}for(p=0;p<U;p++)this.h.h=!0,l+=this.h.i.decode(T[p],{stream:!(G&&p==U-1)});T.length=0,this.h.g+=l,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=y==200,_m(this.i,this.u,this.A,this.l,this.R,ln,y),this.o){if(this.T&&!this.K){t:{if(this.g){var st,en=this.g;if((st=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(st)){var je=st;break t}}je=null}if(y=je)Cs(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ja(this,y);else{this.o=!1,this.s=3,Rn(12),hr(this),Co(this);break e}}if(this.P){y=!0;let ys;for(;!this.J&&this.C<le.length;)if(ys=ym(this,le),ys==Ol){ln==4&&(this.s=4,Rn(14),y=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(ys==sd){this.s=4,Rn(15),Cs(this.i,this.l,le,"[Invalid Chunk]"),y=!1;break}else Cs(this.i,this.l,ys,null),Ja(this,ys);if(Ro(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||le.length!=0||this.h.h||(this.s=1,Rn(16),y=!1),this.o=this.o&&y,!y)Cs(this.i,this.l,le,"[Invalid Chunked Response]"),hr(this),Co(this);else if(0<le.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Oo($t),$t.M=!0,Rn(11))}}else Cs(this.i,this.l,le,null),Ja(this,le);ln==4&&hr(this),this.o&&!this.J&&(ln==4?md(this.j,this):(this.o=!1,Ya(this)))}else qr(this.g),y==400&&0<le.indexOf("Unknown SID")?(this.s=3,Rn(12)):(this.s=0,Rn(13)),hr(this),Co(this)}}}catch{}finally{}};function Ro(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function ym(l,p){var y=l.C,T=p.indexOf(`
`,y);return T==-1?Ol:(y=Number(p.substring(y,T)),isNaN(y)?sd:(T+=1,T+y>p.length?Ol:(p=p.slice(T,T+y),l.C=T+y,p)))}ur.prototype.cancel=function(){this.J=!0,hr(this)};function Ya(l){l.S=Date.now()+l.I,rd(l,l.I)}function rd(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ii(g(l.ba,l),p)}function Vl(l){l.B&&(a.clearTimeout(l.B),l.B=null)}ur.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Ai(this.i,this.A),this.L!=2&&(lr(),Rn(17)),hr(this),this.s=2,Co(this)):rd(this,this.S-l)};function Co(l){l.j.G==0||l.J||md(l.j,l)}function hr(l){Vl(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,rs(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Ja(l,p){try{var y=l.j;if(y.G!=0&&(y.g==l||Ml(y.h,l))){if(!l.K&&Ml(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)os(y),sc(y);else break e;pr(y),Rn(18)}}else y.za=U[1],0<y.za-y.T&&37500>U[2]&&y.F&&y.v==0&&!y.C&&(y.C=Ii(g(y.Za,y),6e3));if(1>=ad(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Ns(y,11)}else if((l.K||y.g==l)&&os(y),!x(p))for(U=y.Da.g.parse(p),p=0;p<U.length;p++){let je=U[p];if(y.T=je[0],je=je[1],y.G==2)if(je[0]=="c"){y.K=je[1],y.ia=je[2];const $t=je[3];$t!=null&&(y.la=$t,y.j.info("VER="+y.la));const ln=je[4];ln!=null&&(y.Aa=ln,y.j.info("SVER="+y.Aa));const gr=je[5];gr!=null&&typeof gr=="number"&&0<gr&&(T=1.5*gr,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const ys=l.g;if(ys){const Kr=ys.g?ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var G=T.h;G.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Fl(G,G.h),G.h=null))}if(T.D){const Xl=ys.g?ys.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(T.ya=Xl,at(T.I,T.D,Xl))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var le=l;if(T.qa=gd(T,T.J?T.ia:null,T.W),le.K){cd(T.h,le);var st=le,en=T.L;en&&(st.I=en),st.B&&(Vl(st),Ya(st)),T.g=le}else zl(T);0<y.i.length&&qn(y)}else je[0]!="stop"&&je[0]!="close"||Ns(y,7);else y.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Ns(y,7):Kl(y):je[0]!="noop"&&y.l&&y.l.ta(je),y.v=0)}}lr(4)}catch{}}var vm=class{constructor(l,p){this.g=l,this.map=p}};function id(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function od(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ad(l){return l.h?1:l.g?l.g.size:0}function Ml(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Fl(l,p){l.g?l.g.add(p):l.h=p}function cd(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}id.prototype.cancel=function(){if(this.i=ld(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ld(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const y of l.g.values())p=p.concat(y.D);return p}return I(l.i)}function Ri(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var p=[],y=l.length,T=0;T<y;T++)p.push(l[T]);return p}p=[],y=0;for(T in l)p[y++]=l[T];return p}function Em(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var p=[];l=l.length;for(var y=0;y<l;y++)p.push(y);return p}p=[],y=0;for(const T in l)p[y++]=T;return p}}}function wm(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var y=Em(l),T=Ri(l),U=T.length,G=0;G<U;G++)p.call(void 0,T[G],y&&y[G],l)}var Ci=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tm(l,p){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),U=null;if(0<=T){var G=l[y].substring(0,T);U=l[y].substring(T+1)}else G=l[y];p(G,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ur(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ur){this.h=l.h,Xa(this,l.j),this.o=l.o,this.g=l.g,Za(this,l.s),this.l=l.l;var p=l.i,y=new No;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),ud(this,y),this.m=l.m}else l&&(p=String(l).match(Ci))?(this.h=!1,Xa(this,p[1]||"",!0),this.o=dr(p[2]||""),this.g=dr(p[3]||"",!0),Za(this,p[4]),this.l=dr(p[5]||"",!0),ud(this,p[6]||"",!0),this.m=dr(p[7]||"")):(this.h=!1,this.i=new No(null,this.h))}Ur.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Po(p,hd,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Po(p,hd,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Po(y,y.charAt(0)=="/"?Am:Im,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Po(y,Ul)),l.join("")};function js(l){return new Ur(l)}function Xa(l,p,y){l.j=y?dr(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Za(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function ud(l,p,y){p instanceof No?(l.i=p,yn(l.i,l.h)):(y||(p=Po(p,Sm)),l.i=new No(p,l.h))}function at(l,p,y){l.i.set(p,y)}function qs(l){return at(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function dr(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Po(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,bm),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function bm(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hd=/[#\/\?@]/g,Im=/[#\?:]/g,Am=/[#\?]/g,Sm=/[#\?@]/g,Ul=/#/g;function No(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function fr(l){l.g||(l.g=new Map,l.h=0,l.i&&Tm(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}n=No.prototype,n.add=function(l,p){fr(this),this.i=null,l=Gt(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function $r(l,p){fr(l),p=Gt(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function an(l,p){return fr(l),p=Gt(l,p),l.g.has(p)}n.forEach=function(l,p){fr(this),this.g.forEach(function(y,T){y.forEach(function(U){l.call(p,U,T,this)},this)},this)},n.na=function(){fr(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let T=0;T<p.length;T++){const U=l[T];for(let G=0;G<U.length;G++)y.push(p[T])}return y},n.V=function(l){fr(this);let p=[];if(typeof l=="string")an(this,l)&&(p=p.concat(this.g.get(Gt(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)p=p.concat(l[y])}return p},n.set=function(l,p){return fr(this),this.i=null,l=Gt(this,l),an(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},n.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Cn(l,p,y){$r(l,p),0<y.length&&(l.i=null,l.g.set(Gt(l,p),I(y)),l.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var T=p[y];const G=encodeURIComponent(String(T)),le=this.V(T);for(T=0;T<le.length;T++){var U=G;le[T]!==""&&(U+="="+encodeURIComponent(String(le[T]))),l.push(U)}}return this.i=l.join("&")};function Gt(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function yn(l,p){p&&!l.j&&(fr(l),l.i=null,l.g.forEach(function(y,T){var U=T.toLowerCase();T!=U&&($r(this,T),Cn(this,U,y))},l)),l.j=p}function ec(l,p){const y=new Ao;if(a.Image){const T=new Image;T.onload=v(Pn,y,"TestLoadImage: loaded",!0,p,T),T.onerror=v(Pn,y,"TestLoadImage: error",!1,p,T),T.onabort=v(Pn,y,"TestLoadImage: abort",!1,p,T),T.ontimeout=v(Pn,y,"TestLoadImage: timeout",!1,p,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else p(!1)}function Pi(l,p){const y=new Ao,T=new AbortController,U=setTimeout(()=>{T.abort(),Pn(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:T.signal}).then(G=>{clearTimeout(U),G.ok?Pn(y,"TestPingServer: ok",!0,p):Pn(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),Pn(y,"TestPingServer: error",!1,p)})}function Pn(l,p,y,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(y)}catch{}}function Ni(){this.g=new is}function dd(l,p,y){const T=y||"";try{wm(l,function(U,G){let le=U;u(U)&&(le=Ti(U)),p.push(T+G+"="+encodeURIComponent(le))})}catch(U){throw p.push(T+"type="+encodeURIComponent("_badmap")),U}}function ki(l){this.l=l.Ub||null,this.j=l.eb||!1}w(ki,bi),ki.prototype.g=function(){return new Hs(this.l,this.j)},ki.prototype.i=function(l){return function(){return l}}({});function Hs(l,p){ge.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Hs,ge),n=Hs.prototype,n.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,jr(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Br(this):jr(this),this.readyState==3&&$l(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Br(this))},n.Qa=function(l){this.g&&(this.response=l,Br(this))},n.ga=function(){this.g&&Br(this)};function Br(l){l.readyState=4,l.l=null,l.j=null,l.v=null,jr(l)}n.setRequestHeader=function(l,p){this.u.append(l,p)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function jr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Bl(l){let p="";return re(l,function(y,T){p+=T,p+=":",p+=y,p+=`\r
`}),p}function tc(l,p,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Bl(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):at(l,p,y))}function Et(l){ge.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Et,ge);var fd=/^https?$/i,pd=["POST","PUT"];n=Et.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,p,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():So.g(),this.v=this.o?Yh(this.o):Yh(So),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(G){jl(this,G);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)y.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())y.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(G=>G.toLowerCase()=="content-type"),U=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pd,p,void 0))||T||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,le]of y)this.g.setRequestHeader(G,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wl(this),this.u=!0,this.g.send(l),this.u=!1}catch(G){jl(this,G)}};function jl(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,ql(l),ko(l)}function ql(l){l.A||(l.A=!0,Ie(l,"complete"),Ie(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ie(this,"complete"),Ie(this,"abort"),ko(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ko(this,!0)),Et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Hl(this):this.bb())},n.bb=function(){Hl(this)};function Hl(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Qt(l)!=4||l.Z()!=2)){if(l.u&&Qt(l)==4)Ge(l.Ea,0,l);else if(Ie(l,"readystatechange"),Qt(l)==4){l.h=!1;try{const le=l.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var T;if(T=le===0){var U=String(l.D).match(Ci)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),T=!fd.test(U?U.toLowerCase():"")}y=T}if(y)Ie(l,"complete"),Ie(l,"success");else{l.m=6;try{var G=2<Qt(l)?l.g.statusText:""}catch{G=""}l.l=G+" ["+l.Z()+"]",ql(l)}}finally{ko(l)}}}}function ko(l,p){if(l.g){Wl(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Ie(l,"ready");try{y.onreadystatechange=T}catch{}}}function Wl(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Qt(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),Mt(p)}};function Nn(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function qr(l){const p={};l=(l.g&&2<=Qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(x(l[T]))continue;var y=V(l[T]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const G=p[U]||[];p[U]=G,G.push(y)}R(p,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cn(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function nc(l){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cn("baseRetryDelayMs",5e3,l),this.cb=cn("retryDelaySeedMs",1e4,l),this.Wa=cn("forwardChannelMaxRetries",2,l),this.wa=cn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new id(l&&l.concurrentRequestLimit),this.Da=new Ni,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nc.prototype,n.la=8,n.G=1,n.connect=function(l,p,y,T){Rn(0),this.W=l,this.H=p||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=gd(this,null,this.W),qn(this)};function Kl(l){if(rc(l),l.G==3){var p=l.U++,y=js(l.I);if(at(y,"SID",l.K),at(y,"RID",p),at(y,"TYPE","terminate"),Ps(l,y),p=new ur(l,l.j,p),p.L=2,p.v=qs(js(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=Di(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ya(p)}Ql(l)}function sc(l){l.g&&(Oo(l),l.g.cancel(),l.g=null)}function rc(l){sc(l),l.u&&(a.clearTimeout(l.u),l.u=null),os(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function qn(l){if(!od(l.h)&&!l.s){l.s=!0;var p=l.Ga;Be||_s(),xe||(Be(),xe=!0),An.add(p,l),l.B=0}}function Hr(l,p){return ad(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ii(g(l.Ga,l,p),Ws(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const U=new ur(this,this.j,l);let G=this.o;if(this.S&&(G?(G=A(G),L(G,this.S)):G=this.S),this.m!==null||this.O||(U.H=G,G=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=ic(this,U,p),y=js(this.I),at(y,"RID",l),at(y,"CVER",22),this.D&&at(y,"X-HTTP-Session-Id",this.D),Ps(this,y),G&&(this.O?p="headers="+encodeURIComponent(String(Bl(G)))+"&"+p:this.m&&tc(y,this.m,G)),Fl(this.h,U),this.Ua&&at(y,"TYPE","init"),this.P?(at(y,"$req",p),at(y,"SID","null"),U.T=!0,xl(U,y,null)):xl(U,y,p),this.G=2}}else this.G==3&&(l?Do(this,l):this.i.length==0||od(this.h)||Do(this))};function Do(l,p){var y;p?y=p.l:y=l.U++;const T=js(l.I);at(T,"SID",l.K),at(T,"RID",y),at(T,"AID",l.T),Ps(l,T),l.m&&l.o&&tc(T,l.m,l.o),y=new ur(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),p&&(l.i=p.D.concat(l.i)),p=ic(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Fl(l.h,y),xl(y,T,p)}function Ps(l,p){l.H&&re(l.H,function(y,T){at(p,T,y)}),l.l&&wm({},function(y,T){at(p,T,y)})}function ic(l,p,y){y=Math.min(l.i.length,y);var T=l.l?g(l.l.Na,l.l,l):null;e:{var U=l.i;let G=-1;for(;;){const le=["count="+y];G==-1?0<y?(G=U[0].g,le.push("ofs="+G)):G=0:le.push("ofs="+G);let st=!0;for(let en=0;en<y;en++){let je=U[en].g;const $t=U[en].map;if(je-=G,0>je)G=Math.max(0,U[en].g-100),st=!1;else try{dd($t,le,"req"+je+"_")}catch{T&&T($t)}}if(st){T=le.join("&");break e}}}return l=l.i.splice(0,y),p.D=l,T}function zl(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;Be||_s(),xe||(Be(),xe=!0),An.add(p,l),l.v=0}}function pr(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ii(g(l.Fa,l),Ws(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Gl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ii(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rn(10),sc(this),Gl(this))};function Oo(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Gl(l){l.g=new ur(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=js(l.qa);at(p,"RID","rpc"),at(p,"SID",l.K),at(p,"AID",l.T),at(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&at(p,"TO",l.ja),at(p,"TYPE","xmlhttp"),Ps(l,p),l.m&&l.o&&tc(p,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=qs(js(p)),y.m=null,y.P=!0,Ll(y,l)}n.Za=function(){this.C!=null&&(this.C=null,sc(this),pr(this),Rn(19))};function os(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function md(l,p){var y=null;if(l.g==p){os(l),Oo(l),l.g=null;var T=2}else if(Ml(l.h,p))y=p.D,cd(l.h,p),T=1;else return;if(l.G!=0){if(p.o)if(T==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var U=l.B;T=Ga(),Ie(T,new Bs(T,y)),qn(l)}else zl(l);else if(U=p.s,U==3||U==0&&0<p.X||!(T==1&&Hr(l,p)||T==2&&pr(l)))switch(y&&0<y.length&&(p=l.h,p.i=p.i.concat(y)),U){case 1:Ns(l,5);break;case 4:Ns(l,10);break;case 3:Ns(l,6);break;default:Ns(l,2)}}}function Ws(l,p){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*p}function Ns(l,p){if(l.j.info("Error code "+p),p==2){var y=g(l.fb,l),T=l.Xa;const U=!T;T=new Ur(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xa(T,"https"),qs(T),U?ec(T.toString(),y):Pi(T.toString(),y)}else Rn(2);l.G=0,l.l&&l.l.sa(p),Ql(l),rc(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Rn(2)):(this.j.info("Failed to ping google.com"),Rn(1))};function Ql(l){if(l.G=0,l.ka=[],l.l){const p=ld(l.h);(p.length!=0||l.i.length!=0)&&(b(l.ka,p),b(l.ka,l.i),l.h.i.length=0,I(l.i),l.i.length=0),l.l.ra()}}function gd(l,p,y){var T=y instanceof Ur?js(y):new Ur(y);if(T.g!="")p&&(T.g=p+"."+T.g),Za(T,T.s);else{var U=a.location;T=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;var G=new Ur(null);T&&Xa(G,T),p&&(G.g=p),U&&Za(G,U),y&&(G.l=y),T=G}return y=l.D,p=l.ya,y&&p&&at(T,y,p),at(T,"VER",l.la),Ps(l,T),T}function Di(l,p,y){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new Et(new ki({eb:y})):new Et(l.pa),p.Ha(l.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oc(){}n=oc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mr(){}mr.prototype.g=function(l,p){return new Hn(l,p)};function Hn(l,p){ge.call(this),this.g=new nc(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!x(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!x(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Wr(this)}w(Hn,ge),Hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){Kl(this.g)},Hn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Ti(l),l=y);p.i.push(new vm(p.Ya++,l)),p.G==3&&qn(p)},Hn.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,Hn.aa.N.call(this)};function Yl(l){kl.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}w(Yl,kl);function Jl(){Dl.call(this),this.status=1}w(Jl,Dl);function Wr(l){this.g=l}w(Wr,oc),Wr.prototype.ua=function(){Ie(this.g,"a")},Wr.prototype.ta=function(l){Ie(this.g,new Yl(l))},Wr.prototype.sa=function(l){Ie(this.g,new Jl)},Wr.prototype.ra=function(){Ie(this.g,"b")},mr.prototype.createWebChannel=mr.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,hC=function(){return new mr},uC=function(){return Ga()},lC=Mr,p_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,af=Fr,td.COMPLETE="complete",cC=td,Jh.EventType=Io,Io.OPEN="a",Io.CLOSE="b",Io.ERROR="c",Io.MESSAGE="d",ge.prototype.listen=ge.prototype.K,bu=Jh,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,aC=Et}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const Nb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new ml("@firebase/firestore");function wc(){return io.logLevel}function Qj(n){io.setLogLevel(n)}function ee(n,...e){if(io.logLevel<=Ue.DEBUG){const t=e.map(Yy);io.debug(`Firestore (${yl}): ${n}`,...t)}}function qt(n,...e){if(io.logLevel<=Ue.ERROR){const t=e.map(Yy);io.error(`Firestore (${yl}): ${n}`,...t)}}function Or(n,...e){if(io.logLevel<=Ue.WARN){const t=e.map(Yy);io.warn(`Firestore (${yl}): ${n}`,...t)}}function Yy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n="Unexpected state"){const e=`FIRESTORE (${yl}) INTERNAL ASSERTION FAILED: `+n;throw qt(e),new Error(e)}function Ee(n,e){n||_e()}function Yj(n,e){n||_e()}function fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pn.UNAUTHENTICATED))}shutdown(){}}class Xj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zj{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0);let s=this.i;const r=c=>this.i!==s?(s=this.i,t(c)):Promise.resolve();let i=new bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bn,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},a=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ee(typeof s.accessToken=="string"),new dC(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new pn(e)}}class eq{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tq{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new eq(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nq{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sq{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ee(this.o===void 0);const s=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ee(typeof t.token=="string"),this.R=t.token,new nq(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=rq(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<t&&(s+=e.charAt(r[i]%e.length))}return s}}function Ce(n,e){return n<e?-1:n>e?1:0}function Gc(n,e,t){return n.length===e.length&&n.every((s,r)=>t(s,e[r]))}function pC(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Dt(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Dt(0,0))}static max(){return new Te(new Dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,t,s){t===void 0?t=0:t>e.length&&_e(),s===void 0?s=e.length-t:s>e.length-t&&_e(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ah.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ah?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class He extends ah{construct(e,t,s){return new He(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(r=>r.length>0))}return new He(t)}static emptyPath(){return new He([])}}const iq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends ah{construct(e,t,s){return new Nt(e,t,s)}static isValidIdentifier(e){return iq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Nt(["__name__"])}static fromServerFormat(e){const t=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new Z(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new Z(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(t)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(He.fromString(e))}static fromName(e){return new ue(He.fromString(e).popFirst(5))}static empty(){return new ue(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return He.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new He(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,s,r){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=r}}function m_(n){return n.fields.find(e=>e.kind===2)}function Xo(n){return n.fields.filter(e=>e.kind!==2)}Mf.UNKNOWN_ID=-1;class cf{constructor(e,t){this.fieldPath=e,this.kind=t}}class ch{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ch(0,Ss.min())}}function mC(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=Te.fromTimestamp(s===1e9?new Dt(t+1,0):new Dt(t,s));return new Ss(r,ue.empty(),e)}function gC(n){return new Ss(n.readTime,n.key,-1)}class Ss{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ss(Te.min(),ue.empty(),-1)}static max(){return new Ss(Te.max(),ue.empty(),-1)}}function Jy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:Ce(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(n){if(n.code!==z.FAILED_PRECONDITION||n.message!==_C)throw n;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):H.reject(t)}static resolve(e){return new H((t,s)=>{t(e)})}static reject(e){return new H((t,s)=>{s(e)})}static waitFor(e){return new H((t,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&t()},c=>s(c))}),o=!0,i===r&&t()})}static or(e){let t=H.resolve(!1);for(const s of e)t=t.next(r=>r?H.resolve(r):s());return t}static forEach(e,t){const s=[];return e.forEach((r,i)=>{s.push(t.call(this,r,i))}),this.waitFor(s)}static mapArray(e,t){return new H((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;t(e[u]).next(d=>{o[u]=d,++a,a===i&&s(o)},d=>r(d))}})}static doWhile(e,t){return new H((s,r)=>{const i=()=>{e()===!0?t().next(()=>{i()},r):s()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new bn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Vu(e,t.error)):this.V.resolve()},this.transaction.onerror=s=>{const r=Xy(s.target.error);this.V.reject(new Vu(e,r))}}static open(e,t,s,r){try{return new Fp(t,e.transaction(r,s))}catch(i){throw new Vu(t,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ee("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new aq(t)}}class Cr{constructor(e,t,s){this.name=e,this.version=t,this.p=s,Cr.S(nn())===12.2&&qt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ee("SimpleDb","Removing database:",e),ta(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Py())return!1;if(Cr.v())return!0;const e=nn(),t=Cr.S(e),s=0<t&&t<10,r=vC(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}async M(e){return this.db||(ee("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,s)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=i=>{const o=i.target.result;t(o)},r.onblocked=()=>{s(new Vu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=i=>{const o=i.target.error;o.name==="VersionError"?s(new Z(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new Z(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new Vu(e,o))},r.onupgradeneeded=i=>{ee("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.O(o,r.transaction,i.oldVersion,this.version).next(()=>{ee("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,r){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Fp.open(this.db,e,i?"readonly":"readwrite",s),c=r(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),H.reject(u))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&o<3;if(ee("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class oq{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ta(this.B.delete())}}class Vu extends Z{constructor(e,t){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Eo(n){return n.name==="IndexedDbTransactionError"}class aq{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(ee("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(ee("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ta(s)}add(e){return ee("SimpleDb","ADD",this.store.name,e,e),ta(this.store.add(e))}get(e){return ta(this.store.get(e)).next(t=>(t===void 0&&(t=null),ee("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ee("SimpleDb","DELETE",this.store.name,e),ta(this.store.delete(e))}count(){return ee("SimpleDb","COUNT",this.store.name),ta(this.store.count())}U(e,t){const s=this.options(e,t),r=s.index?this.store.index(s.index):this.store;if(typeof r.getAll=="function"){const i=r.getAll(s.range);return new H((o,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{o(c.target.result)}})}{const i=this.cursor(s),o=[];return this.W(i,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new H((r,i)=>{s.onerror=o=>{i(o.target.error)},s.onsuccess=o=>{r(o.target.result)}})}j(e,t){ee("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const r=this.cursor(s);return this.W(r,(i,o,a)=>a.delete())}J(e,t){let s;t?s=e:(s={},t=e);const r=this.cursor(s);return this.W(r,t)}Y(e){const t=this.cursor({});return new H((s,r)=>{t.onerror=i=>{const o=Xy(i.target.error);r(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}W(e,t){const s=[];return new H((r,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void r();const c=new oq(a),u=t(a.primaryKey,a.value,c);if(u instanceof H){const d=u.catch(f=>(c.done(),H.reject(f)));s.push(d)}c.isDone?r():c.K===null?a.continue():a.continue(c.K)}}).next(()=>H.waitFor(s))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ta(n){return new H((e,t)=>{n.onsuccess=s=>{const r=s.target.result;e(r)},n.onerror=s=>{const r=Xy(s.target.error);t(r)}})}let kb=!1;function Xy(n){const e=Cr.S(nn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kb||(kb=!0,setTimeout(()=>{throw s},0)),s}}return n}class cq{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){ee("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{ee("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Eo(t)?ee("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await vo(t)}await this.X(6e4)})}}class lq{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const s=new Set;let r=t,i=!0;return H.doWhile(()=>i===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!s.has(o))return ee("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,r).next(a=>{r-=a,s.add(o)});i=!1})).next(()=>t-r)}ne(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,s).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(r,i)).next(a=>(ee("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let s=e;return t.changes.forEach((r,i)=>{const o=gC(i);Jy(o,s)>0&&(s=o)}),new Ss(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cs.oe=-1;function Dh(n){return n==null}function lh(n){return n===0&&1/n==-1/0}function EC(n){return typeof n=="number"&&Number.isInteger(n)&&!lh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Db(e)),e=uq(n.get(t),e);return Db(e)}function uq(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":t+="";break;case"":t+="";break;default:t+=i}}return t}function Db(n){return n+""}function Tr(n){const e=n.length;if(Ee(e>=2),e===2)return Ee(n.charAt(0)===""&&n.charAt(1)===""),He.emptyPath();const t=e-2,s=[];let r="";for(let i=0;i<e;){const o=n.indexOf("",i);switch((o<0||o>t)&&_e(),n.charAt(o+1)){case"":const a=n.substring(i,o);let c;r.length===0?c=a:(r+=a,c=r,r=""),s.push(c);break;case"":r+=n.substring(i,o),r+="\0";break;case"":r+=n.substring(i,o+1);break;default:_e()}i=o+2}return new He(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n,e){return[n,Zn(e)]}function wC(n,e,t){return[n,Zn(e),t]}const hq={},dq=["prefixPath","collectionGroup","readTime","documentId"],fq=["prefixPath","collectionGroup","documentId"],pq=["collectionGroup","readTime","prefixPath","documentId"],mq=["canonicalId","targetId"],gq=["targetId","path"],_q=["path","targetId"],yq=["collectionId","parent"],vq=["indexId","uid"],Eq=["uid","sequenceNumber"],wq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tq=["indexId","uid","orderedDocumentKey"],bq=["userId","collectionPath","documentId"],Iq=["userId","collectionPath","largestBatchId"],Aq=["userId","collectionGroup","largestBatchId"],TC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Sq=[...TC,"documentOverlays"],bC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IC=bC,Zy=[...IC,"indexConfiguration","indexState","indexEntries"],Rq=Zy,Cq=[...Zy,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends yC{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function sn(n,e){const t=fe(n);return Cr.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ba(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lt=class __{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new __(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new __(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}},Fd=class{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zi=class Jr{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??Jr.RED,this.left=r??Jr.EMPTY,this.right=i??Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,i){return new Jr(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Jr.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}};Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1;Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,t,s,r,i){return this}insert(e,t,s){return new Zi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lb(this.data.getIterator())}getIteratorFrom(e){return new Lb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class Lb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function dc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new ls([])}unionWith(e){let t=new ft(Nt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gc(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new SC("Invalid base64 string: "+i):i}}(e);return new Ut(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const Nq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function di(n){if(Ee(!!n),typeof n=="string"){let e=0;const t=Nq.exec(n);if(Ee(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Pt(n.seconds),nanos:Pt(n.nanos)}}function Pt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function oo(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ev(n){const e=n.mapValue.fields.__previous_value__;return Up(e)?ev(e):e}function uh(n){const e=di(n.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(e,t,s,r,i,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class ao{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ao("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ao&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},uf={nullValue:"NULL_VALUE"};function Aa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Up(n)?4:RC(n)?9007199254740991:$p(n)?10:11:_e()}function xr(n,e){if(n===e)return!0;const t=Aa(n);if(t!==Aa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return uh(n).isEqual(uh(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=di(r.timestampValue),a=di(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,i){return oo(r.bytesValue).isEqual(oo(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Pt(r.geoPointValue.latitude)===Pt(i.geoPointValue.latitude)&&Pt(r.geoPointValue.longitude)===Pt(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Pt(r.integerValue)===Pt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Pt(r.doubleValue),a=Pt(i.doubleValue);return o===a?lh(o)===lh(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Gc(n.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(xb(o)!==xb(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xr(o[c],a[c])))return!1;return!0}(n,e);default:return _e()}}function hh(n,e){return(n.values||[]).find(t=>xr(t,e))!==void 0}function co(n,e){if(n===e)return 0;const t=Aa(n),s=Aa(e);if(t!==s)return Ce(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Pt(i.integerValue||i.doubleValue),c=Pt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Vb(n.timestampValue,e.timestampValue);case 4:return Vb(uh(n),uh(e));case 5:return Ce(n.stringValue,e.stringValue);case 6:return function(i,o){const a=oo(i),c=oo(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=Ce(a[u],c[u]);if(d!==0)return d}return Ce(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ce(Pt(i.latitude),Pt(o.latitude));return a!==0?a:Ce(Pt(i.longitude),Pt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Mb(n.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,d;const f=i.fields||{},g=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,I=Ce(((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return I!==0?I:Mb(v,w)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ji.mapValue&&o===Ji.mapValue)return 0;if(i===Ji.mapValue)return 1;if(o===Ji.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const g=Ce(c[f],d[f]);if(g!==0)return g;const v=co(a[c[f]],u[d[f]]);if(v!==0)return v}return Ce(c.length,d.length)}(n.mapValue,e.mapValue);default:throw _e()}}function Vb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ce(n,e);const t=di(n),s=di(e),r=Ce(t.seconds,s.seconds);return r!==0?r:Ce(t.nanos,s.nanos)}function Mb(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const i=co(t[r],s[r]);if(i)return i}return Ce(t.length,s.length)}function Qc(n){return y_(n)}function y_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const s=di(t);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return oo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let s="[",r=!0;for(const i of t.values||[])r?r=!1:s+=",",s+=y_(i);return s+"]"}(n.arrayValue):"mapValue"in n?function(t){const s=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${y_(t.fields[o])}`;return r+"}"}(n.mapValue):_e()}function Sa(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function v_(n){return!!n&&"integerValue"in n}function dh(n){return!!n&&"arrayValue"in n}function Fb(n){return!!n&&"nullValue"in n}function Ub(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hf(n){return!!n&&"mapValue"in n}function $p(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Mu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ba(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Mu(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Mu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function RC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const CC={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Dq(n){return"nullValue"in n?uf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sa(ao.empty(),ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?$p(n)?CC:{mapValue:{}}:_e()}function Oq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sa(ao.empty(),ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?CC:"mapValue"in n?$p(n)?{mapValue:{}}:Ji:_e()}function $b(n,e){const t=co(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Bb(n,e){const t=co(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(t)}setAll(e){let t=Nt.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,s,r),s={},r=[],t=a.popLast()}o?s[a.lastSegment()]=Mu(o):r.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,s,r)}delete(e){const t=this.field(e.popLast());hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];hf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){Ba(t,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Tn(Mu(this.value))}}function PC(n){const e=[];return Ba(n.fields,(t,s)=>{const r=new Nt([t]);if(hf(s)){const i=PC(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new ls(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t,s,r,i,o,a){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new At(e,0,Te.min(),Te.min(),Te.min(),Tn.empty(),0)}static newFoundDocument(e,t,s,r){return new At(e,1,t,Te.min(),s,r,0)}static newNoDocument(e,t){return new At(e,2,t,Te.min(),Te.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,Te.min(),Te.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this.position=e,this.inclusive=t}}function jb(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const i=e[r],o=n.position[r];if(i.field.isKeyField()?s=ue.comparator(ue.fromName(o.referenceValue),t.key):s=co(o,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function qb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function xq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{}class We extends NC{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Lq(e,t,s):t==="array-contains"?new Fq(e,s):t==="in"?new VC(e,s):t==="not-in"?new Uq(e,s):t==="array-contains-any"?new $q(e,s):new We(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Vq(e,s):new Mq(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(co(t,this.value)):t!==null&&Aa(this.value)===Aa(t)&&this.matchesComparison(co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lt extends NC{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new lt(e,t)}matches(e){return Yc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Yc(n){return n.op==="and"}function E_(n){return n.op==="or"}function tv(n){return kC(n)&&Yc(n)}function kC(n){for(const e of n.filters)if(e instanceof lt)return!1;return!0}function w_(n){if(n instanceof We)return n.field.canonicalString()+n.op.toString()+Qc(n.value);if(tv(n))return n.filters.map(e=>w_(e)).join(",");{const e=n.filters.map(t=>w_(t)).join(",");return`${n.op}(${e})`}}function DC(n,e){return n instanceof We?function(s,r){return r instanceof We&&s.op===r.op&&s.field.isEqual(r.field)&&xr(s.value,r.value)}(n,e):n instanceof lt?function(s,r){return r instanceof lt&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&DC(o,r.filters[a]),!0):!1}(n,e):void _e()}function OC(n,e){const t=n.filters.concat(e);return lt.create(t,n.op)}function xC(n){return n instanceof We?function(t){return`${t.field.canonicalString()} ${t.op} ${Qc(t.value)}`}(n):n instanceof lt?function(t){return t.op.toString()+" {"+t.getFilters().map(xC).join(" ,")+"}"}(n):"Filter"}class Lq extends We{constructor(e,t,s){super(e,t,s),this.key=ue.fromName(s.referenceValue)}matches(e){const t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vq extends We{constructor(e,t){super(e,"in",t),this.keys=LC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Mq extends We{constructor(e,t){super(e,"not-in",t),this.keys=LC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ue.fromName(s.referenceValue))}class Fq extends We{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dh(t)&&hh(t.arrayValue,this.value)}}class VC extends We{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hh(this.value.arrayValue,t)}}class Uq extends We{constructor(e,t){super(e,"not-in",t)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!hh(this.value.arrayValue,t)}}class $q extends We{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>hh(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e,t=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function T_(n,e=null,t=[],s=[],r=null,i=null,o=null){return new Bq(n,e,t,s,r,i,o)}function Ra(n){const e=fe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>w_(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Dh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Qc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Qc(s)).join(",")),e.ue=t}return e.ue}function Oh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qb(n.startAt,e.startAt)&&qb(n.endAt,e.endAt)}function Ff(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Uf(n,e){return n.filters.filter(t=>t instanceof We&&t.field.isEqual(e))}function Hb(n,e,t){let s=uf,r=!0;for(const i of Uf(n,e)){let o=uf,a=!0;switch(i.op){case"<":case"<=":o=Dq(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=uf}$b({value:s,inclusive:r},{value:o,inclusive:a})<0&&(s=o,r=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];$b({value:s,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(s=o,r=t.inclusive);break}}return{value:s,inclusive:r}}function Wb(n,e,t){let s=Ji,r=!0;for(const i of Uf(n,e)){let o=Ji,a=!0;switch(i.op){case">=":case">":o=Oq(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=Ji}Bb({value:s,inclusive:r},{value:o,inclusive:a})>0&&(s=o,r=a)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];Bb({value:s,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(s=o,r=t.inclusive);break}}return{value:s,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t=null,s=[],r=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function MC(n,e,t,s,r,i,o,a){return new yi(n,e,t,s,r,i,o,a)}function vl(n){return new yi(n)}function Kb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function nv(n){return n.collectionGroup!==null}function Mc(n){const e=fe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ft(Nt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.ce.push(new fh(i,s))}),t.has(Nt.keyField().canonicalString())||e.ce.push(new fh(Nt.keyField(),s))}return e.ce}function es(n){const e=fe(n);return e.le||(e.le=jq(e,Mc(n))),e.le}function jq(n,e){if(n.limitType==="F")return T_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new fh(r.field,i)});const t=n.endAt?new lo(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new lo(n.startAt.position,n.startAt.inclusive):null;return T_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function b_(n,e){const t=n.filters.concat([e]);return new yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $f(n,e,t){return new yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xh(n,e){return Oh(es(n),es(e))&&n.limitType===e.limitType}function FC(n){return`${Ra(es(n))}|lt:${n.limitType}`}function Tc(n){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(r=>xC(r)).join(", ")}]`),Dh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(r=>Qc(r)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(r=>Qc(r)).join(",")),`Target(${s})`}(es(n))}; limitType=${n.limitType})`}function Lh(n,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ue.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(n,e)&&function(s,r){for(const i of Mc(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(n,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(n,e)&&function(s,r){return!(s.startAt&&!function(o,a,c){const u=jb(o,a,c);return o.inclusive?u<=0:u<0}(s.startAt,Mc(s),r)||s.endAt&&!function(o,a,c){const u=jb(o,a,c);return o.inclusive?u>=0:u>0}(s.endAt,Mc(s),r))}(n,e)}function UC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $C(n){return(e,t)=>{let s=!1;for(const r of Mc(n)){const i=qq(r,e,t);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function qq(n,e,t){const s=n.field.isKeyField()?ue.comparator(e.key,t.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?co(c,u):_e()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,(t,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return AC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hq=new Lt(ue.comparator);function us(){return Hq}const BC=new Lt(ue.comparator);function Iu(...n){let e=BC;for(const t of n)e=e.insert(t.key,t);return e}function jC(n){let e=BC;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function br(){return Fu()}function qC(){return Fu()}function Fu(){return new wo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wq=new Lt(ue.comparator),Kq=new ft(ue.comparator);function De(...n){let e=Kq;for(const t of n)e=e.add(t);return e}const zq=new ft(Ce);function sv(){return zq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function HC(n){return{integerValue:""+n}}function WC(n,e){return EC(e)?HC(e):rv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this._=void 0}}function Gq(n,e,t){return n instanceof Jc?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Up(i)&&(i=ev(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Ca?zC(n,e):n instanceof Pa?GC(n,e):function(r,i){const o=KC(r,i),a=zb(o)+zb(r.Pe);return v_(o)&&v_(r.Pe)?HC(a):rv(r.serializer,a)}(n,e)}function Qq(n,e,t){return n instanceof Ca?zC(n,e):n instanceof Pa?GC(n,e):t}function KC(n,e){return n instanceof Xc?function(s){return v_(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Jc extends Bp{}class Ca extends Bp{constructor(e){super(),this.elements=e}}function zC(n,e){const t=QC(e);for(const s of n.elements)t.some(r=>xr(r,s))||t.push(s);return{arrayValue:{values:t}}}class Pa extends Bp{constructor(e){super(),this.elements=e}}function GC(n,e){let t=QC(e);for(const s of n.elements)t=t.filter(r=>!xr(r,s));return{arrayValue:{values:t}}}class Xc extends Bp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function zb(n){return Pt(n.integerValue||n.doubleValue)}function QC(n){return dh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.field=e,this.transform=t}}function Yq(n,e){return n.field.isEqual(e.field)&&function(s,r){return s instanceof Ca&&r instanceof Ca||s instanceof Pa&&r instanceof Pa?Gc(s.elements,r.elements,xr):s instanceof Xc&&r instanceof Xc?xr(s.Pe,r.Pe):s instanceof Jc&&r instanceof Jc}(n.transform,e.transform)}class Jq{constructor(e,t){this.version=e,this.transformResults=t}}class kt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kt}static exists(e){return new kt(void 0,e)}static updateTime(e){return new kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jp{}function YC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wl(n.key,kt.none()):new El(n.key,n.data,kt.none());{const t=n.data,s=Tn.empty();let r=new ft(Nt.comparator);for(let i of e.fields)if(!r.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new vi(n.key,s,new ls(r.toArray()),kt.none())}}function Xq(n,e,t){n instanceof El?function(r,i,o){const a=r.value.clone(),c=Qb(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof vi?function(r,i,o){if(!df(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Qb(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(JC(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Uu(n,e,t,s){return n instanceof El?function(i,o,a,c){if(!df(i.precondition,o))return a;const u=i.value.clone(),d=Yb(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,s):n instanceof vi?function(i,o,a,c){if(!df(i.precondition,o))return a;const u=Yb(i.fieldTransforms,c,o),d=o.data;return d.setAll(JC(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(n,e,t,s):function(i,o,a){return df(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Zq(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),i=KC(s.transform,r||null);i!=null&&(t===null&&(t=Tn.empty()),t.set(s.field,i))}return t||null}function Gb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Gc(s,r,(i,o)=>Yq(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class El extends jp{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class vi extends jp{constructor(e,t,s,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function Qb(n,e,t){const s=new Map;Ee(n.length===t.length);for(let r=0;r<t.length;r++){const i=n[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Qq(o,a,t[r]))}return s}function Yb(n,e,t){const s=new Map;for(const r of n){const i=r.transform,o=t.data.field(r.field);s.set(r.field,Gq(i,o,e))}return s}class wl extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iv extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Xq(i,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Uu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Uu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=qC();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const c=YC(o,a);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(Te.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),De())}isEqual(e){return this.batchId===e.batchId&&Gc(this.mutations,e.mutations,(t,s)=>Gb(t,s))&&Gc(this.baseMutations,e.baseMutations,(t,s)=>Gb(t,s))}}class av{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){Ee(e.mutations.length===s.length);let r=function(){return Wq}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new av(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,Qe;function XC(n){switch(n){default:return _e();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function ZC(n){if(n===void 0)return qt("GRPC error has no .code"),z.UNKNOWN;switch(n){case Yt.OK:return z.OK;case Yt.CANCELLED:return z.CANCELLED;case Yt.UNKNOWN:return z.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return z.INTERNAL;case Yt.UNAVAILABLE:return z.UNAVAILABLE;case Yt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Yt.NOT_FOUND:return z.NOT_FOUND;case Yt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Yt.ABORTED:return z.ABORTED;case Yt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Yt.DATA_LOSS:return z.DATA_LOSS;default:return _e()}}(Qe=Yt||(Yt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=new pa([4294967295,4294967295],0);function Jb(n){const e=eP().encode(n),t=new oC;return t.update(e),new Uint8Array(t.digest())}function Xb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new pa([t,s],0),new pa([r,i],0)]}class lv{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Au(`Invalid padding: ${t}`);if(s<0)throw new Au(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Au(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Au(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=pa.fromNumber(this.Ie)}Ee(e,t,s){let r=e.add(t.multiply(pa.fromNumber(s)));return r.compare(t3)===1&&(r=new pa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Jb(e),[s,r]=Xb(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(s,r,i);if(!this.de(o))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lv(i,r,t);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const t=Jb(e),[s,r]=Xb(t);for(let i=0;i<this.hashCount;i++){const o=this.Ee(s,r,i);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Au extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,t,s,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Fh.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Mh(Te.min(),r,new Lt(Ce),us(),De())}}class Fh{constructor(e,t,s,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Fh(s,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,s,r){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=r}}class tP{constructor(e,t){this.targetId=e,this.me=t}}class nP{constructor(e,t,s=Ut.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class Zb{constructor(){this.fe=0,this.ge=tI(),this.pe=Ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=De(),t=De(),s=De();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:_e()}}),new Fh(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=tI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class n3{constructor(e){this.Le=e,this.Be=new Map,this.ke=us(),this.qe=eI(),this.Qe=new Lt(Ce)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const s=this.Ge(t);switch(e.state){case 0:this.ze(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),s.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,r)=>{this.ze(r)&&t(r)})}He(e){const t=e.targetId,s=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Ff(i))if(s===0){const o=new ue(i.path);this.Ue(t,o,At.newNoDocument(o,Te.min()))}else Ee(s===1);else{const o=this.Ye(t);if(o!==s){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=oo(s).toUint8Array()}catch(c){if(c instanceof SC)return Or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new lv(o,r,i)}catch(c){return Or(c instanceof Au?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,s){return t.me.count===s-this.nt(e,t.targetId)?0:2}nt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let r=0;return s.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,i,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Ff(a.target)){const c=new ue(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,At.newNoDocument(c,e))}i.be&&(t.set(o,i.ve()),i.Ce())}});let s=De();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const r=new Mh(e,t,this.Qe,this.ke,s);return this.ke=us(),this.qe=eI(),this.Qe=new Lt(Ce),r}$e(e,t){if(!this.ze(e))return;const s=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,s){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Zb,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ft(Ce),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zb),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function eI(){return new Lt(ue.comparator)}function tI(){return new Lt(ue.comparator)}const s3={asc:"ASCENDING",desc:"DESCENDING"},r3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},i3={and:"AND",or:"OR"};class o3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function I_(n,e){return n.useProto3Json||Dh(e)?e:{value:e}}function Zc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function a3(n,e){return Zc(n,e.toTimestamp())}function Ht(n){return Ee(!!n),Te.fromTimestamp(function(t){const s=di(t);return new Dt(s.seconds,s.nanos)}(n))}function uv(n,e){return A_(n,e).canonicalString()}function A_(n,e){const t=function(r){return new He(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rP(n){const e=He.fromString(n);return Ee(pP(e)),e}function ph(n,e){return uv(n.databaseId,e.path)}function Pr(n,e){const t=rP(e);if(t.get(1)!==n.databaseId.projectId)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Z(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(aP(t))}function iP(n,e){return uv(n.databaseId,e)}function oP(n){const e=rP(n);return e.length===4?He.emptyPath():aP(e)}function S_(n){return new He(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aP(n){return Ee(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function nI(n,e,t){return{name:ph(n,e),fields:t.value.mapValue.fields}}function cP(n,e,t){const s=Pr(n,e.name),r=Ht(e.updateTime),i=e.createTime?Ht(e.createTime):Te.min(),o=new Tn({mapValue:{fields:e.fields}}),a=At.newFoundDocument(s,r,i,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function c3(n,e){return"found"in e?function(s,r){Ee(!!r.found),r.found.name,r.found.updateTime;const i=Pr(s,r.found.name),o=Ht(r.found.updateTime),a=r.found.createTime?Ht(r.found.createTime):Te.min(),c=new Tn({mapValue:{fields:r.found.fields}});return At.newFoundDocument(i,o,a,c)}(n,e):"missing"in e?function(s,r){Ee(!!r.missing),Ee(!!r.readTime);const i=Pr(s,r.missing),o=Ht(r.readTime);return At.newNoDocument(i,o)}(n,e):_e()}function l3(n,e){let t;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Ee(d===void 0||typeof d=="string"),Ut.fromBase64String(d||"")):(Ee(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ut.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?z.UNKNOWN:ZC(u.code);return new Z(d,u.message||"")}(o);t=new nP(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Pr(n,s.document.name),i=Ht(s.document.updateTime),o=s.document.createTime?Ht(s.document.createTime):Te.min(),a=new Tn({mapValue:{fields:s.document.fields}}),c=At.newFoundDocument(r,i,o,a),u=s.targetIds||[],d=s.removedTargetIds||[];t=new ff(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Pr(n,s.document),i=s.readTime?Ht(s.readTime):Te.min(),o=At.newNoDocument(r,i),a=s.removedTargetIds||[];t=new ff([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Pr(n,s.document),i=s.removedTargetIds||[];t=new ff([],i,r,null)}else{if(!("filter"in e))return _e();{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new e3(r,i),a=s.targetId;t=new tP(a,o)}}return t}function mh(n,e){let t;if(e instanceof El)t={update:nI(n,e.key,e.value)};else if(e instanceof wl)t={delete:ph(n,e.key)};else if(e instanceof vi)t={update:nI(n,e.key,e.data),updateMask:m3(e.fieldMask)};else{if(!(e instanceof iv))return _e();t={verify:ph(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof Jc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ca)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw _e()}(0,s))),e.precondition.isNone||(t.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:a3(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e()}(n,e.precondition)),t}function R_(n,e){const t=e.currentDocument?function(i){return i.updateTime!==void 0?kt.updateTime(Ht(i.updateTime)):i.exists!==void 0?kt.exists(i.exists):kt.none()}(e.currentDocument):kt.none(),s=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)Ee(a.setToServerValue==="REQUEST_TIME"),c=new Jc;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];c=new Ca(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];c=new Pa(d)}else"increment"in a?c=new Xc(o,a.increment):_e();const u=Nt.fromServerFormat(a.fieldPath);return new Vh(u,c)}(n,r)):[];if(e.update){e.update.name;const r=Pr(n,e.update.name),i=new Tn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(c){const u=c.fieldPaths||[];return new ls(u.map(d=>Nt.fromServerFormat(d)))}(e.updateMask);return new vi(r,i,o,t,s)}return new El(r,i,t,s)}if(e.delete){const r=Pr(n,e.delete);return new wl(r,t)}if(e.verify){const r=Pr(n,e.verify);return new iv(r,t)}return _e()}function u3(n,e){return n&&n.length>0?(Ee(e!==void 0),n.map(t=>function(r,i){let o=r.updateTime?Ht(r.updateTime):Ht(i);return o.isEqual(Te.min())&&(o=Ht(i)),new Jq(o,r.transformResults||[])}(t,e))):[]}function lP(n,e){return{documents:[iP(n,e.path)]}}function uP(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=iP(n,r);const i=function(u){if(u.length!==0)return fP(lt.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:bc(g.field),direction:d3(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=I_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:r}}function hP(n){let e=oP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){Ee(s===1);const d=t.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let i=[];t.where&&(i=function(f){const g=dP(f);return g instanceof lt&&tv(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new fh(Ic(w.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Dh(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){const g=!!f.before,v=f.values||[];return new lo(v,g)}(t.startAt));let u=null;return t.endAt&&(u=function(f){const g=!f.before,v=f.values||[];return new lo(v,g)}(t.endAt)),MC(e,r,o,i,a,"F",c,u)}function h3(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Ic(t.unaryFilter.field);return We.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Ic(t.unaryFilter.field);return We.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ic(t.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ic(t.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(n):n.fieldFilter!==void 0?function(t){return We.create(Ic(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return lt.create(t.compositeFilter.filters.map(s=>dP(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return _e()}}(t.compositeFilter.op))}(n):_e()}function d3(n){return s3[n]}function f3(n){return r3[n]}function p3(n){return i3[n]}function bc(n){return{fieldPath:n.canonicalString()}}function Ic(n){return Nt.fromServerFormat(n.fieldPath)}function fP(n){return n instanceof We?function(t){if(t.op==="=="){if(Ub(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NAN"}};if(Fb(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ub(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NAN"}};if(Fb(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(t.field),op:f3(t.op),value:t.value}}}(n):n instanceof lt?function(t){const s=t.getFilters().map(r=>fP(r));return s.length===1?s[0]:{compositeFilter:{op:p3(t.op),filters:s}}}(n):_e()}function m3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t,s,r,i=Te.min(),o=Te.min(),a=Ut.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.ct=e}}function g3(n,e){let t;if(e.document)t=cP(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ue.fromSegments(e.noDocument.path),r=ka(e.noDocument.readTime);t=At.newNoDocument(s,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e();{const s=ue.fromSegments(e.unknownDocument.path),r=ka(e.unknownDocument.version);t=At.newUnknownDocument(s,r)}}return e.readTime&&t.setReadTime(function(r){const i=new Dt(r[0],r[1]);return Te.fromTimestamp(i)}(e.readTime)),t}function sI(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=function(i,o){return{name:ph(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Zc(i,o.version.toTimestamp()),createTime:Zc(i,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Na(e.version)};else{if(!e.isUnknownDocument())return _e();s.unknownDocument={path:t.path.toArray(),version:Na(e.version)}}return s}function Bf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Na(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ka(n){const e=new Dt(n.seconds,n.nanoseconds);return Te.fromTimestamp(e)}function na(n,e){const t=(e.baseMutations||[]).map(i=>R_(n.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const s=e.mutations.map(i=>R_(n.ct,i)),r=Dt.fromMillis(e.localWriteTimeMs);return new ov(e.batchId,r,t,s)}function Su(n){const e=ka(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ka(n.lastLimboFreeSnapshotVersion):Te.min();let s;return s=function(i){return i.documents!==void 0}(n.query)?function(i){return Ee(i.documents.length===1),es(vl(oP(i.documents[0])))}(n.query):function(i){return es(hP(i))}(n.query),new si(s,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ut.fromBase64String(n.resumeToken))}function gP(n,e){const t=Na(e.snapshotVersion),s=Na(e.lastLimboFreeSnapshotVersion);let r;r=Ff(e.target)?lP(n.ct,e.target):uP(n.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ra(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:r}}function hv(n){const e=hP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$f(e,e.limit,"L"):e}function wg(n,e){return new cv(e.largestBatchId,R_(n.ct,e.overlayMutation))}function rI(n,e){const t=e.path.lastSegment();return[n,Zn(e.path.popLast()),t]}function iI(n,e,t,s){return{indexId:n,uid:e,sequenceNumber:t,readTime:Na(s.readTime),documentKey:Zn(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{getBundleMetadata(e,t){return oI(e).get(t).next(s=>{if(s)return function(i){return{id:i.bundleId,createTime:ka(i.createTime),version:i.version}}(s)})}saveBundleMetadata(e,t){return oI(e).put(function(r){return{bundleId:r.id,createTime:Na(Ht(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return aI(e).get(t).next(s=>{if(s)return function(i){return{name:i.name,query:hv(i.bundledQuery),readTime:ka(i.readTime)}}(s)})}saveNamedQuery(e,t){return aI(e).put(function(r){return{name:r.name,readTime:Na(Ht(r.readTime)),bundledQuery:r.bundledQuery}}(t))}}function oI(n){return sn(n,"bundles")}function aI(n){return sn(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const s=t.uid||"";return new qp(e,s)}getOverlay(e,t){return uu(e).get(rI(this.userId,t)).next(s=>s?wg(this.serializer,s):null)}getOverlays(e,t){const s=br();return H.forEach(t,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,t,s){const r=[];return s.forEach((i,o)=>{const a=new cv(t,o);r.push(this.ht(e,a))}),H.waitFor(r)}removeOverlaysForBatchId(e,t,s){const r=new Set;t.forEach(o=>r.add(Zn(o.getCollectionPath())));const i=[];return r.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,s+1],!1,!0);i.push(uu(e).j("collectionPathOverlayIndex",a))}),H.waitFor(i)}getOverlaysForCollection(e,t,s){const r=br(),i=Zn(t),o=IDBKeyRange.bound([this.userId,i,s],[this.userId,i,Number.POSITIVE_INFINITY],!0);return uu(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const u=wg(this.serializer,c);r.set(u.getKey(),u)}return r})}getOverlaysForCollectionGroup(e,t,s,r){const i=br();let o;const a=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uu(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{const f=wg(this.serializer,u);i.size()<r||f.largestBatchId===o?(i.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>i)}ht(e,t){return uu(e).put(function(r,i,o){const[a,c,u]=rI(i,o.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:mh(r.ct,o.mutation)}}(this.serializer,this.userId,t))}}function uu(n){return sn(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{Pt(e){return sn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const s=t==null?void 0:t.value;return s?Ut.fromUint8Array(s):Ut.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Pt(e.integerValue));else if("doubleValue"in e){const s=Pt(e.doubleValue);isNaN(s)?this.dt(t,13):(this.dt(t,15),lh(s)?t.At(0):t.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(t,20),typeof s=="string"&&(s=di(s)),t.Rt(`${s.seconds||""}`),t.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(oo(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(t,45),t.At(s.latitude||0),t.At(s.longitude||0)}else"mapValue"in e?RC(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$p(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):_e()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const s=e.fields||{};this.dt(t,55);for(const r of Object.keys(s))this.Vt(r,t),this.Tt(s[r],t)}wt(e,t){var s,r;const i=e.fields||{};this.dt(t,53);const o="value",a=((r=(s=i[o].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.length)||0;this.dt(t,15),t.At(Pt(a)),this.Vt(o,t),this.Tt(i[o],t)}bt(e,t){const s=e.values||[];this.dt(t,50);for(const r of s)this.Tt(r,t)}yt(e,t){this.dt(t,37),ue.fromName(e).path.forEach(s=>{this.dt(t,60),this.Dt(s,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}sa.vt=new sa;function v3(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function cI(n){const e=64-function(s){let r=0;for(let i=0;i<8;++i){const o=v3(255&s[i]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(e/8)}class E3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ft(s.value),s=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ot(s.value),s=t.next();this.Nt()}Lt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ft(s);else if(s<2048)this.Ft(960|s>>>6),this.Ft(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|s>>>12),this.Ft(128|63&s>>>6),this.Ft(128|63&s);else{const r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ot(s);else if(s<2048)this.Ot(960|s>>>6),this.Ot(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|s>>>12),this.Ot(128|63&s>>>6),this.Ot(128|63&s);else{const r=t.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(e){const t=this.qt(e),s=cI(t);this.Qt(1+s),this.buffer[this.position++]=255&s;for(let r=t.length-s;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Kt(e){const t=this.qt(e),s=cI(t);this.Qt(1+s),this.buffer[this.position++]=~(255&s);for(let r=t.length-s;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),s=(128&t[0])!=0;t[0]^=s?255:128;for(let r=1;r<t.length;++r)t[r]^=s?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const r=new Uint8Array(s);r.set(this.buffer),this.buffer=r}}class w3{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class T3{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class hu{constructor(){this.jt=new E3,this.Ht=new w3(this.jt),this.Jt=new T3(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,s,r){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=r}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new ra(this.indexId,this.documentKey,this.arrayValue,s)}}function Ui(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=lI(n.arrayValue,e.arrayValue),t!==0?t:(t=lI(n.directionalValue,e.directionalValue),t!==0?t:ue.comparator(n.documentKey,e.documentKey)))}function lI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(s!==0)return s}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.Xt=new ft((t,s)=>Nt.comparator(t.field,s.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const s=t;s.isInequality()?this.Xt=this.Xt.add(s):this.tn.push(s)}}get nn(){return this.Xt.size>1}rn(e){if(Ee(e.collectionGroup===this.collectionId),this.nn)return!1;const t=m_(e);if(t!==void 0&&!this.sn(t))return!1;const s=Xo(e);let r=new Set,i=0,o=0;for(;i<s.length&&this.sn(s[i]);++i)r=r.add(s[i].fieldPath.canonicalString());if(i===s.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){const c=s[i];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++i}for(;i<s.length;++i){const a=s[i];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new ft(Nt.comparator);const t=[];for(const s of this.tn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new cf(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new cf(s.field,0))}for(const s of this.en)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new cf(s.field,s.dir==="asc"?0:1)));return new Mf(Mf.UNKNOWN_ID,this.collectionId,t,ch.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n){var e,t;if(Ee(n instanceof We||n instanceof lt),n instanceof We){if(n instanceof VC){const r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(i=>We.create(n.field,"==",i)))||[];return lt.create(r,"or")}return n}const s=n.filters.map(r=>_P(r));return lt.create(s,n.op)}function b3(n){if(n.getFilters().length===0)return[];const e=N_(_P(n));return Ee(yP(e)),C_(e)||P_(e)?[e]:e.getFilters()}function C_(n){return n instanceof We}function P_(n){return n instanceof lt&&tv(n)}function yP(n){return C_(n)||P_(n)||function(t){if(t instanceof lt&&E_(t)){for(const s of t.getFilters())if(!C_(s)&&!P_(s))return!1;return!0}return!1}(n)}function N_(n){if(Ee(n instanceof We||n instanceof lt),n instanceof We)return n;if(n.filters.length===1)return N_(n.filters[0]);const e=n.filters.map(s=>N_(s));let t=lt.create(e,n.op);return t=jf(t),yP(t)?t:(Ee(t instanceof lt),Ee(Yc(t)),Ee(t.filters.length>1),t.filters.reduce((s,r)=>dv(s,r)))}function dv(n,e){let t;return Ee(n instanceof We||n instanceof lt),Ee(e instanceof We||e instanceof lt),t=n instanceof We?e instanceof We?function(r,i){return lt.create([r,i],"and")}(n,e):hI(n,e):e instanceof We?hI(e,n):function(r,i){if(Ee(r.filters.length>0&&i.filters.length>0),Yc(r)&&Yc(i))return OC(r,i.getFilters());const o=E_(r)?r:i,a=E_(r)?i:r,c=o.filters.map(u=>dv(u,a));return lt.create(c,"or")}(n,e),jf(t)}function hI(n,e){if(Yc(e))return OC(e,n.getFilters());{const t=e.filters.map(s=>dv(n,s));return lt.create(t,"or")}}function jf(n){if(Ee(n instanceof We||n instanceof lt),n instanceof We)return n;const e=n.getFilters();if(e.length===1)return jf(e[0]);if(kC(n))return n;const t=e.map(r=>jf(r)),s=[];return t.forEach(r=>{r instanceof We?s.push(r):r instanceof lt&&(r.op===n.op?s.push(...r.filters):s.push(r))}),s.length===1?s[0]:lt.create(s,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.un=new fv}addToCollectionParentIndex(e,t){return this.un.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Ss.min())}updateCollectionGroup(e,t,s){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new ft(He.comparator),i=!r.has(s);return this.index[t]=r.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ft(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new Uint8Array(0);class A3{constructor(e,t){this.databaseId=t,this.cn=new fv,this.ln=new wo(s=>Ra(s),(s,r)=>Oh(s,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const s=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const i={collectionId:s,parent:Zn(r)};return dI(e).put(i)}return H.resolve()}getCollectionParents(e,t){const s=[],r=IDBKeyRange.bound([t,""],[pC(t),""],!1,!0);return dI(e).U(r).next(i=>{for(const o of i){if(o.collectionId!==t)break;s.push(Tr(o.parent))}return s})}addFieldIndex(e,t){const s=du(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete r.indexId;const i=s.add(r);if(t.indexState){const o=pc(e);return i.next(a=>{o.put(iI(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const s=du(e),r=pc(e),i=fc(e);return s.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=du(e),s=fc(e),r=pc(e);return t.j().next(()=>s.j()).next(()=>r.j())}createTargetIndexes(e,t){return H.forEach(this.hn(t),s=>this.getIndexType(e,s).next(r=>{if(r===0||r===1){const i=new uI(s).an();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,t){const s=fc(e);let r=!0;const i=new Map;return H.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{r&&(r=!!a),i.set(o,a)})).next(()=>{if(r){let o=De();const a=[];return H.forEach(i,(c,u)=>{ee("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${Ra(t)}`);const d=function(M,K){const ie=m_(K);if(ie===void 0)return null;for(const re of Uf(M,ie.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null}(u,c),f=function(M,K){const ie=new Map;for(const re of Xo(K))for(const R of Uf(M,re.fieldPath))switch(R.op){case"==":case"in":ie.set(re.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return ie.set(re.fieldPath.canonicalString(),R.value),Array.from(ie.values())}return null}(u,c),g=function(M,K){const ie=[];let re=!0;for(const R of Xo(K)){const A=R.kind===0?Hb(M,R.fieldPath,M.startAt):Wb(M,R.fieldPath,M.startAt);ie.push(A.value),re&&(re=A.inclusive)}return new lo(ie,re)}(u,c),v=function(M,K){const ie=[];let re=!0;for(const R of Xo(K)){const A=R.kind===0?Wb(M,R.fieldPath,M.endAt):Hb(M,R.fieldPath,M.endAt);ie.push(A.value),re&&(re=A.inclusive)}return new lo(ie,re)}(u,c),w=this.In(c,u,g),I=this.In(c,u,v),b=this.Tn(c,u,f),O=this.En(c.indexId,d,w,g.inclusive,I,v.inclusive,b);return H.forEach(O,x=>s.G(x,t.limit).next(M=>{M.forEach(K=>{const ie=ue.fromSegments(K.documentKey);o.has(ie)||(o=o.add(ie),a.push(ie))})}))}).next(()=>a)}return H.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=b3(lt.create(e.filters,"and")).map(s=>T_(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,s,r,i,o,a){const c=(t!=null?t.length:1)*Math.max(s.length,i.length),u=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){const g=t?this.dn(t[f/u]):Ud,v=this.An(e,g,s[f%u],r),w=this.Rn(e,g,i[f%u],o),I=a.map(b=>this.An(e,g,b,!0));d.push(...this.createRange(v,w,I))}return d}An(e,t,s,r){const i=new ra(e,ue.empty(),t,s);return r?i:i.Zt()}Rn(e,t,s,r){const i=new ra(e,ue.empty(),t,s);return r?i.Zt():i}Pn(e,t){const s=new uI(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(i=>{let o=null;for(const a of i)s.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let s=2;const r=this.hn(t);return H.forEach(r,i=>this.Pn(e,i).next(o=>{o?s!==0&&o.fields.length<function(c){let u=new ft(Nt.comparator),d=!1;for(const f of c.filters)for(const g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:u=u.add(g.field));for(const f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(i)&&(s=1):s=0})).next(()=>function(o){return o.limit!==null}(t)&&r.length>1&&s===2?1:s)}Vn(e,t){const s=new hu;for(const r of Xo(e)){const i=t.data.field(r.fieldPath);if(i==null)return null;const o=s.Yt(r.kind);sa.vt.It(i,o)}return s.zt()}dn(e){const t=new hu;return sa.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const s=new hu;return sa.vt.It(Sa(this.databaseId,t),s.Yt(function(i){const o=Xo(i);return o.length===0?0:o[o.length-1].kind}(e))),s.zt()}Tn(e,t,s){if(s===null)return[];let r=[];r.push(new hu);let i=0;for(const o of Xo(e)){const a=s[i++];for(const c of r)if(this.fn(t,o.fieldPath)&&dh(a))r=this.gn(r,o,a);else{const u=c.Yt(o.kind);sa.vt.It(a,u)}}return this.pn(r)}In(e,t,s){return this.Tn(e,t,s.position)}pn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].zt();return t}gn(e,t,s){const r=[...e],i=[];for(const o of s.arrayValue.values||[])for(const a of r){const c=new hu;c.seed(a.zt()),sa.vt.It(o,c.Yt(t.kind)),i.push(c)}return i}fn(e,t){return!!e.filters.find(s=>s instanceof We&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in"))}getFieldIndexes(e,t){const s=du(e),r=pc(e);return(t?s.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.U()).next(i=>{const o=[];return H.forEach(i,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){const g=f?new ch(f.sequenceNumber,new Ss(ka(f.readTime),new ue(Tr(f.documentKey)),f.largestBatchId)):ch.empty(),v=d.fields.map(([w,I])=>new cf(Nt.fromServerFormat(w),I));return new Mf(d.indexId,d.collectionGroup,v,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((s,r)=>{const i=s.indexState.sequenceNumber-r.indexState.sequenceNumber;return i!==0?i:Ce(s.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const r=du(e),i=pc(e);return this.yn(e).next(o=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>H.forEach(a,c=>i.put(iI(c.indexId,this.uid,o,s)))))}updateIndexEntries(e,t){const s=new Map;return H.forEach(t,(r,i)=>{const o=s.get(r.collectionGroup);return(o?H.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(s.set(r.collectionGroup,a),H.forEach(a,c=>this.wn(e,r,c).next(u=>{const d=this.Sn(i,c);return u.isEqual(d)?H.resolve():this.bn(e,i,c,u,d)}))))})}Dn(e,t,s,r){return fc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(s,t.key),documentKey:t.key.path.toArray()})}vn(e,t,s,r){return fc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(s,t.key),t.key.path.toArray()])}wn(e,t,s){const r=fc(e);let i=new ft(Ui);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.mn(s,t)])},(o,a)=>{i=i.add(new ra(s.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>i)}Sn(e,t){let s=new ft(Ui);const r=this.Vn(t,e);if(r==null)return s;const i=m_(t);if(i!=null){const o=e.data.field(i.fieldPath);if(dh(o))for(const a of o.arrayValue.values||[])s=s.add(new ra(t.indexId,e.key,this.dn(a),r))}else s=s.add(new ra(t.indexId,e.key,Ud,r));return s}bn(e,t,s,r,i){ee("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,u,d,f,g){const v=c.getIterator(),w=u.getIterator();let I=dc(v),b=dc(w);for(;I||b;){let O=!1,x=!1;if(I&&b){const M=d(I,b);M<0?x=!0:M>0&&(O=!0)}else I!=null?x=!0:O=!0;O?(f(b),b=dc(w)):x?(g(I),I=dc(v)):(I=dc(v),b=dc(w))}}(r,i,Ui,a=>{o.push(this.Dn(e,t,s,a))},a=>{o.push(this.vn(e,t,s,a))}),H.waitFor(o)}yn(e){let t=1;return pc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,r,i)=>{i.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((o,a)=>Ui(o,a)).filter((o,a,c)=>!a||Ui(o,c[a-1])!==0);const r=[];r.push(e);for(const o of s){const a=Ui(o,e),c=Ui(o,t);if(a===0)r[0]=e.Zt();else if(a>0&&c<0)r.push(o),r.push(o.Zt());else if(c>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Cn(r[o],r[o+1]))return[];const a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Ud,[]],c=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Ud,[]];i.push(IDBKeyRange.bound(a,c))}return i}Cn(e,t){return Ui(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fI)}getMinOffset(e,t){return H.mapArray(this.hn(t),s=>this.Pn(e,s).next(r=>r||_e())).next(fI)}}function dI(n){return sn(n,"collectionParents")}function fc(n){return sn(n,"indexEntries")}function du(n){return sn(n,"indexConfiguration")}function pc(n){return sn(n,"indexState")}function fI(n){Ee(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const r=n[s].indexState.offset;Jy(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Ss(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class as{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new as(e,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n,e,t){const s=n.store("mutations"),r=n.store("documentMutations"),i=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=s.J({range:o},(d,f,g)=>(a++,g.delete()));i.push(c.next(()=>{Ee(a===1)}));const u=[];for(const d of t.mutations){const f=wC(e,d.key.path,t.batchId);i.push(r.delete(f)),u.push(d.key)}return H.waitFor(i).next(()=>u)}function qf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _e();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as.DEFAULT_COLLECTION_PERCENTILE=10,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,as.DEFAULT=new as(41943040,as.DEFAULT_COLLECTION_PERCENTILE,as.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),as.DISABLED=new as(-1,0,0);class Hp{constructor(e,t,s,r){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=r,this.Fn={}}static lt(e,t,s,r){Ee(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Hp(i,t,s,r)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).J({index:"userMutationsIndex",range:s},(r,i,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,s,r){const i=Ac(e),o=$i(e);return o.add({}).next(a=>{Ee(typeof a=="number");const c=new ov(a,t,s,r),u=function(v,w,I){const b=I.baseMutations.map(x=>mh(v.ct,x)),O=I.mutations.map(x=>mh(v.ct,x));return{userId:w,batchId:I.batchId,localWriteTimeMs:I.localWriteTime.toMillis(),baseMutations:b,mutations:O}}(this.serializer,this.userId,c),d=[];let f=new ft((g,v)=>Ce(g.canonicalString(),v.canonicalString()));for(const g of r){const v=wC(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(u)),d.push(i.put(v,hq))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),H.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return $i(e).get(t).next(s=>s?(Ee(s.userId===this.userId),na(this.serializer,s)):null)}Mn(e,t){return this.Fn[t]?H.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const r=s.keys();return this.Fn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=IDBKeyRange.lowerBound([this.userId,s]);let i=null;return $i(e).J({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(Ee(a.batchId>=s),i=na(this.serializer,a)),c.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return $i(e).J({index:"userMutationsIndex",range:t,reverse:!0},(r,i,o)=>{s=i.batchId,o.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $i(e).U("userMutationsIndex",t).next(s=>s.map(r=>na(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=lf(this.userId,t.path),r=IDBKeyRange.lowerBound(s),i=[];return Ac(e).J({range:r},(o,a,c)=>{const[u,d,f]=o,g=Tr(d);if(u===this.userId&&t.path.isEqual(g))return $i(e).get(f).next(v=>{if(!v)throw _e();Ee(v.userId===this.userId),i.push(na(this.serializer,v))});c.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ft(Ce);const r=[];return t.forEach(i=>{const o=lf(this.userId,i.path),a=IDBKeyRange.lowerBound(o),c=Ac(e).J({range:a},(u,d,f)=>{const[g,v,w]=u,I=Tr(v);g===this.userId&&i.path.isEqual(I)?s=s.add(w):f.done()});r.push(c)}),H.waitFor(r).next(()=>this.xn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1,i=lf(this.userId,s),o=IDBKeyRange.lowerBound(i);let a=new ft(Ce);return Ac(e).J({range:o},(c,u,d)=>{const[f,g,v]=c,w=Tr(g);f===this.userId&&s.isPrefixOf(w)?w.length===r&&(a=a.add(v)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){const s=[],r=[];return t.forEach(i=>{r.push($i(e).get(i).next(o=>{if(o===null)throw _e();Ee(o.userId===this.userId),s.push(na(this.serializer,o))}))}),H.waitFor(r).next(()=>s)}removeMutationBatch(e,t){return vP(e._e,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),H.forEach(s,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return H.resolve();const s=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return Ac(e).J({range:s},(i,o,a)=>{if(i[0]===this.userId){const c=Tr(i[1]);r.push(c)}else a.done()}).next(()=>{Ee(r.length===0)})})}containsKey(e,t){return EP(e,this.userId,t)}Nn(e){return wP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function EP(n,e,t){const s=lf(e,t.path),r=s[1],i=IDBKeyRange.lowerBound(s);let o=!1;return Ac(n).J({range:i,H:!0},(a,c,u)=>{const[d,f,g]=a;d===e&&f===r&&(o=!0),u.done()}).next(()=>o)}function $i(n){return sn(n,"mutations")}function Ac(n){return sn(n,"documentMutations")}function wP(n){return sn(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Da(0)}static kn(){return new Da(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const s=new Da(t.highestTargetId);return t.highestTargetId=s.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Te.fromTimestamp(new Dt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.qn(e).next(r=>(r.highestListenSequenceNumber=t,s&&(r.lastRemoteSnapshotVersion=s.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Qn(e,r)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(s=>(s.targetCount+=1,this.$n(t,s),this.Qn(e,s))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>mc(e).delete(t.targetId)).next(()=>this.qn(e)).next(s=>(Ee(s.targetCount>0),s.targetCount-=1,this.Qn(e,s)))}removeTargets(e,t,s){let r=0;const i=[];return mc(e).J((o,a)=>{const c=Su(a);c.sequenceNumber<=t&&s.get(c.targetId)===null&&(r++,i.push(this.removeTargetData(e,c)))}).next(()=>H.waitFor(i)).next(()=>r)}forEachTarget(e,t){return mc(e).J((s,r)=>{const i=Su(r);t(i)})}qn(e){return mI(e).get("targetGlobalKey").next(t=>(Ee(t!==null),t))}Qn(e,t){return mI(e).put("targetGlobalKey",t)}Kn(e,t){return mc(e).put(gP(this.serializer,t))}$n(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Ra(t),r=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let i=null;return mc(e).J({range:r,index:"queryTargetsIndex"},(o,a,c)=>{const u=Su(a);Oh(t,u.target)&&(i=u,c.done())}).next(()=>i)}addMatchingKeys(e,t,s){const r=[],i=Qi(e);return t.forEach(o=>{const a=Zn(o.path);r.push(i.put({targetId:s,path:a})),r.push(this.referenceDelegate.addReference(e,s,o))}),H.waitFor(r)}removeMatchingKeys(e,t,s){const r=Qi(e);return H.forEach(t,i=>{const o=Zn(i.path);return H.waitFor([r.delete([s,o]),this.referenceDelegate.removeReference(e,s,i)])})}removeMatchingKeysForTargetId(e,t){const s=Qi(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(r)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qi(e);let i=De();return r.J({range:s,H:!0},(o,a,c)=>{const u=Tr(o[1]),d=new ue(u);i=i.add(d)}).next(()=>i)}containsKey(e,t){const s=Zn(t.path),r=IDBKeyRange.bound([s],[pC(s)],!1,!0);let i=0;return Qi(e).J({index:"documentTargetsIndex",H:!0,range:r},([o,a],c,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ot(e,t){return mc(e).get(t).next(s=>s?Su(s):null)}}function mc(n){return sn(n,"targets")}function mI(n){return sn(n,"targetGlobal")}function Qi(n){return sn(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI([n,e],[t,s]){const r=Ce(n,t);return r===0?Ce(e,s):r}class R3{constructor(e){this.Un=e,this.buffer=new ft(gI),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();gI(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class C3{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Eo(t)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await vo(t)}await this.Hn(3e5)})}}class P3{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return H.resolve(cs.oe);const s=new R3(t);return this.Jn.forEachTarget(e,r=>s.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(e,r=>s.zn(r))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Jn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(pI)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pI):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let s,r,i,o,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(s=f,a=Date.now(),this.removeTargets(e,s,t))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,s))).next(f=>(u=Date.now(),wc()<=Ue.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:f})))}}function N3(n,e){return new P3(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,t){this.db=e,this.garbageCollector=N3(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(r=>s+r))}er(e){let t=0;return this.Zn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(s,r)=>t(r))}addReference(e,t,s){return $d(e,s)}removeReference(e,t,s){return $d(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return $d(e,t)}nr(e,t){return function(r,i){let o=!1;return wP(r).Y(a=>EP(r,a,i).next(c=>(c&&(o=!0),H.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.tr(e,(o,a)=>{if(a<=t){const c=this.nr(e,o).next(u=>{if(!u)return i++,s.getEntry(e,o).next(()=>(s.removeEntry(o,Te.min()),Qi(e).delete(function(f){return[0,Zn(f.path)]}(o))))});r.push(c)}}).next(()=>H.waitFor(r)).next(()=>s.apply(e)).next(()=>i)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return $d(e,t)}tr(e,t){const s=Qi(e);let r,i=cs.oe;return s.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(i!==cs.oe&&t(new ue(Tr(r)),i),i=u,r=c):i=cs.oe}).next(()=>{i!==cs.oe&&t(new ue(Tr(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $d(n,e){return Qi(n).put(function(s,r){return{targetId:0,path:Zn(s.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.changes=new wo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?H.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Go(e).put(s)}removeEntry(e,t,s){return Go(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bf(o),a[a.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.rr(e,s)))}getEntry(e,t){let s=At.newInvalidDocument(t);return Go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fu(t))},(r,i)=>{s=this.ir(t,i)}).next(()=>s)}sr(e,t){let s={size:0,document:At.newInvalidDocument(t)};return Go(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fu(t))},(r,i)=>{s={document:this.ir(t,i),size:qf(i)}}).next(()=>s)}getEntries(e,t){let s=us();return this._r(e,t,(r,i)=>{const o=this.ir(r,i);s=s.insert(r,o)}).next(()=>s)}ar(e,t){let s=us(),r=new Lt(ue.comparator);return this._r(e,t,(i,o)=>{const a=this.ir(i,o);s=s.insert(i,a),r=r.insert(i,qf(o))}).next(()=>({documents:s,ur:r}))}_r(e,t,s){if(t.isEmpty())return H.resolve();let r=new ft(vI);t.forEach(c=>r=r.add(c));const i=IDBKeyRange.bound(fu(r.first()),fu(r.last())),o=r.getIterator();let a=o.getNext();return Go(e).J({index:"documentKeyIndex",range:i},(c,u,d)=>{const f=ue.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&vI(a,f)<0;)s(a,null),a=o.getNext();a&&a.isEqual(f)&&(s(a,u),a=o.hasNext()?o.getNext():null),a?d.$(fu(a)):d.done()}).next(()=>{for(;a;)s(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,s,r,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Bf(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Go(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{i==null||i.incrementDocumentReadCount(u.length);let d=us();for(const f of u){const g=this.ir(ue.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Lh(t,g)||r.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,s,r){let i=us();const o=yI(t,s),a=yI(t,Ss.max());return Go(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,d)=>{const f=this.ir(ue.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(f.key,f),i.size===r&&d.done()}).next(()=>i)}newChangeBuffer(e){return new O3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _I(e).get("remoteDocumentGlobalKey").next(t=>(Ee(!!t),t))}rr(e,t){return _I(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const s=g3(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Te.min())))return s}return At.newInvalidDocument(e)}}function bP(n){return new D3(n)}class O3 extends TP{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new wo(s=>s.toString(),(s,r)=>s.isEqual(r))}applyChanges(e){const t=[];let s=0,r=new ft((i,o)=>Ce(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.lr.get(i);if(t.push(this.cr.removeEntry(e,i,a.readTime)),o.isValidDocument()){const c=sI(this.cr.serializer,o);r=r.add(i.path.popLast());const u=qf(c);s+=u-a.size,t.push(this.cr.addEntry(e,i,c))}else if(s-=a.size,this.trackRemovals){const c=sI(this.cr.serializer,o.convertToNoDocument(Te.min()));t.push(this.cr.addEntry(e,i,c))}}),r.forEach(i=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,i))}),t.push(this.cr.updateMetadata(e,s)),H.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(s=>(this.lr.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:s,ur:r})=>(r.forEach((i,o)=>{this.lr.set(i,{size:o,readTime:s.get(i).readTime})}),s))}}function _I(n){return sn(n,"remoteDocumentGlobal")}function Go(n){return sn(n,"remoteDocumentsV14")}function fu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yI(n,e){const t=e.documentKey.path.toArray();return[n,Bf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vI(n,e){const t=n.path.toArray(),s=e.path.toArray();let r=0;for(let i=0;i<t.length-2&&i<s.length-2;++i)if(r=Ce(t[i],s[i]),r)return r;return r=Ce(t.length,s.length),r||(r=Ce(t[t.length-2],s[s.length-2]),r||Ce(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(s!==null&&Uu(s.mutation,r,ls.empty(),Dt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,De()).next(()=>s))}getLocalViewOfDocuments(e,t,s=De()){const r=br();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,s).next(i=>{let o=Iu();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const s=br();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,De()))}populateOverlays(e,t,s){const r=[];return s.forEach(i=>{t.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,s,r){let i=us();const o=Fu(),a=function(){return Fu()}();return t.forEach((c,u)=>{const d=s.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof vi)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Uu(d.mutation,u,d.mutation.getFieldMask(),Dt.now())):o.set(u.key,ls.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new x3(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const s=Fu();let r=new Lt((o,a)=>o-a),i=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let d=s.get(c)||ls.empty();d=a.applyToLocalView(u,d),s.set(c,d);const f=(r.get(a.batchId)||De()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,f=qC();d.forEach(g=>{if(!i.has(g)){const v=YC(t.get(g),s.get(g));v!==null&&f.set(g,v),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return H.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,r){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-i.size):H.resolve(br());let a=-1,c=i;return o.next(u=>H.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?H.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,De())).next(d=>({batchId:a,changes:jC(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(s=>{let r=Iu();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const i=t.collectionGroup;let o=Iu();return this.indexManager.getCollectionParents(e,i).next(a=>H.forEach(a,c=>{const u=function(f,g){return new yi(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,r))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,At.newInvalidDocument(d)))});let a=Iu();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Uu(d.mutation,u,ls.empty(),Dt.now()),Lh(t,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return H.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Ht(r.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(r){return{name:r.name,query:hv(r.bundledQuery),readTime:Ht(r.readTime)}}(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.overlays=new Lt(ue.comparator),this.Ir=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const s=br();return H.forEach(t,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((r,i)=>{this.ht(e,t,i)}),H.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.Ir.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(s)),H.resolve()}getOverlaysForCollection(e,t,s){const r=br(),i=t.length+1,o=new ue(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return H.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let i=new Lt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>s){let d=i.get(u.largestBatchId);d===null&&(d=br(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=br(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return H.resolve(a)}ht(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(s.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new cv(t,s));let i=this.Ir.get(t);i===void 0&&(i=De(),this.Ir.set(t,i)),this.Ir.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.Tr=new ft(dn.Er),this.dr=new ft(dn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const s=new dn(e,t);this.Tr=this.Tr.add(s),this.dr=this.dr.add(s)}Rr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.Vr(new dn(e,t))}mr(e,t){e.forEach(s=>this.removeReference(s,t))}gr(e){const t=new ue(new He([])),s=new dn(t,e),r=new dn(t,e+1),i=[];return this.dr.forEachInRange([s,r],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ue(new He([])),s=new dn(t,e),r=new dn(t,e+1);let i=De();return this.dr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new dn(e,0),s=this.Tr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class dn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ue.comparator(e.key,t.key)||Ce(e.wr,t.wr)}static Ar(e,t){return Ce(e.wr,t.wr)||ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ft(dn.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ov(i,t,s,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new dn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.vr(s),i=r<0?0:r;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new dn(t,0),r=new dn(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([s,r],o=>{const a=this.Dr(o.wr);i.push(a)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ft(Ce);return t.forEach(r=>{const i=new dn(r,0),o=new dn(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{s=s.add(a.wr)})}),H.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let i=s;ue.isDocumentKey(i)||(i=i.child(""));const o=new dn(new ue(i),0);let a=new ft(Ce);return this.br.forEachWhile(c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(s=>{const r=this.Dr(s);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ee(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.br;return H.forEach(t.mutations,r=>{const i=new dn(r.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=s})}On(e){}containsKey(e,t){const s=new dn(t,0),r=this.br.firstAfterOrEqual(s);return H.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.Mr=e,this.docs=function(){return new Lt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),i=r?r.size:0,o=this.Mr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return H.resolve(s?s.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let s=us();return t.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():At.newInvalidDocument(r))}),H.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let i=us();const o=t.path,a=new ue(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Jy(gC(d),s)<=0||(r.has(d.key)||Lh(t,d))&&(i=i.insert(d.key,d.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,t,s,r){_e()}Or(e,t){return H.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new $3(this)}getSize(e){return H.resolve(this.size)}}class $3 extends TP{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(s)}),H.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.persistence=e,this.Nr=new wo(t=>Ra(t),Oh),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pv,this.targetCount=0,this.kr=Da.Bn()}forEachTarget(e,t){return this.Nr.forEach((s,r)=>t(r)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Lr&&(this.Lr=t),H.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Da(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Kn(t),H.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,s){let r=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&s.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),H.waitFor(i).next(()=>r)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const s=this.Nr.get(t)||null;return H.resolve(s)}addMatchingKeys(e,t,s){return this.Br.Rr(t,s),H.resolve()}removeMatchingKeys(e,t,s){this.Br.mr(t,s);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const s=this.Br.yr(t);return H.resolve(s)}containsKey(e,t){return H.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new cs(0),this.Kr=!1,this.Kr=!0,this.$r=new M3,this.referenceDelegate=e(this),this.Ur=new B3(this),this.indexManager=new I3,this.remoteDocumentCache=function(r){return new U3(r)}(s=>this.referenceDelegate.Wr(s)),this.serializer=new mP(t),this.Gr=new L3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new V3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.qr[e.toKey()];return s||(s=new F3(t,this.referenceDelegate),this.qr[e.toKey()]=s),s}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,s){ee("MemoryPersistence","Starting transaction:",e);const r=new j3(this.Qr.next());return this.referenceDelegate.zr(),s(r).next(i=>this.referenceDelegate.jr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Hr(e,t){return H.or(Object.values(this.qr).map(s=>()=>s.containsKey(e,t)))}}class j3 extends yC{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Jr=new pv,this.Yr=null}static Zr(e){return new Wp(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,t,s){return this.Jr.addReference(s,t),this.Xr.delete(s.toString()),H.resolve()}removeReference(e,t,s){return this.Jr.removeReference(s,t),this.Xr.add(s.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),H.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(r=>this.Xr.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(i=>this.Xr.add(i.toString()))}).next(()=>s.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,s=>{const r=ue.fromPath(s);return this.ei(e,r).next(i=>{i||t.removeEntry(r,Te.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(s=>{s?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return H.or([()=>H.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e){this.serializer=e}O(e,t,s,r){const i=new Fp("createOrUpgrade",t);s<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ob,{unique:!0}),c.createObjectStore("documentMutations")}(e),EI(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=H.resolve();return s<3&&r>=3&&(s!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),EI(e)),o=o.next(()=>function(c){const u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(i))),s<4&&r>=4&&(s!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ob,{unique:!0});const f=u.store("mutations"),g=d.map(v=>f.put(v));return H.waitFor(g)})}(e,i))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),s<5&&r>=5&&(o=o.next(()=>this.ni(i))),s<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(i)))),s<7&&r>=7&&(o=o.next(()=>this.ii(i))),s<8&&r>=8&&(o=o.next(()=>this.si(e,i))),s<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),s<10&&r>=10&&(o=o.next(()=>this.oi(i))),s<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&r>=12&&(o=o.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:bq});u.createIndex("collectionPathOverlayIndex",Iq,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",Aq,{unique:!1})})(e)})),s<13&&r>=13&&(o=o.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:dq});u.createIndex("documentKeyIndex",fq),u.createIndex("collectionGroupIndex",pq)}(e)).next(()=>this._i(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&r>=14&&(o=o.next(()=>this.ai(e,i))),s<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:vq}).createIndex("sequenceNumberIndex",Eq,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:wq}).createIndex("documentKeyIndex",Tq,{unique:!1})}(e))),s<16&&r>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),s<17&&r>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((s,r)=>{t+=qf(r)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ni(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.U().next(r=>H.forEach(r,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",o).next(a=>H.forEach(a,c=>{Ee(c.userId===i.userId);const u=na(this.serializer,c);return vP(e,i.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const i=[];return s.J((o,a)=>{const c=new He(o),u=function(f){return[0,Zn(f)]}(c);i.push(t.get(u).next(d=>d?H.resolve():(f=>t.put({targetId:0,path:Zn(f),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>H.waitFor(i))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:yq});const s=t.store("collectionParents"),r=new fv,i=o=>{if(r.add(o)){const a=o.lastSegment(),c=o.popLast();return s.put({collectionId:a,parent:Zn(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new He(o);return i(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{const d=Tr(a);return i(d.popLast())}))}oi(e){const t=e.store("targets");return t.J((s,r)=>{const i=Su(r),o=gP(this.serializer,i);return t.put(o)})}_i(e,t){const s=t.store("remoteDocuments"),r=[];return s.J((i,o)=>{const a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new ue(He.fromString(f.document.name).popFirst(5)):f.noDocument?ue.fromSegments(f.noDocument.path):f.unknownDocument?ue.fromSegments(f.unknownDocument.path):_e()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(u))}).next(()=>H.waitFor(r))}ai(e,t){const s=t.store("mutations"),r=bP(this.serializer),i=new AP(Wp.Zr,this.serializer.ct);return s.U().next(o=>{const a=new Map;return o.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:De();na(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),H.forEach(a,(c,u)=>{const d=new pn(u),f=qp.lt(this.serializer,d),g=i.getIndexManager(d),v=Hp.lt(d,this.serializer,g,i.referenceDelegate);return new IP(r,v,f,g).recalculateAndSaveOverlaysForDocumentKeys(new g_(t,cs.oe),c).next()})})}}function EI(n){n.createObjectStore("targetDocuments",{keyPath:gq}).createIndex("documentTargetsIndex",_q,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mq,{unique:!0}),n.createObjectStore("targetGlobal")}const Tg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mv{constructor(e,t,s,r,i,o,a,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.ui=i,this.window=o,this.document=a,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!mv.D())throw new Z(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k3(this,r),this.Ai=t+"main",this.serializer=new mP(c),this.Ri=new Cr(this.Ai,this.hi,new q3(this.serializer)),this.$r=new y3,this.Ur=new S3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bP(this.serializer),this.Gr=new _3,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&qt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(z.FAILED_PRECONDITION,Tg);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new cs(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Eo(e))return ee("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ee("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return pu(e).get("owner").next(t=>H.resolve(this.vi(t)))}Ci(e){return Bd(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const s=sn(t,"clientMetadata");return s.U().next(r=>{const i=this.xi(r,18e5),o=r.filter(a=>i.indexOf(a)===-1);return H.forEach(o,a=>s.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?H.resolve(!0):pu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Z(z.FAILED_PRECONDITION,Tg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bd(e).U().next(s=>this.xi(s,5e3).find(r=>{if(this.clientId!==r.clientId){const i=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&ee("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new g_(e,cs.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(s=>this.Mi(s.updateTimeMs,t)&&!this.Ni(s.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Bd(e).U().next(t=>this.xi(t,18e5).map(s=>s.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Hp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A3(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,s){ee("IndexedDbPersistence","Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",i=function(c){return c===17?Cq:c===16?Rq:c===15?Zy:c===14?IC:c===13?bC:c===12?Sq:c===11?TC:void _e()}(this.hi);let o;return this.Ri.runTransaction(e,r,i,a=>(o=new g_(a,this.Qr?this.Qr.next():cs.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw qt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Z(z.FAILED_PRECONDITION,_C);return s(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>s(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return pu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Z(z.FAILED_PRECONDITION,Tg)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pu(e).put("owner",t)}static D(){return Cr.D()}bi(e){const t=pu(e);return t.get("owner").next(s=>this.vi(s)?(ee("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):H.resolve())}Mi(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(qt(`Detected an update time that is in the future: ${e} > ${s}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;R0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const s=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return ee("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return qt("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){qt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function pu(n){return sn(n,"owner")}function Bd(n){return sn(n,"clientMetadata")}function gv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.$i=s,this.Ui=r}static Wi(e,t){let s=De(),r=De();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new _v(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return R0()?8:vC(nn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,s,r){const i={result:null};return this.Yi(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,t,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new H3;return this.Xi(e,t,o).next(a=>{if(i.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>i.result)}es(e,t,s,r){return s.documentReadCount<this.ji?(wc()<=Ue.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Tc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(wc()<=Ue.DEBUG&&ee("QueryEngine","Query:",Tc(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.Hi*r?(wc()<=Ue.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Tc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(t))):H.resolve())}Yi(e,t){if(Kb(t))return H.resolve(null);let s=es(t);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=$f(t,null,"F"),s=es(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=De(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(c=>{const u=this.ts(t,a);return this.ns(t,u,o,c.readTime)?this.Yi(e,$f(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,s,r){return Kb(t)||r.isEqual(Te.min())?H.resolve(null):this.Ji.getDocuments(e,s).next(i=>{const o=this.ts(t,i);return this.ns(t,o,s,r)?H.resolve(null):(wc()<=Ue.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tc(t)),this.rs(e,o,t,mC(r,-1)).next(a=>a))})}ts(e,t){let s=new ft($C(e));return t.forEach((r,i)=>{Lh(e,i)&&(s=s.add(i))}),s}ns(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,s){return wc()<=Ue.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Tc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ss.min(),s)}rs(e,t,s,r){return this.Ji.getDocumentsMatchingQuery(e,s,r).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,t,s,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Lt(Ce),this._s=new wo(i=>Ra(i),Oh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(s)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function RP(n,e,t,s){return new W3(n,e,t,s)}async function CP(n,e){const t=fe(n);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,t.ls(e),t.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let c=De();for(const u of r){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(s,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function K3(n,e){const t=fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const f=u.batch,g=f.keys();let v=H.resolve();return g.forEach(w=>{v=v.next(()=>d.getEntry(c,w)).next(I=>{const b=u.docVersions.get(w);Ee(b!==null),I.version.compareTo(b)<0&&(f.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),d.addEntry(I)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,s,e,i).next(()=>i.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=De();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(s,r))})}function PP(n){const e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function z3(n,e){const t=fe(n),s=e.snapshotVersion;let r=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});r=t.os;const a=[];e.targetChanges.forEach((d,f)=>{const g=r.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(i,d.addedDocuments,f)));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Ut.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,s)),r=r.insert(f,v),function(I,b,O){return I.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,v,d)&&a.push(t.Ur.updateTargetData(i,v))});let c=us(),u=De();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(NP(i,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!s.isEqual(Te.min())){const d=t.Ur.getLastRemoteSnapshotVersion(i).next(f=>t.Ur.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(d)}return H.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.os=r,i))}function NP(n,e,t){let s=De(),r=De();return t.forEach(i=>s=s.add(i)),e.getEntries(n,s).next(i=>{let o=us();return t.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(Te.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:r}})}function G3(n,e){const t=fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function el(n,e){const t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return t.Ur.getTargetData(s,e).next(i=>i?(r=i,H.resolve(r)):t.Ur.allocateTargetId(s).next(o=>(r=new si(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Ur.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=t.os.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.os=t.os.insert(s.targetId,s),t._s.set(e,s.targetId)),s})}async function tl(n,e,t){const s=fe(n),r=s.os.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Eo(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.os=s.os.remove(e),s._s.delete(r.target)}function Hf(n,e,t){const s=fe(n);let r=Te.min(),i=De();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=fe(c),g=f._s.get(d);return g!==void 0?H.resolve(f.os.get(g)):f.Ur.getTargetData(u,d)}(s,o,es(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>s.ss.getDocumentsMatchingQuery(o,e,t?r:Te.min(),t?i:De())).next(a=>(OP(s,UC(e),a),{documents:a,Ts:i})))}function kP(n,e){const t=fe(n),s=fe(t.Ur),r=t.os.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",i=>s.ot(i,e).next(o=>o?o.target:null))}function DP(n,e){const t=fe(n),s=t.us.get(e)||Te.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.cs.getAllFromCollectionGroup(r,e,mC(s,-1),Number.MAX_SAFE_INTEGER)).then(r=>(OP(t,e,r),r))}function OP(n,e,t){let s=n.us.get(e)||Te.min();t.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),n.us.set(e,s)}async function Q3(n,e,t,s){const r=fe(n);let i=De(),o=us();for(const u of t){const d=e.Es(u.metadata.name);u.document&&(i=i.add(d));const f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),o=o.insert(d,f)}const a=r.cs.newChangeBuffer({trackRemovals:!0}),c=await el(r,function(d){return es(vl(He.fromString(`__bundle__/docs/${d}`)))}(s));return r.persistence.runTransaction("Apply bundle documents","readwrite",u=>NP(u,a,o).next(d=>(a.apply(u),d)).next(d=>r.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>r.Ur.addMatchingKeys(u,i,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))}async function Y3(n,e,t=De()){const s=await el(n,es(hv(e.bundledQuery))),r=fe(n);return r.persistence.runTransaction("Save named query","readwrite",i=>{const o=Ht(e.readTime);if(s.snapshotVersion.compareTo(o)>=0)return r.Gr.saveNamedQuery(i,e);const a=s.withResumeToken(Ut.EMPTY_BYTE_STRING,o);return r.os=r.os.insert(a.targetId,a),r.Ur.updateTargetData(i,a).next(()=>r.Ur.removeMatchingKeysForTargetId(i,s.targetId)).next(()=>r.Ur.addMatchingKeys(i,t,s.targetId)).next(()=>r.Gr.saveNamedQuery(i,e))})}function wI(n,e){return`firestore_clients_${n}_${e}`}function TI(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function bg(n,e){return`firestore_targets_${n}_${e}`}class Wf{constructor(e,t,s,r){this.user=e,this.batchId=t,this.state=s,this.error=r}static Rs(e,t,s){const r=JSON.parse(s);let i,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new Z(r.error.code,r.error.message))),o?new Wf(e,t,r.state,i):(qt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class $u{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Rs(e,t){const s=JSON.parse(t);let r,i=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return i&&s.error&&(i=typeof s.error.message=="string"&&typeof s.error.code=="string",i&&(r=new Z(s.error.code,s.error.message))),i?new $u(e,s.state,r):(qt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const s=JSON.parse(t);let r=typeof s=="object"&&s.activeTargetIds instanceof Array,i=sv();for(let o=0;r&&o<s.activeTargetIds.length;++o)r=EC(s.activeTargetIds[o]),i=i.add(s.activeTargetIds[o]);return r?new Kf(e,i):(qt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yv{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new yv(t.clientId,t.onlineState):(qt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class k_{constructor(){this.activeTargetIds=sv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ig{constructor(e,t,s,r,i){this.window=e,this.ui=t,this.persistenceKey=s,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Lt(Ce),this.started=!1,this.bs=[];const o=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=wI(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new k_),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const s of e){if(s===this.ps)continue;const r=this.getItem(wI(this.persistenceKey,s));if(r){const i=Kf.Rs(s,r);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const s=this.Ls(t);s&&this.Bs(s)}for(const s of this.bs)this.ws(s);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((s,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,s){this.qs(e,t,s),this.Qs(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(bg(this.persistenceKey,e));if(r){const i=$u.Rs(e,r);i&&(s=i.state)}}return t&&this.Ks.fs(e),this.Ns(),s}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bg(this.persistenceKey,e))}updateQueryState(e,t,s){this.$s(e,t,s)}handleUserChange(e,t,s){t.forEach(r=>{this.Qs(r)}),this.currentUser=e,s.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ee("SharedClientState","READ",e,t),t}setItem(e,t){ee("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ee("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(ee("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void qt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const s=this.Gs(t.key);return this.zs(s,null)}{const s=this.js(t.key,t.newValue);if(s)return this.zs(s.clientId,s)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const s=this.Hs(t.key,t.newValue);if(s)return this.Js(s)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const s=this.Ys(t.key,t.newValue);if(s)return this.Zs(s)}}else if(t.key===this.xs){if(t.newValue!==null){const s=this.Ls(t.newValue);if(s)return this.Bs(s)}}else if(t.key===this.vs){const s=function(i){let o=cs.oe;if(i!=null)try{const a=JSON.parse(i);Ee(typeof a=="number"),o=a}catch(a){qt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);s!==cs.oe&&this.sequenceNumberHandler(s)}else if(t.key===this.Os){const s=this.Xs(t.newValue);await Promise.all(s.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,s){const r=new Wf(this.currentUser,e,t,s),i=TI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Vs())}Qs(e){const t=TI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,s){const r=bg(this.persistenceKey,e),i=new $u(e,t,s);this.setItem(r,i.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const s=this.Gs(e);return Kf.Rs(s,t)}Hs(e,t){const s=this.Fs.exec(e),r=Number(s[1]),i=s[2]!==void 0?s[2]:null;return Wf.Rs(new pn(i),r,t)}Ys(e,t){const s=this.Ms.exec(e),r=Number(s[1]);return $u.Rs(r,t)}Ls(e){return yv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);ee("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const s=t?this.Ss.insert(e,t):this.Ss.remove(e),r=this.ks(this.Ss),i=this.ks(s),o=[],a=[];return i.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{i.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=s})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=sv();return e.forEach((s,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class xP{constructor(){this.so=new k_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,s){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new k_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jd=null;function Ag(){return jd===null?jd=function(){return 268435456+Math.round(2147483648*Math.random())}():jd++,"0x"+jd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class e6 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=s+"://"+t.host,this.vo=`projects/${r}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${i}`}get Fo(){return!1}Mo(t,s,r,i,o){const a=Ag(),c=this.xo(t,s.toUriEncodedString());ee("RestConnection",`Sending RPC '${t}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(t,c,u,r).then(d=>(ee("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Or("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}Lo(t,s,r,i,o,a){return this.Mo(t,s,r,i,o)}Oo(t,s,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}xo(t,s){const r=X3[t];return`${this.Do}/v1/${s}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,s,r){const i=Ag();return new Promise((o,a)=>{const c=new aC;c.setWithCredentials(!0),c.listenOnce(cC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case af.NO_ERROR:const d=c.getResponseJson();ee(Dn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case af.TIMEOUT:ee(Dn,`RPC '${e}' ${i} timed out`),a(new Z(z.DEADLINE_EXCEEDED,"Request time out"));break;case af.HTTP_ERROR:const f=c.getStatus();if(ee(Dn,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const w=function(b){const O=b.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(O)>=0?O:z.UNKNOWN}(v.status);a(new Z(w,v.message))}else a(new Z(z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Z(z.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{ee(Dn,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(r);ee(Dn,`RPC '${e}' ${i} sending request:`,r),c.send(t,"POST",u,s,15)})}Bo(e,t,s){const r=Ag(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hC(),a=uC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,s),c.encodeInitMessageHeaders=!0;const d=i.join("");ee(Dn,`Creating RPC '${e}' stream ${r}: ${d}`,c);const f=o.createWebChannel(d,c);let g=!1,v=!1;const w=new Z3({Io:b=>{v?ee(Dn,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(g||(ee(Dn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),ee(Dn,`RPC '${e}' stream ${r} sending:`,b),f.send(b))},To:()=>f.close()}),I=(b,O,x)=>{b.listen(O,M=>{try{x(M)}catch(K){setTimeout(()=>{throw K},0)}})};return I(f,bu.EventType.OPEN,()=>{v||(ee(Dn,`RPC '${e}' stream ${r} transport opened.`),w.yo())}),I(f,bu.EventType.CLOSE,()=>{v||(v=!0,ee(Dn,`RPC '${e}' stream ${r} transport closed`),w.So())}),I(f,bu.EventType.ERROR,b=>{v||(v=!0,Or(Dn,`RPC '${e}' stream ${r} transport errored:`,b),w.So(new Z(z.UNAVAILABLE,"The operation could not be completed")))}),I(f,bu.EventType.MESSAGE,b=>{var O;if(!v){const x=b.data[0];Ee(!!x);const M=x,K=M.error||((O=M[0])===null||O===void 0?void 0:O.error);if(K){ee(Dn,`RPC '${e}' stream ${r} received error:`,K);const ie=K.status;let re=function(N){const L=Yt[N];if(L!==void 0)return ZC(L)}(ie),R=K.message;re===void 0&&(re=z.INTERNAL,R="Unknown error status: "+ie+" with message "+K.message),v=!0,w.So(new Z(re,R)),f.close()}else ee(Dn,`RPC '${e}' stream ${r} received:`,x),w.bo(x)}}),I(a,lC.STAT_EVENT,b=>{b.stat===p_.PROXY?ee(Dn,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===p_.NOPROXY&&ee(Dn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){return typeof window<"u"?window:null}function pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(n){return new o3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,t,s=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=t,this.ko=s,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),s=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-s);r>0&&ee("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t,s,r,i,o,a,c){this.ui=e,this.Ho=s,this.Jo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.Yo===t&&this.P_(s,r)},s=>{e(()=>{const r=new Z(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.I_(r)})})}P_(e,t){const s=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{s(()=>this.listener.Eo())}),this.stream.Ro(()=>{s(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{s(()=>this.I_(r))}),this.stream.onMessage(r=>{s(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t6 extends VP{constructor(e,t,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=l3(this.serializer,e),s=function(i){if(!("targetChange"in i))return Te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Te.min():o.readTime?Ht(o.readTime):Te.min()}(e);return this.listener.d_(t,s)}A_(e){const t={};t.database=S_(this.serializer),t.addTarget=function(i,o){let a;const c=o.target;if(a=Ff(c)?{documents:lP(i,c)}:{query:uP(i,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sP(i,o.resumeToken);const u=I_(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Te.min())>0){a.readTime=Zc(i,o.snapshotVersion.toTimestamp());const u=I_(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const s=h3(this.serializer,e);s&&(t.labels=s),this.a_(t)}R_(e){const t={};t.database=S_(this.serializer),t.removeTarget=e,this.a_(t)}}class n6 extends VP{constructor(e,t,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=u3(e.writeResults,e.commitTime),s=Ht(e.commitTime);return this.listener.g_(s,t)}p_(){const e={};e.database=S_(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>mh(this.serializer,s))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6 extends class{}{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,s,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,A_(t,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(z.UNKNOWN,i.toString())})}Lo(e,t,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,A_(t,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class r6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(qt(t),this.D_=!1):ee("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,t,s,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{s.enqueueAndForget(async()=>{To(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=fe(c);u.L_.add(4),await Tl(u),u.q_.set("Unknown"),u.L_.delete(4),await $h(u)}(this))})}),this.q_=new r6(s,r)}}async function $h(n){if(To(n))for(const e of n.B_)await e(!0)}async function Tl(n){for(const e of n.B_)await e(!1)}function Kp(n,e){const t=fe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Tv(t)?wv(t):Il(t).r_()&&Ev(t,e))}function nl(n,e){const t=fe(n),s=Il(t);t.N_.delete(e),s.r_()&&MP(t,e),t.N_.size===0&&(s.r_()?s.o_():To(t)&&t.q_.set("Unknown"))}function Ev(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Il(n).A_(e)}function MP(n,e){n.Q_.xe(e),Il(n).R_(e)}function wv(n){n.Q_=new n3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Il(n).start(),n.q_.v_()}function Tv(n){return To(n)&&!Il(n).n_()&&n.N_.size>0}function To(n){return fe(n).L_.size===0}function FP(n){n.Q_=void 0}async function o6(n){n.q_.set("Online")}async function a6(n){n.N_.forEach((e,t)=>{Ev(n,e)})}async function c6(n,e){FP(n),Tv(n)?(n.q_.M_(e),wv(n)):n.q_.set("Unknown")}async function l6(n,e,t){if(n.q_.set("Online"),e instanceof nP&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(n,e)}catch(s){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zf(n,s)}else if(e instanceof ff?n.Q_.Ke(e):e instanceof tP?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Te.min()))try{const s=await PP(n.localStore);t.compareTo(s)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.N_.get(u);d&&i.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const d=i.N_.get(c);if(!d)return;i.N_.set(c,d.withResumeToken(Ut.EMPTY_BYTE_STRING,d.snapshotVersion)),MP(i,c);const f=new si(d.target,c,u,d.sequenceNumber);Ev(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(s){ee("RemoteStore","Failed to raise snapshot:",s),await zf(n,s)}}async function zf(n,e,t){if(!Eo(e))throw e;n.L_.add(1),await Tl(n),n.q_.set("Offline"),t||(t=()=>PP(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await $h(n)})}function UP(n,e){return e().catch(t=>zf(n,t,e))}async function bl(n){const e=fe(n),t=uo(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;u6(e);)try{const r=await G3(e.localStore,s);if(r===null){e.O_.length===0&&t.o_();break}s=r.batchId,h6(e,r)}catch(r){await zf(e,r)}$P(e)&&BP(e)}function u6(n){return To(n)&&n.O_.length<10}function h6(n,e){n.O_.push(e);const t=uo(n);t.r_()&&t.V_&&t.m_(e.mutations)}function $P(n){return To(n)&&!uo(n).n_()&&n.O_.length>0}function BP(n){uo(n).start()}async function d6(n){uo(n).p_()}async function f6(n){const e=uo(n);for(const t of n.O_)e.m_(t.mutations)}async function p6(n,e,t){const s=n.O_.shift(),r=av.from(s,e,t);await UP(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await bl(n)}async function m6(n,e){e&&uo(n).V_&&await async function(s,r){if(function(o){return XC(o)&&o!==z.ABORTED}(r.code)){const i=s.O_.shift();uo(s).s_(),await UP(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await bl(s)}}(n,e),$P(n)&&BP(n)}async function II(n,e){const t=fe(n);t.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const s=To(t);t.L_.add(3),await Tl(t),s&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await $h(t)}async function D_(n,e){const t=fe(n);e?(t.L_.delete(2),await $h(t)):e||(t.L_.add(2),await Tl(t),t.q_.set("Unknown"))}function Il(n){return n.K_||(n.K_=function(t,s,r){const i=fe(t);return i.w_(),new t6(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Eo:o6.bind(null,n),Ro:a6.bind(null,n),mo:c6.bind(null,n),d_:l6.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Tv(n)?wv(n):n.q_.set("Unknown")):(await n.K_.stop(),FP(n))})),n.K_}function uo(n){return n.U_||(n.U_=function(t,s,r){const i=fe(t);return i.w_(),new n6(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:d6.bind(null,n),mo:m6.bind(null,n),f_:f6.bind(null,n),g_:p6.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await bl(n)):(await n.U_.stop(),n.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t,s,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,i){const o=Date.now()+s,a=new bv(e,t,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Al(n,e){if(qt("AsyncQueue",`${e}: ${n}`),Eo(n))return new Z(z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.comparator=e?(t,s)=>e(t,s)||ue.comparator(t.key,s.key):(t,s)=>ue.comparator(t.key,s.key),this.keyedMap=Iu(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new Fc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Fc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.W_=new Lt(ue.comparator)}track(e){const t=e.doc.key,s=this.W_.get(t);s?e.type!==0&&s.type===3?this.W_=this.W_.insert(t,e):e.type===3&&s.type!==1?this.W_=this.W_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.W_=this.W_.remove(t):e.type===1&&s.type===2?this.W_=this.W_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,s)=>{e.push(s)}),e}}class sl{constructor(e,t,s,r,i,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,s,r,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new sl(e,t,Fc.emptySet(t),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _6{constructor(){this.queries=SI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,s){const r=fe(t),i=r.queries;r.queries=SI(),i.forEach((o,a)=>{for(const c of a.j_)c.onError(s)})})(this,new Z(z.ABORTED,"Firestore shutting down"))}}function SI(){return new wo(n=>FC(n),xh)}async function Iv(n,e){const t=fe(n);let s=3;const r=e.query;let i=t.queries.get(r);i?!i.H_()&&e.J_()&&(s=2):(i=new g6,s=e.J_()?0:1);try{switch(s){case 0:i.z_=await t.onListen(r,!0);break;case 1:i.z_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=Al(o,`Initialization of query '${Tc(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,i),i.j_.push(e),e.Z_(t.onlineState),i.z_&&e.X_(i.z_)&&Sv(t)}async function Av(n,e){const t=fe(n),s=e.query;let r=3;const i=t.queries.get(s);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?r=e.J_()?0:1:!i.H_()&&e.J_()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function y6(n,e){const t=fe(n);let s=!1;for(const r of e){const i=r.query,o=t.queries.get(i);if(o){for(const a of o.j_)a.X_(r)&&(s=!0);o.z_=r}}s&&Sv(t)}function v6(n,e,t){const s=fe(n),r=s.queries.get(e);if(r)for(const i of r.j_)i.onError(t);s.queries.delete(e)}function Sv(n){n.Y_.forEach(e=>{e.next()})}var O_,RI;(RI=O_||(O_={})).ea="default",RI.Cache="cache";class Rv{constructor(e,t,s){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=s||{}}X_(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new sl(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const s=t!=="Offline";return(!this.options._a||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==O_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.serializer=e}Es(e){return Pr(this.serializer,e)}ds(e){return e.metadata.exists?cP(this.serializer,e.document,!1):At.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ht(e)}}class w6{constructor(e,t,s){this.ca=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const s=He.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,s=new CI(this.serializer);for(const r of e)if(r.metadata.queries){const i=s.Es(r.metadata.name);for(const o of r.metadata.queries){const a=(t.get(o)||De()).add(i);t.set(o,a)}}return t}async complete(){const e=await Q3(this.localStore,new CI(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const s of this.queries)await Y3(this.localStore,s,t.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function jP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.key=e}}class HP{constructor(e){this.key=e}}class WP{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=De(),this.mutatedKeys=De(),this.Aa=$C(e),this.Ra=new Fc(this.Aa)}get Va(){return this.Ta}ma(e,t){const s=t?t.fa:new AI,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{const g=r.get(d),v=Lh(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let b=!1;g&&v?g.data.isEqual(v.data)?w!==I&&(s.track({type:3,doc:v}),b=!0):this.ga(g,v)||(s.track({type:2,doc:v}),b=!0,(c&&this.Aa(v,c)>0||u&&this.Aa(v,u)<0)&&(a=!0)):!g&&v?(s.track({type:0,doc:v}),b=!0):g&&!v&&(s.track({type:1,doc:g}),b=!0,(c||u)&&(a=!0)),b&&(v?(o=o.add(v),i=I?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{Ra:o,fa:s,ns:a,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(v,w){const I=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return I(v)-I(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(s),r=r!=null&&r;const a=t&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new sl(this.query,e.Ra,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new AI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=De(),this.Ra.forEach(s=>{this.Sa(s.key)&&(this.da=this.da.add(s.key))});const t=[];return e.forEach(s=>{this.da.has(s)||t.push(new HP(s))}),this.da.forEach(s=>{e.has(s)||t.push(new qP(s))}),t}ba(e){this.Ta=e.Ts,this.da=De();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return sl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class T6{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class b6{constructor(e){this.key=e,this.va=!1}}class I6{constructor(e,t,s,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new wo(a=>FC(a),xh),this.Ma=new Map,this.xa=new Set,this.Oa=new Lt(ue.comparator),this.Na=new Map,this.La=new pv,this.Ba={},this.ka=new Map,this.qa=Da.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function A6(n,e,t=!0){const s=zp(n);let r;const i=s.Fa.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Da()):r=await KP(s,e,t,!0),r}async function S6(n,e){const t=zp(n);await KP(t,e,!0,!1)}async function KP(n,e,t,s){const r=await el(n.localStore,es(e)),i=r.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return s&&(a=await Cv(n,e,i,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&Kp(n.remoteStore,r),a}async function Cv(n,e,t,s,r){n.Ka=(f,g,v)=>async function(I,b,O,x){let M=b.view.ma(O);M.ns&&(M=await Hf(I.localStore,b.query,!1).then(({documents:R})=>b.view.ma(R,M)));const K=x&&x.targetChanges.get(b.targetId),ie=x&&x.targetMismatches.get(b.targetId)!=null,re=b.view.applyChanges(M,I.isPrimaryClient,K,ie);return x_(I,b.targetId,re.wa),re.snapshot}(n,f,g,v);const i=await Hf(n.localStore,e,!0),o=new WP(e,i.Ts),a=o.ma(i.documents),c=Fh.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),u=o.applyChanges(a,n.isPrimaryClient,c);x_(n,t,u.wa);const d=new T6(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}async function R6(n,e,t){const s=fe(n),r=s.Fa.get(e),i=s.Ma.get(r.targetId);if(i.length>1)return s.Ma.set(r.targetId,i.filter(o=>!xh(o,e))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await tl(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),t&&nl(s.remoteStore,r.targetId),rl(s,r.targetId)}).catch(vo)):(rl(s,r.targetId),await tl(s.localStore,r.targetId,!0))}async function C6(n,e){const t=fe(n),s=t.Fa.get(e),r=t.Ma.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),nl(t.remoteStore,s.targetId))}async function P6(n,e,t){const s=Dv(n);try{const r=await function(o,a){const c=fe(o),u=Dt.now(),d=a.reduce((v,w)=>v.add(w.key),De());let f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=us(),I=De();return c.cs.getEntries(v,d).next(b=>{w=b,w.forEach((O,x)=>{x.isValidDocument()||(I=I.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(b=>{f=b;const O=[];for(const x of a){const M=Zq(x,f.get(x.key).overlayedDocument);M!=null&&O.push(new vi(x.key,M,PC(M.value.mapValue),kt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,O,a)}).next(b=>{g=b;const O=b.applyToLocalDocumentSet(f,I);return c.documentOverlayCache.saveOverlays(v,b.batchId,O)})}).then(()=>({batchId:g.batchId,changes:jC(f)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new Lt(Ce)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(s,r.batchId,t),await Ei(s,r.changes),await bl(s.remoteStore)}catch(r){const i=Al(r,"Failed to persist write");t.reject(i)}}async function zP(n,e){const t=fe(n);try{const s=await z3(t.localStore,e);e.targetChanges.forEach((r,i)=>{const o=t.Na.get(i);o&&(Ee(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Ee(o.va):r.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),await Ei(t,s,e)}catch(s){await vo(s)}}function PI(n,e,t){const s=fe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const c=fe(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(const g of f.j_)g.Z_(a)&&(u=!0)}),u&&Sv(c)}(s.eventManager,e),r.length&&s.Ca.d_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function N6(n,e,t){const s=fe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Na.get(e),i=r&&r.key;if(i){let o=new Lt(ue.comparator);o=o.insert(i,At.newNoDocument(i,Te.min()));const a=De().add(i),c=new Mh(Te.min(),new Map,new Lt(Ce),o,a);await zP(s,c),s.Oa=s.Oa.remove(i),s.Na.delete(e),kv(s)}else await tl(s.localStore,e,!1).then(()=>rl(s,e,t)).catch(vo)}async function k6(n,e){const t=fe(n),s=e.batch.batchId;try{const r=await K3(t.localStore,e);Nv(t,s,null),Pv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ei(t,r)}catch(r){await vo(r)}}async function D6(n,e,t){const s=fe(n);try{const r=await function(o,a){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Ee(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(s.localStore,e);Nv(s,e,t),Pv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ei(s,r)}catch(r){await vo(r)}}async function O6(n,e){const t=fe(n);To(t.remoteStore)||ee("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=await function(o){const a=fe(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(s===-1)return void e.resolve();const r=t.ka.get(s)||[];r.push(e),t.ka.set(s,r)}catch(s){const r=Al(s,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}function Pv(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Nv(n,e,t){const s=fe(n);let r=s.Ba[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(t?i.reject(t):i.resolve(),r=r.remove(e)),s.Ba[s.currentUser.toKey()]=r}}function rl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Ma.get(e))n.Fa.delete(s),t&&n.Ca.$a(s,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(s=>{n.La.containsKey(s)||GP(n,s)})}function GP(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(nl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),kv(n))}function x_(n,e,t){for(const s of t)s instanceof qP?(n.La.addReference(s.key,e),x6(n,s)):s instanceof HP?(ee("SyncEngine","Document no longer in limbo: "+s.key),n.La.removeReference(s.key,e),n.La.containsKey(s.key)||GP(n,s.key)):_e()}function x6(n,e){const t=e.key,s=t.path.canonicalString();n.Oa.get(t)||n.xa.has(s)||(ee("SyncEngine","New document in limbo: "+t),n.xa.add(s),kv(n))}function kv(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ue(He.fromString(e)),s=n.qa.next();n.Na.set(s,new b6(t)),n.Oa=n.Oa.insert(t,s),Kp(n.remoteStore,new si(es(vl(t.path)),s,"TargetPurposeLimboResolution",cs.oe))}}async function Ei(n,e,t){const s=fe(n),r=[],i=[],o=[];s.Fa.isEmpty()||(s.Fa.forEach((a,c)=>{o.push(s.Ka(c,e,t).then(u=>{var d;if((u||t)&&s.isPrimaryClient){const f=u?!u.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;s.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){r.push(u);const f=_v.Wi(c.targetId,u);i.push(f)}}))}),await Promise.all(o),s.Ca.d_(r),await async function(c,u){const d=fe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(u,g=>H.forEach(g.$i,v=>d.persistence.referenceDelegate.addReference(f,g.targetId,v)).next(()=>H.forEach(g.Ui,v=>d.persistence.referenceDelegate.removeReference(f,g.targetId,v)))))}catch(f){if(!Eo(f))throw f;ee("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const g=f.targetId;if(!f.fromCache){const v=d.os.get(g),w=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,I)}}}(s.localStore,i))}async function L6(n,e){const t=fe(n);if(!t.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const s=await CP(t.localStore,e);t.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(c=>{c.reject(new Z(z.CANCELLED,o))})}),i.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ei(t,s.hs)}}function V6(n,e){const t=fe(n),s=t.Na.get(e);if(s&&s.va)return De().add(s.key);{let r=De();const i=t.Ma.get(e);if(!i)return r;for(const o of i){const a=t.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}async function M6(n,e){const t=fe(n),s=await Hf(t.localStore,e.query,!0),r=e.view.ba(s);return t.isPrimaryClient&&x_(t,e.targetId,r.wa),r}async function F6(n,e){const t=fe(n);return DP(t.localStore,e).then(s=>Ei(t,s))}async function U6(n,e,t,s){const r=fe(n),i=await function(a,c){const u=fe(a),d=fe(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?u.localDocuments.getDocuments(f,g):H.resolve(null)))}(r.localStore,e);i!==null?(t==="pending"?await bl(r.remoteStore):t==="acknowledged"||t==="rejected"?(Nv(r,e,s||null),Pv(r,e),function(a,c){fe(fe(a).mutationQueue).On(c)}(r.localStore,e)):_e(),await Ei(r,i)):ee("SyncEngine","Cannot apply mutation batch with id: "+e)}async function $6(n,e){const t=fe(n);if(zp(t),Dv(t),e===!0&&t.Qa!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),r=await NI(t,s.toArray());t.Qa=!0,await D_(t.remoteStore,!0);for(const i of r)Kp(t.remoteStore,i)}else if(e===!1&&t.Qa!==!1){const s=[];let r=Promise.resolve();t.Ma.forEach((i,o)=>{t.sharedClientState.isLocalQueryTarget(o)?s.push(o):r=r.then(()=>(rl(t,o),tl(t.localStore,o,!0))),nl(t.remoteStore,o)}),await r,await NI(t,s),function(o){const a=fe(o);a.Na.forEach((c,u)=>{nl(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new Lt(ue.comparator)}(t),t.Qa=!1,await D_(t.remoteStore,!1)}}async function NI(n,e,t){const s=fe(n),r=[],i=[];for(const o of e){let a;const c=s.Ma.get(o);if(c&&c.length!==0){a=await el(s.localStore,es(c[0]));for(const u of c){const d=s.Fa.get(u),f=await M6(s,d);f.snapshot&&i.push(f.snapshot)}}else{const u=await kP(s.localStore,o);a=await el(s.localStore,u),await Cv(s,QP(u),o,!1,a.resumeToken)}r.push(a)}return s.Ca.d_(i),r}function QP(n){return MC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function B6(n){return function(t){return fe(fe(t).persistence).Qi()}(fe(n).localStore)}async function j6(n,e,t,s){const r=fe(n);if(r.Qa)return void ee("SyncEngine","Ignoring unexpected query state notification.");const i=r.Ma.get(e);if(i&&i.length>0)switch(t){case"current":case"not-current":{const o=await DP(r.localStore,UC(i[0])),a=Mh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ut.EMPTY_BYTE_STRING);await Ei(r,o,a);break}case"rejected":await tl(r.localStore,e,!0),rl(r,e,s);break;default:_e()}}async function q6(n,e,t){const s=zp(n);if(s.Qa){for(const r of e){if(s.Ma.has(r)&&s.sharedClientState.isActiveQueryTarget(r)){ee("SyncEngine","Adding an already active target "+r);continue}const i=await kP(s.localStore,r),o=await el(s.localStore,i);await Cv(s,QP(i),o.targetId,!1,o.resumeToken),Kp(s.remoteStore,o)}for(const r of t)s.Ma.has(r)&&await tl(s.localStore,r,!1).then(()=>{nl(s.remoteStore,r),rl(s,r)}).catch(vo)}}function zp(n){const e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N6.bind(null,e),e.Ca.d_=y6.bind(null,e.eventManager),e.Ca.$a=v6.bind(null,e.eventManager),e}function Dv(n){const e=fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D6.bind(null,e),e}function H6(n,e,t){const s=fe(n);(async function(i,o,a){try{const c=await o.getMetadata();if(await function(v,w){const I=fe(v),b=Ht(w.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",O=>I.Gr.getBundleMetadata(O,w.id)).then(O=>!!O&&O.createTime.compareTo(b)>=0)}(i.localStore,c))return await o.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(jP(c));const u=new w6(c,i.localStore,o.serializer);let d=await o.Ua();for(;d;){const g=await u.la(d);g&&a._updateProgress(g),d=await o.Ua()}const f=await u.complete();return await Ei(i,f.Ia,void 0),await function(v,w){const I=fe(v);return I.persistence.runTransaction("Save bundle","readwrite",b=>I.Gr.saveBundleMetadata(b,w))}(i.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return Or("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})(s,e,t).then(r=>{s.sharedClientState.notifyBundleLoaded(r)})}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return RP(this.persistence,new SP,e.initialUser,this.serializer)}Ga(e){return new AP(Wp.Zr,this.serializer)}Wa(e){return new xP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class YP extends gh{constructor(e,t,s){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Dv(this.Ja.syncEngine),await bl(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return RP(this.persistence,new SP,e.initialUser,this.serializer)}ja(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new C3(s,e.asyncQueue,t)}Ha(e,t){const s=new lq(t,this.persistence);return new cq(e.asyncQueue,s)}Ga(e){const t=gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?as.withCacheSize(this.cacheSizeBytes):as.DEFAULT;return new mv(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,LP(),pf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new xP}}class W6 extends YP{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Ig&&(this.sharedClientState.syncEngine={no:U6.bind(null,t),ro:j6.bind(null,t),io:q6.bind(null,t),Qi:B6.bind(null,t),eo:F6.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async s=>{await $6(this.Ja.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())})}Wa(e){const t=LP();if(!Ig.D(t))throw new Z(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=gv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ig(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class _h{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>PI(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=L6.bind(null,this.syncEngine),await D_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _6}()}createDatastore(e){const t=Uh(e.databaseInfo.databaseId),s=function(i){return new e6(i)}(e.databaseInfo);return function(i,o,a,c){return new s6(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,r,i,o,a){return new i6(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>PI(this.syncEngine,t,0),function(){return bI.D()?new bI:new J3}())}createSyncEngine(e,t){return function(r,i,o,a,c,u,d){const f=new I6(r,i,o,a,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const i=fe(r);ee("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Tl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}_h.provider={build:()=>new _h};function kI(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new bn,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(s=>{s&&s.ua()?this.metadata.resolve(s.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(s==null?void 0:s.aa)}`))},s=>this.metadata.reject(s))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),s=Number(t);isNaN(s)&&this.ru(`length string (${t}) is not valid number`);const r=await this.iu(s);return new E6(JSON.parse(r),e.length+s)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(r,i){const o=fe(r),a={documents:i.map(f=>ph(o.serializer,f))},c=await o.Lo("BatchGetDocuments",o.serializer.databaseId,He.emptyPath(),a,i.length),u=new Map;c.forEach(f=>{const g=c3(o.serializer,f);u.set(g.key.toString(),g)});const d=[];return i.forEach(f=>{const g=u.get(f.toString());Ee(!!g),d.push(g)}),d}(this.datastore,e);return t.forEach(s=>this.recordVersion(s)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new wl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,s)=>{const r=ue.fromPath(s);this.mutations.push(new iv(r,this.precondition(r)))}),await async function(s,r){const i=fe(s),o={writes:r.map(a=>mh(i.serializer,a))};await i.Mo("Commit",i.serializer.databaseId,He.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e();t=Te.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Z(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Te.min())?kt.exists(!1):kt.updateTime(t):kt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Te.min()))throw new Z(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kt.updateTime(t)}return kt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t,s,r,i){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=r,this.deferred=i,this._u=s.maxAttempts,this.t_=new vv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new z6(this.datastore),t=this.cu(e);t&&t.then(s=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(s)}).catch(r=>{this.lu(r)}))}).catch(s=>{this.lu(s)})})}cu(e){try{const t=this.updateFunction(e);return!Dh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!XC(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,t,s,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=pn.UNAUTHENTICATED,this.clientId=fC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Al(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Sg(n,e){n.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await CP(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function DI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Ov(n);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(s=>II(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>II(e.remoteStore,r)),n._onlineComponents=e}async function Ov(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Sg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===z.FAILED_PRECONDITION||r.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Or("Error using user provided cache. Falling back to memory cache: "+t),await Sg(n,new gh)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Sg(n,new gh);return n._offlineComponents}async function Qp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await DI(n,n._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await DI(n,new _h))),n._onlineComponents}function JP(n){return Ov(n).then(e=>e.persistence)}function xv(n){return Ov(n).then(e=>e.localStore)}function XP(n){return Qp(n).then(e=>e.remoteStore)}function Lv(n){return Qp(n).then(e=>e.syncEngine)}function Y6(n){return Qp(n).then(e=>e.datastore)}async function il(n){const e=await Qp(n),t=e.eventManager;return t.onListen=A6.bind(null,e.syncEngine),t.onUnlisten=R6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=C6.bind(null,e.syncEngine),t}function J6(n){return n.asyncQueue.enqueue(async()=>{const e=await JP(n),t=await XP(n);return e.setNetworkEnabled(!0),function(r){const i=fe(r);return i.L_.delete(0),$h(i)}(t)})}function X6(n){return n.asyncQueue.enqueue(async()=>{const e=await JP(n),t=await XP(n);return e.setNetworkEnabled(!1),async function(r){const i=fe(r);i.L_.add(0),await Tl(i),i.q_.set("Offline")}(t)})}function Z6(n,e){const t=new bn;return n.asyncQueue.enqueueAndForget(async()=>async function(r,i,o){try{const a=await function(u,d){const f=fe(u);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(r,i);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Z(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const c=Al(a,`Failed to get document '${i} from cache`);o.reject(c)}}(await xv(n),e,t)),t.promise}function ZP(n,e,t={}){const s=new bn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new Gp({next:g=>{d.Za(),o.enqueueAndForget(()=>Av(i,f));const v=g.docs.has(a);!v&&g.fromCache?u.reject(new Z(z.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?u.reject(new Z(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Rv(vl(a.path),d,{includeMetadataChanges:!0,_a:!0});return Iv(i,f)}(await il(n),n.asyncQueue,e,t,s)),s.promise}function e5(n,e){const t=new bn;return n.asyncQueue.enqueueAndForget(async()=>async function(r,i,o){try{const a=await Hf(r,i,!0),c=new WP(i,a.Ts),u=c.ma(a.documents),d=c.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){const c=Al(a,`Failed to execute query '${i} against cache`);o.reject(c)}}(await xv(n),e,t)),t.promise}function eN(n,e,t={}){const s=new bn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const d=new Gp({next:g=>{d.Za(),o.enqueueAndForget(()=>Av(i,f)),g.fromCache&&c.source==="server"?u.reject(new Z(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Rv(a,d,{includeMetadataChanges:!0,_a:!0});return Iv(i,f)}(await il(n),n.asyncQueue,e,t,s)),s.promise}function t5(n,e){const t=new Gp(e);return n.asyncQueue.enqueueAndForget(async()=>function(r,i){fe(r).Y_.add(i),i.next()}(await il(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(r,i){fe(r).Y_.delete(i)}(await il(n),t))}}function n5(n,e,t,s){const r=function(o,a){let c;return c=typeof o=="string"?eP().encode(o):o,function(d,f){return new K6(d,f)}(function(d,f){if(d instanceof Uint8Array)return kI(d,f);if(d instanceof ArrayBuffer)return kI(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Uh(e));n.asyncQueue.enqueueAndForget(async()=>{H6(await Lv(n),r,s)})}function s5(n,e){return n.asyncQueue.enqueue(async()=>function(s,r){const i=fe(s);return i.persistence.runTransaction("Get named query","readonly",o=>i.Gr.getNamedQuery(o,r))}(await xv(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(n,e,t){if(!t)throw new Z(z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nN(n,e,t,s){if(e===!0&&s===!0)throw new Z(z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xI(n){if(!ue.isDocumentKey(n))throw new Z(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LI(n){if(ue.isDocumentKey(n))throw new Z(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e()}function nt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Z(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yp(n);throw new Z(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sN(n,e){if(e<=0)throw new Z(z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tN((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bh{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VI(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Jj;switch(s.type){case"firstParty":return new tq(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Z(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=OI.get(t);s&&(ee("ComponentProvider","Removing Datastore"),OI.delete(t),s.terminate())}(this),Promise.resolve()}}function rN(n,e,t,s={}){var r;const i=(n=nt(n,Bh))._getSettings(),o=`${e}:${t}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),s.mockUserToken){let a,c;if(typeof s.mockUserToken=="string")a=s.mockUserToken,c=pn.MOCK_USER;else{a=Ry(s.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const u=s.mockUserToken.sub||s.mockUserToken.user_id;if(!u)throw new Z(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new pn(u)}n._authCredentials=new Xj(new dC(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ts=class iN{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new iN(this.firestore,e,this._query)}},xt=class oN{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oN(this.firestore,e,this._key)}},eo=class aN extends ts{constructor(e,t,s){super(e,t,vl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new ue(e))}withConverter(e){return new aN(this.firestore,e,this._path)}};function cN(n,e,...t){if(n=Pe(n),Vv("collection","path",e),n instanceof Bh){const s=He.fromString(e,...t);return LI(s),new eo(n,null,s)}{if(!(n instanceof xt||n instanceof eo))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(He.fromString(e,...t));return LI(s),new eo(n.firestore,null,s)}}function r5(n,e){if(n=nt(n,Bh),Vv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,function(s){return new yi(He.emptyPath(),s)}(e))}function Gf(n,e,...t){if(n=Pe(n),arguments.length===1&&(e=fC.newId()),Vv("doc","path",e),n instanceof Bh){const s=He.fromString(e,...t);return xI(s),new xt(n,null,new ue(s))}{if(!(n instanceof xt||n instanceof eo))throw new Z(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(He.fromString(e,...t));return xI(s),new xt(n.firestore,n instanceof eo?n.converter:null,new ue(s))}}function lN(n,e){return n=Pe(n),e=Pe(e),(n instanceof xt||n instanceof eo)&&(e instanceof xt||e instanceof eo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uN(n,e){return n=Pe(n),e=Pe(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&xh(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vv(this,"async_queue_retry"),this.Vu=()=>{const s=pf();s&&ee("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()},this.mu=e;const t=pf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=pf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Eo(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(s=>{this.Eu=s,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw qt("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.du=!1,s))));return this.mu=t,t}enqueueAfterDelay(e,t,s){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=bv.createAndSchedule(this,e,t,s,i=>this.yu(i));return this.Tu.push(r),r}fu(){this.Eu&&_e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function L_(n){return function(t,s){if(typeof t!="object"||t===null)return!1;const r=t;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(n,["next","error","complete"])}class i5{constructor(){this._progressObserver={},this._taskCompletionResolver=new bn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=-1;let Wt=class extends Bh{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new MI,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MI(e),this._firestoreClient=void 0,await e}}};function a5(n,e){const t=typeof n=="object"?n:gl(),s=typeof n=="string"?n:"(default)",r=cr(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Sy("firestore");i&&rN(r,...i)}return r}function Bn(n){if(n._terminated)throw new Z(z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hN(n),n._firestoreClient}function hN(n){var e,t,s;const r=n._freezeSettings(),i=function(a,c,u,d){return new kq(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,tN(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Q6(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(n._componentsProvider))}function c5(n,e){Or("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return dN(n,_h.provider,{build:s=>new YP(s,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function l5(n){Or("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();dN(n,_h.provider,{build:t=>new W6(t,e.cacheSizeBytes)})}function dN(n,e,t){if((n=nt(n,Wt))._firestoreClient||n._terminated)throw new Z(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Z(z.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},hN(n)}function u5(n){if(n._initialized&&!n._terminated)throw new Z(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new bn;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(s){if(!Cr.D())return Promise.resolve();const r=s+"main";await Cr.delete(r)}(gv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function h5(n){return function(t){const s=new bn;return t.asyncQueue.enqueueAndForget(async()=>O6(await Lv(t),s)),s.promise}(Bn(n=nt(n,Wt)))}function d5(n){return J6(Bn(n=nt(n,Wt)))}function f5(n){return X6(Bn(n=nt(n,Wt)))}function p5(n,e){const t=Bn(n=nt(n,Wt)),s=new i5;return n5(t,n._databaseId,e,s),s}function m5(n,e){return s5(Bn(n=nt(n,Wt)),e).then(t=>t?new ts(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(Ut.fromBase64String(e))}catch(t){throw new Z(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lr(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5=/^__.*__$/;class _5{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new El(e,this.data,t,this.fieldTransforms)}}class fN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Xp{constructor(e,t,s,r,i,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Xp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:s,xu:!1});return r.Ou(e),r}Nu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Fu({path:s,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pN(this.Cu)&&g5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class y5{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Uh(e)}Qu(e,t,s,r=!1){return new Xp({Cu:e,methodName:t,qu:s,path:Nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qa(n){const e=n._freezeSettings(),t=Uh(n._databaseId);return new y5(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zp(n,e,t,s,r,i={}){const o=n.Qu(i.merge||i.mergeFields?2:0,e,t,r);Hv("Data must be an object, but it was:",o,s);const a=_N(s,o);let c,u;if(i.merge)c=new ls(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const g=V_(e,f,t);if(!o.contains(g))throw new Z(z.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);vN(d,g)||d.push(g)}c=new ls(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new _5(new Tn(a),c,u)}class jh extends ja{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function mN(n,e,t){return new Xp({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Fv extends ja{_toFieldTransform(e){return new Vh(e.path,new Jc)}isEqual(e){return e instanceof Fv}}class Uv extends ja{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=mN(this,e,!0),s=this.Ku.map(i=>Ha(i,t)),r=new Ca(s);return new Vh(e.path,r)}isEqual(e){return e instanceof Uv&&Ea(this.Ku,e.Ku)}}class $v extends ja{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=mN(this,e,!0),s=this.Ku.map(i=>Ha(i,t)),r=new Pa(s);return new Vh(e.path,r)}isEqual(e){return e instanceof $v&&Ea(this.Ku,e.Ku)}}class Bv extends ja{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Xc(e.serializer,WC(e.serializer,this.$u));return new Vh(e.path,t)}isEqual(e){return e instanceof Bv&&this.$u===e.$u}}function jv(n,e,t,s){const r=n.Qu(1,e,t);Hv("Data must be an object, but it was:",r,s);const i=[],o=Tn.empty();Ba(s,(c,u)=>{const d=Wv(e,c,t);u=Pe(u);const f=r.Nu(d);if(u instanceof jh)i.push(d);else{const g=Ha(u,f);g!=null&&(i.push(d),o.set(d,g))}});const a=new ls(i);return new fN(o,a,r.fieldTransforms)}function qv(n,e,t,s,r,i){const o=n.Qu(1,e,t),a=[V_(e,s,t)],c=[r];if(i.length%2!=0)throw new Z(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)a.push(V_(e,i[g])),c.push(i[g+1]);const u=[],d=Tn.empty();for(let g=a.length-1;g>=0;--g)if(!vN(u,a[g])){const v=a[g];let w=c[g];w=Pe(w);const I=o.Nu(v);if(w instanceof jh)u.push(v);else{const b=Ha(w,I);b!=null&&(u.push(v),d.set(v,b))}}const f=new ls(u);return new fN(d,f,o.fieldTransforms)}function gN(n,e,t,s=!1){return Ha(t,n.Qu(s?4:3,e))}function Ha(n,e){if(yN(n=Pe(n)))return Hv("Unsupported field value:",e,n),_N(n,e);if(n instanceof ja)return function(s,r){if(!pN(r.Cu))throw r.Bu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=Ha(a,r.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(s,r){if((s=Pe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return WC(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Dt.fromDate(s);return{timestampValue:Zc(r.serializer,i)}}if(s instanceof Dt){const i=new Dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Zc(r.serializer,i)}}if(s instanceof Jp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Lr)return{bytesValue:sP(r.serializer,s._byteString)};if(s instanceof xt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uv(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Mv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return rv(a.serializer,c)})}}}}}}(s,r);throw r.Bu(`Unsupported field value: ${Yp(s)}`)}(n,e)}function _N(n,e){const t={};return AC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(n,(s,r)=>{const i=Ha(r,e.Mu(s));i!=null&&(t[s]=i)}),{mapValue:{fields:t}}}function yN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dt||n instanceof Jp||n instanceof Lr||n instanceof xt||n instanceof ja||n instanceof Mv)}function Hv(n,e,t){if(!yN(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const s=Yp(t);throw s==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+s)}}function V_(n,e,t){if((e=Pe(e))instanceof ho)return e._internalPath;if(typeof e=="string")return Wv(n,e);throw Qf("Field path arguments must be of type string or ",n,!1,void 0,t)}const v5=new RegExp("[~\\*/\\[\\]]");function Wv(n,e,t){if(e.search(v5)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ho(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qf(n,e,t,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new Z(z.INVALID_ARGUMENT,a+n+c)}function vN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,t,s,r,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new E5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(em("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class E5 extends yh{data(){return super.data()}}function em(n,e){return typeof e=="string"?Wv(n,e):e instanceof ho?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kv{}class qh extends Kv{}function Bi(n,e,...t){let s=[];e instanceof Kv&&s.push(e),s=s.concat(t),function(i){const o=i.filter(c=>c instanceof zv).length,a=i.filter(c=>c instanceof tm).length;if(o>1||o>0&&a>0)throw new Z(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)n=r._apply(n);return n}class tm extends qh{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new tm(e,t,s)}_apply(e){const t=this._parse(e);return TN(e._query,t),new ts(e.firestore,e.converter,b_(e._query,t))}_parse(e){const t=qa(e.firestore);return function(i,o,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Z(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){UI(f,d);const v=[];for(const w of f)v.push(FI(c,i,w));g={arrayValue:{values:v}}}else g=FI(c,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||UI(f,d),g=gN(a,o,f,d==="in"||d==="not-in");return We.create(u,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function w5(n,e,t){const s=e,r=em("where",n);return tm._create(r,s,t)}class zv extends Kv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zv(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:lt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const c of a)TN(o,c),o=b_(o,c)}(e._query,t),new ts(e.firestore,e.converter,b_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gv extends qh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gv(e,t)}_apply(e){const t=function(r,i,o){if(r.startAt!==null)throw new Z(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new Z(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fh(i,o)}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new yi(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function T5(n,e="asc"){const t=e,s=em("orderBy",n);return Gv._create(s,t)}class nm extends qh{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new nm(e,t,s)}_apply(e){return new ts(e.firestore,e.converter,$f(e._query,this._limit,this._limitType))}}function b5(n){return sN("limit",n),nm._create("limit",n,"F")}function I5(n){return sN("limitToLast",n),nm._create("limitToLast",n,"L")}class sm extends qh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new sm(e,t,s)}_apply(e){const t=wN(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,function(r,i){return new yi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)}(e._query,t))}}function A5(...n){return sm._create("startAt",n,!0)}function S5(...n){return sm._create("startAfter",n,!1)}class rm extends qh{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new rm(e,t,s)}_apply(e){const t=wN(e,this.type,this._docOrFields,this._inclusive);return new ts(e.firestore,e.converter,function(r,i){return new yi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)}(e._query,t))}}function R5(...n){return rm._create("endBefore",n,!1)}function C5(...n){return rm._create("endAt",n,!0)}function wN(n,e,t,s){if(t[0]=Pe(t[0]),t[0]instanceof yh)return function(i,o,a,c,u){if(!c)throw new Z(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of Mc(i))if(f.field.isKeyField())d.push(Sa(o,c.key));else{const g=c.data.field(f.field);if(Up(g))throw new Z(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const v=f.field.canonicalString();throw new Z(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}d.push(g)}return new lo(d,u)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const r=qa(n.firestore);return function(o,a,c,u,d,f){const g=o.explicitOrderBy;if(d.length>g.length)throw new Z(z.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let w=0;w<d.length;w++){const I=d[w];if(g[w].field.isKeyField()){if(typeof I!="string")throw new Z(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof I}`);if(!nv(o)&&I.indexOf("/")!==-1)throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${I}' contains a slash.`);const b=o.path.child(He.fromString(I));if(!ue.isDocumentKey(b))throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const O=new ue(b);v.push(Sa(a,O))}else{const b=gN(c,u,I);v.push(b)}}return new lo(v,f)}(n._query,n.firestore._databaseId,r,e,t,s)}}function FI(n,e,t){if(typeof(t=Pe(t))=="string"){if(t==="")throw new Z(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nv(e)&&t.indexOf("/")!==-1)throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(He.fromString(t));if(!ue.isDocumentKey(s))throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Sa(n,new ue(s))}if(t instanceof xt)return Sa(n,t._key);throw new Z(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yp(t)}.`)}function UI(n,e){if(!Array.isArray(n)||n.length===0)throw new Z(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TN(n,e){const t=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Qv{convertValue(e,t="none"){switch(Aa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ba(e,(r,i)=>{s[r]=this.convertValue(i,t)}),s}convertVectorValue(e){var t,s,r;const i=(r=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Pt(o.doubleValue));return new Mv(i)}convertGeoPoint(e){return new Jp(Pt(e.latitude),Pt(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ev(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(uh(e));default:return null}}convertTimestamp(e){const t=di(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=He.fromString(e);Ee(pP(s));const r=new ao(s.get(1),s.get(3)),i=new ue(s.popFirst(5));return r.isEqual(t)||qt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class P5 extends Qv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let fi=class extends yh{constructor(e,t,s,r,i,o){super(e,t,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(em("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}},Bu=class extends fi{data(e={}){return super.data(e)}},fo=class{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ca(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Bu(this._firestore,this._userDataWriter,s.key,s,new ca(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const c=new Bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ca(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ca(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:N5(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function N5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}function bN(n,e){return n instanceof fi&&e instanceof fi?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fo&&e instanceof fo&&n._firestore===e._firestore&&uN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k5(n){n=nt(n,xt);const e=nt(n.firestore,Wt);return ZP(Bn(e),n._key).then(t=>Yv(e,n,t))}class Wa extends Qv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function D5(n){n=nt(n,xt);const e=nt(n.firestore,Wt),t=Bn(e),s=new Wa(e);return Z6(t,n._key).then(r=>new fi(e,s,n._key,r,new ca(r!==null&&r.hasLocalMutations,!0),n.converter))}function O5(n){n=nt(n,xt);const e=nt(n.firestore,Wt);return ZP(Bn(e),n._key,{source:"server"}).then(t=>Yv(e,n,t))}function x5(n){n=nt(n,ts);const e=nt(n.firestore,Wt),t=Bn(e),s=new Wa(e);return EN(n._query),eN(t,n._query).then(r=>new fo(e,s,n,r))}function L5(n){n=nt(n,ts);const e=nt(n.firestore,Wt),t=Bn(e),s=new Wa(e);return e5(t,n._query).then(r=>new fo(e,s,n,r))}function V5(n){n=nt(n,ts);const e=nt(n.firestore,Wt),t=Bn(e),s=new Wa(e);return eN(t,n._query,{source:"server"}).then(r=>new fo(e,s,n,r))}function $I(n,e,t){n=nt(n,xt);const s=nt(n.firestore,Wt),r=im(n.converter,e,t);return Hh(s,[Zp(qa(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,kt.none())])}function BI(n,e,t,...s){n=nt(n,xt);const r=nt(n.firestore,Wt),i=qa(r);let o;return o=typeof(e=Pe(e))=="string"||e instanceof ho?qv(i,"updateDoc",n._key,e,t,s):jv(i,"updateDoc",n._key,e),Hh(r,[o.toMutation(n._key,kt.exists(!0))])}function M5(n){return Hh(nt(n.firestore,Wt),[new wl(n._key,kt.none())])}function F5(n,e){const t=nt(n.firestore,Wt),s=Gf(n),r=im(n.converter,e);return Hh(t,[Zp(qa(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,kt.exists(!1))]).then(()=>s)}function IN(n,...e){var t,s,r;n=Pe(n);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||L_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(L_(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(s=f.error)===null||s===void 0?void 0:s.bind(f),e[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let c,u,d;if(n instanceof xt)u=nt(n.firestore,Wt),d=vl(n._key.path),c={next:f=>{e[o]&&e[o](Yv(u,n,f))},error:e[o+1],complete:e[o+2]};else{const f=nt(n,ts);u=nt(f.firestore,Wt),d=f._query;const g=new Wa(u);c={next:v=>{e[o]&&e[o](new fo(u,g,f,v))},error:e[o+1],complete:e[o+2]},EN(n._query)}return function(g,v,w,I){const b=new Gp(I),O=new Rv(v,b,w);return g.asyncQueue.enqueueAndForget(async()=>Iv(await il(g),O)),()=>{b.Za(),g.asyncQueue.enqueueAndForget(async()=>Av(await il(g),O))}}(Bn(u),d,a,c)}function U5(n,e){return t5(Bn(n=nt(n,Wt)),L_(e)?e:{next:e})}function Hh(n,e){return function(s,r){const i=new bn;return s.asyncQueue.enqueueAndForget(async()=>P6(await Lv(s),r,i)),i.promise}(Bn(n),e)}function Yv(n,e,t){const s=t.docs.get(e._key),r=new Wa(n);return new fi(n,r,e._key,s,new ca(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B5=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qa(e)}set(e,t,s){this._verifyNotCommitted();const r=Yi(e,this._firestore),i=im(r.converter,t,s),o=Zp(this._dataReader,"WriteBatch.set",r._key,i,r.converter!==null,s);return this._mutations.push(o.toMutation(r._key,kt.none())),this}update(e,t,s,...r){this._verifyNotCommitted();const i=Yi(e,this._firestore);let o;return o=typeof(t=Pe(t))=="string"||t instanceof ho?qv(this._dataReader,"WriteBatch.update",i._key,t,s,r):jv(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,kt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yi(e,this._firestore);return this._mutations=this._mutations.concat(new wl(t._key,kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Yi(n,e){if((n=Pe(n)).firestore!==e)throw new Z(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j5=class extends class{constructor(t,s){this._firestore=t,this._transaction=s,this._dataReader=qa(t)}get(t){const s=Yi(t,this._firestore),r=new P5(this._firestore);return this._transaction.lookup([s._key]).then(i=>{if(!i||i.length!==1)return _e();const o=i[0];if(o.isFoundDocument())return new yh(this._firestore,r,o.key,o,s.converter);if(o.isNoDocument())return new yh(this._firestore,r,s._key,null,s.converter);throw _e()})}set(t,s,r){const i=Yi(t,this._firestore),o=im(i.converter,s,r),a=Zp(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,a),this}update(t,s,r,...i){const o=Yi(t,this._firestore);let a;return a=typeof(s=Pe(s))=="string"||s instanceof ho?qv(this._dataReader,"Transaction.update",o._key,s,r,i):jv(this._dataReader,"Transaction.update",o._key,s),this._transaction.update(o._key,a),this}delete(t){const s=Yi(t,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yi(e,this._firestore),s=new Wa(this._firestore);return super.get(e).then(r=>new fi(this._firestore,s,t._key,r._document,new ca(!1,!1),t.converter))}};function q5(n,e,t){n=nt(n,Wt);const s=Object.assign(Object.assign({},$5),t);return function(i){if(i.maxAttempts<1)throw new Z(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(i,o,a){const c=new bn;return i.asyncQueue.enqueueAndForget(async()=>{const u=await Y6(i);new G6(i.asyncQueue,u,a,o,c).au()}),c.promise}(Bn(n),r=>e(new j5(n,r)),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(){return new jh("deleteField")}function W5(){return new Fv("serverTimestamp")}function K5(...n){return new Uv("arrayUnion",n)}function z5(...n){return new $v("arrayRemove",n)}function G5(n){return new Bv("increment",n)}(function(e,t=!0){(function(r){yl=r})(Vr),gs(new $n("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Wt(new Zj(s.getProvider("auth-internal")),new sq(s.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Z(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ao(u.options.projectId,d)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Jt(Nb,"4.7.3",e),Jt(Nb,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,t){this._delegate=e,this.firebase=t,th(e,new $n("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Dy(this._delegate)))}_getService(e,t=so){var s;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((s=r.getComponent())===null||s===void 0?void 0:s.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=so){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){th(this._delegate,e)}_addOrOverwriteComponent(e){M0(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},jI=new _i("app-compat","Firebase",Y5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(n){const e={},t={__esModule:!0,initializeApp:i,app:r,registerVersion:Jt,setLogLevel:B0,onLog:$0,apps:null,SDK_VERSION:Vr,INTERNAL:{registerComponent:a,removeApp:s,useAsService:c,modularAPIs:mU}};t.default=t,Object.defineProperty(t,"apps",{get:o});function s(u){delete e[u]}function r(u){if(u=u||so,!rr(e,u))throw jI.create("no-app",{appName:u});return e[u]}r.App=n;function i(u,d={}){const f=Np(u,d);if(rr(e,f.name))return e[f.name];const g=new n(f,t);return e[f.name]=g,g}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const d=u.name,f=d.replace("-compat","");if(gs(u)&&u.type==="PUBLIC"){const g=(v=r())=>{if(typeof v[f]!="function")throw jI.create("invalid-app-argument",{appName:d});return v[f]()};u.serviceProps!==void 0&&Zu(g,u.serviceProps),t[f]=g,n.prototype[f]=function(...v){return this._getService.bind(this,d).apply(this,u.multipleInstances?v:[])}}return u.type==="PUBLIC"?t[f]:null}function c(u,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){const n=J5(Q5);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:AN,extendNamespace:e,createSubscribe:N0,ErrorFactory:_i,deepExtend:Zu});function e(t){Zu(n,t)}return n}const X5=AN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new ml("@firebase/app-compat"),Z5="@firebase/app-compat",eH="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tH(n){Jt(Z5,eH,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=v0();if(n.firebase!==void 0){qI.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&qI.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Jv=X5;tH();var nH="firebase",sH="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jv.registerVersion(nH,sH,"app-compat");const rH="@firebase/firestore-compat",iH="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function WI(){if(!Pq())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}let SN=class M_{constructor(e){this._delegate=e}static fromBase64String(e){return WI(),new M_(Lr.fromBase64String(e))}static fromUint8Array(e){return HI(),new M_(Lr.fromUint8Array(e))}toBase64(){return WI(),this._delegate.toBase64()}toUint8Array(){return HI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(n){return oH(n,["next","error","complete"])}function oH(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{enableIndexedDbPersistence(e,t){return c5(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return l5(e._delegate)}clearIndexedDbPersistence(e){return u5(e._delegate)}}class RN{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof ao||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Or("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,s={}){rN(this._delegate,e,t,s)}enableNetwork(){return d5(this._delegate)}disableNetwork(){return f5(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,nN("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return h5(this._delegate)}onSnapshotsInSync(e){return U5(this._delegate,e)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ol(this,cN(this._delegate,e))}catch(t){throw Qn(t,"collection()","Firestore.collection()")}}doc(e){try{return new xs(this,Gf(this._delegate,e))}catch(t){throw Qn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Gn(this,r5(this._delegate,e))}catch(t){throw Qn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return q5(this._delegate,t=>e(new CN(this,t)))}batch(){return Bn(this._delegate),new PN(new B5(this._delegate,e=>Hh(this._delegate,e)))}loadBundle(e){return p5(this._delegate,e)}namedQuery(e){return m5(this._delegate,e).then(t=>t?new Gn(this,t):null)}}class om extends Qv{constructor(e){super(),this.firestore=e}convertBytes(e){return new SN(new Lr(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xs.forKey(t,this.firestore,null)}}function cH(n){Qj(n)}class CN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new om(e)}get(e){const t=la(e);return this._delegate.get(t).then(s=>new vh(this._firestore,new fi(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const r=la(e);return s?(Xv("Transaction.set",s),this._delegate.set(r,t,s)):this._delegate.set(r,t),this}update(e,t,s,...r){const i=la(e);return arguments.length===2?this._delegate.update(i,t):this._delegate.update(i,t,s,...r),this}delete(e){const t=la(e);return this._delegate.delete(t),this}}class PN{constructor(e){this._delegate=e}set(e,t,s){const r=la(e);return s?(Xv("WriteBatch.set",s),this._delegate.set(r,t,s)):this._delegate.set(r,t),this}update(e,t,s,...r){const i=la(e);return arguments.length===2?this._delegate.update(i,t):this._delegate.update(i,t,s,...r),this}delete(e){const t=la(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Oa{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Bu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Eh(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Oa.INSTANCES;let r=s.get(e);r||(r=new WeakMap,s.set(e,r));let i=r.get(t);return i||(i=new Oa(e,new om(e),t),r.set(t,i)),i}}Oa.INSTANCES=new WeakMap;class xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new om(e)}static forPath(e,t,s){if(e.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xs(t,new xt(t._delegate,s,new ue(e)))}static forKey(e,t,s){return new xs(t,new xt(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new ol(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ol(this.firestore,cN(this._delegate,e))}catch(t){throw Qn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pe(e),e instanceof xt?lN(this._delegate,e):!1}set(e,t){t=Xv("DocumentReference.set",t);try{return t?$I(this._delegate,e,t):$I(this._delegate,e)}catch(s){throw Qn(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return arguments.length===1?BI(this._delegate,e):BI(this._delegate,e,t,...s)}catch(r){throw Qn(r,"updateDoc()","DocumentReference.update()")}}delete(){return M5(this._delegate)}onSnapshot(...e){const t=NN(e),s=kN(e,r=>new vh(this.firestore,new fi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return IN(this._delegate,t,s)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=D5(this._delegate):(e==null?void 0:e.source)==="server"?t=O5(this._delegate):t=k5(this._delegate),t.then(s=>new vh(this.firestore,new fi(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new xs(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qn(n,e,t){return n.message=n.message.replace(e,t),n}function NN(n){for(const e of n)if(typeof e=="object"&&!F_(e))return e;return{}}function kN(n,e){var t,s;let r;return F_(n[0])?r=n[0]:F_(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:i=>{r.next&&r.next(e(i))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(s=r.complete)===null||s===void 0?void 0:s.bind(r)}}class vh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bN(this._delegate,e._delegate)}}class Eh extends vh{data(e){const t=this._delegate.data(e);return this._delegate._converter||Yj(t!==void 0),t}}class Gn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new om(e)}where(e,t,s){try{return new Gn(this.firestore,Bi(this._delegate,w5(e,t,s)))}catch(r){throw Qn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Gn(this.firestore,Bi(this._delegate,T5(e,t)))}catch(s){throw Qn(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Gn(this.firestore,Bi(this._delegate,b5(e)))}catch(t){throw Qn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Gn(this.firestore,Bi(this._delegate,I5(e)))}catch(t){throw Qn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Gn(this.firestore,Bi(this._delegate,A5(...e)))}catch(t){throw Qn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Gn(this.firestore,Bi(this._delegate,S5(...e)))}catch(t){throw Qn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Gn(this.firestore,Bi(this._delegate,R5(...e)))}catch(t){throw Qn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Gn(this.firestore,Bi(this._delegate,C5(...e)))}catch(t){throw Qn(t,"endAt()","Query.endAt()")}}isEqual(e){return uN(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=L5(this._delegate):(e==null?void 0:e.source)==="server"?t=V5(this._delegate):t=x5(this._delegate),t.then(s=>new U_(this.firestore,new fo(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=NN(e),s=kN(e,r=>new U_(this.firestore,new fo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return IN(this._delegate,t,s)}withConverter(e){return new Gn(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class lH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Eh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class U_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Gn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Eh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lH(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Eh(this._firestore,s))})}isEqual(e){return bN(this._delegate,e._delegate)}}class ol extends Gn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xs(this.firestore,e):null}doc(e){try{return e===void 0?new xs(this.firestore,Gf(this._delegate)):new xs(this.firestore,Gf(this._delegate,e))}catch(t){throw Qn(t,"doc()","CollectionReference.doc()")}}add(e){return F5(this._delegate,e).then(t=>new xs(this.firestore,t))}isEqual(e){return lN(this._delegate,e._delegate)}withConverter(e){return new ol(this.firestore,e?this._delegate.withConverter(Oa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function la(n){return nt(n,xt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(...e){this._delegate=new ho(...e)}static documentId(){return new Zv(Nt.keyField().canonicalString())}isEqual(e){return e=Pe(e),e instanceof ho?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this._delegate=e}static serverTimestamp(){const e=W5();return e._methodName="FieldValue.serverTimestamp",new ia(e)}static delete(){const e=H5();return e._methodName="FieldValue.delete",new ia(e)}static arrayUnion(...e){const t=K5(...e);return t._methodName="FieldValue.arrayUnion",new ia(t)}static arrayRemove(...e){const t=z5(...e);return t._methodName="FieldValue.arrayRemove",new ia(t)}static increment(e){const t=G5(e);return t._methodName="FieldValue.increment",new ia(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH={Firestore:RN,GeoPoint:Jp,Timestamp:Dt,Blob:SN,Transaction:CN,WriteBatch:PN,DocumentReference:xs,DocumentSnapshot:vh,Query:Gn,QueryDocumentSnapshot:Eh,QuerySnapshot:U_,CollectionReference:ol,FieldPath:Zv,FieldValue:ia,setLogLevel:cH,CACHE_SIZE_UNLIMITED:o5};function hH(n,e){n.INTERNAL.registerComponent(new $n("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(s,r)},"PUBLIC").setServiceProps(Object.assign({},uH)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(n){hH(n,(e,t)=>new RN(e,t,new aH)),n.registerVersion(rH,iH)}dH(Jv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebasestorage.googleapis.com",ON="storageBucket",fH=2*60*1e3,pH=10*60*1e3,mH=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt extends Rs{constructor(e,t,s=0){super(Rg(e),`Firebase Storage: ${t} (${Rg(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var St;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(St||(St={}));function Rg(n){return"storage/"+n}function eE(){const n="An unknown error occurred, please check the error payload for server response.";return new Vt(St.UNKNOWN,n)}function gH(n){return new Vt(St.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function _H(n){return new Vt(St.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yH(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vt(St.UNAUTHENTICATED,n)}function vH(){return new Vt(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EH(n){return new Vt(St.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function xN(){return new Vt(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LN(){return new Vt(St.CANCELED,"User canceled the upload/download.")}function wH(n){return new Vt(St.INVALID_URL,"Invalid URL '"+n+"'.")}function TH(n){return new Vt(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function bH(){return new Vt(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ON+"' property when initializing the app?")}function VN(){return new Vt(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IH(){return new Vt(St.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function AH(){return new Vt(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SH(n){return new Vt(St.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Uc(n){return new Vt(St.INVALID_ARGUMENT,n)}function MN(){return new Vt(St.APP_DELETED,"The Firebase app was deleted.")}function FN(n){return new Vt(St.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ju(n,e){return new Vt(St.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function mu(n){throw new Vt(St.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Vn.makeFromUrl(e,t)}catch{return new Vn(e,"")}if(s.path==="")return s;throw TH(e)}static makeFromUrl(e,t){let s=null;const r="([A-Za-z0-9.\\-_]+)";function i(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function u(K){K.path_=decodeURIComponent(K.path)}const d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${r}/o${g}`,"i"),w={bucket:1,path:3},I=t===DN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,b="([^?#]*)",O=new RegExp(`^https?://${I}/${r}/${b}`,"i"),M=[{regex:a,indices:c,postModify:i},{regex:v,indices:w,postModify:u},{regex:O,indices:{bucket:1,path:2},postModify:u}];for(let K=0;K<M.length;K++){const ie=M[K],re=ie.regex.exec(e);if(re){const R=re[ie.indices.bucket];let A=re[ie.indices.path];A||(A=""),s=new Vn(R,A),ie.postModify(s);break}}if(s==null)throw wH(e);return s}}class RH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CH(n,e,t){let s=1,r=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function d(...b){u||(u=!0,e.apply(null,b))}function f(b){r=setTimeout(()=>{r=null,n(v,c())},b)}function g(){i&&clearTimeout(i)}function v(b,...O){if(u){g();return}if(b){g(),d.call(null,b,...O);return}if(c()||o){g(),d.call(null,b,...O);return}s<64&&(s*=2);let M;a===1?(a=2,M=0):M=(s+Math.random())*1e3,f(M)}let w=!1;function I(b){w||(w=!0,g(),!u&&(r!==null?(b||(a=2),clearTimeout(r),f(0)):b||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,I(!0)},t),I}function PH(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(n){return n!==void 0}function kH(n){return typeof n=="function"}function DH(n){return typeof n=="object"&&!Array.isArray(n)}function am(n){return typeof n=="string"||n instanceof String}function KI(n){return tE()&&n instanceof Blob}function tE(){return typeof Blob<"u"}function $_(n,e,t,s){if(s<e)throw Uc(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw Uc(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function UN(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const r=e(s)+"="+e(n[s]);t=t+r+"&"}return t=t.slice(0,-1),t}var ma;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ma||(ma={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e){const t=n>=500&&n<600,r=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||r||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e,t,s,r,i,o,a,c,u,d,f,g=!0){this.url_=e,this.method_=t,this.headers_=s,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const e=(s,r)=>{if(r){s(!1,new qd(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ma.NO_ERROR,c=i.getStatus();if(!a||$N(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ma.ABORT;s(!1,new qd(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;s(!0,new qd(u,i))})},t=(s,r)=>{const i=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());NH(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=eE();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(r.canceled){const c=this.appDelete_?MN():LN();o(c)}else{const c=xN();o(c)}};this.canceled_?t(!1,new qd(!1,null,!0)):this.backoffId_=CH(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qd{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function xH(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function LH(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function VH(n,e){e&&(n["X-Firebase-GMPID"]=e)}function MH(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function FH(n,e,t,s,r,i,o=!0){const a=UN(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return VH(u,e),xH(u,t),LH(u,i),MH(u,s),new OH(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $H(...n){const e=UH();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(tE())return new Blob(n);throw new Vt(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BH(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jH(n){if(typeof atob>"u")throw SH("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cg{constructor(e,t){this.data=e,this.contentType=t||null}}function BN(n,e){switch(n){case Ls.RAW:return new Cg(jN(e));case Ls.BASE64:case Ls.BASE64URL:return new Cg(qN(n,e));case Ls.DATA_URL:return new Cg(HH(e),WH(e))}throw eE()}function jN(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=s,o=n.charCodeAt(++t);s=65536|(i&1023)<<10|o&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function qH(n){let e;try{e=decodeURIComponent(n)}catch{throw ju(Ls.DATA_URL,"Malformed data URL.")}return jN(e)}function qN(n,e){switch(n){case Ls.BASE64:{const r=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(r||i)throw ju(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ls.BASE64URL:{const r=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(r||i)throw ju(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=jH(e)}catch(r){throw r.message.includes("polyfill")?r:ju(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s}class HN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ju(Ls.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=KH(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function HH(n){const e=new HN(n);return e.base64?qN(Ls.BASE64,e.rest):qH(e.rest)}function WH(n){return new HN(n).contentType}function KH(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){let s=0,r="";KI(e)?(this.data_=e,s=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(KI(this.data_)){const s=this.data_,r=BH(s,e,t);return r===null?null:new wr(r)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new wr(s,!0)}}static getBlob(...e){if(tE()){const t=e.map(s=>s instanceof wr?s.data_:s);return new wr($H.apply(null,t))}else{const t=e.map(o=>am(o)?BN(Ls.RAW,o).data:o.data_);let s=0;t.forEach(o=>{s+=o.byteLength});const r=new Uint8Array(s);let i=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)r[i++]=o[a]}),new wr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){let e;try{e=JSON.parse(n)}catch{return null}return DH(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function GH(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function WN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QH(n,e){return e}class Kn{constructor(e,t,s,r){this.server=e,this.local=t||e,this.writable=!!s,this.xform=r||QH}}let Hd=null;function YH(n){return!am(n)||n.length<2?n:WN(n)}function Wh(){if(Hd)return Hd;const n=[];n.push(new Kn("bucket")),n.push(new Kn("generation")),n.push(new Kn("metageneration")),n.push(new Kn("name","fullPath",!0));function e(i,o){return YH(o)}const t=new Kn("name");t.xform=e,n.push(t);function s(i,o){return o!==void 0?Number(o):o}const r=new Kn("size");return r.xform=s,n.push(r),n.push(new Kn("timeCreated")),n.push(new Kn("updated")),n.push(new Kn("md5Hash",null,!0)),n.push(new Kn("cacheControl",null,!0)),n.push(new Kn("contentDisposition",null,!0)),n.push(new Kn("contentEncoding",null,!0)),n.push(new Kn("contentLanguage",null,!0)),n.push(new Kn("contentType",null,!0)),n.push(new Kn("metadata","customMetadata",!0)),Hd=n,Hd}function JH(n,e){function t(){const s=n.bucket,r=n.fullPath,i=new Vn(s,r);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function XH(n,e,t){const s={};s.type="file";const r=t.length;for(let i=0;i<r;i++){const o=t[i];s[o.local]=o.xform(s,e[o.server])}return JH(s,n),s}function KN(n,e,t){const s=nE(e);return s===null?null:XH(n,s,t)}function ZH(n,e,t,s){const r=nE(e);if(r===null||!am(r.downloadTokens))return null;const i=r.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=n.bucket,f=n.fullPath,g="/b/"+o(d)+"/o/"+o(f),v=bo(g,t,s),w=UN({alt:"media",token:u});return v+w})[0]}function sE(n,e){const t={},s=e.length;for(let r=0;r<s;r++){const i=e[r];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="prefixes",GI="items";function e9(n,e,t){const s={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[zI])for(const r of t[zI]){const i=r.replace(/\/$/,""),o=n._makeStorageReference(new Vn(e,i));s.prefixes.push(o)}if(t[GI])for(const r of t[GI]){const i=n._makeStorageReference(new Vn(e,r.name));s.items.push(i)}return s}function t9(n,e,t){const s=nE(t);return s===null?null:e9(n,e,s)}class wi{constructor(e,t,s,r){this.url=e,this.method=t,this.handler=s,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(n){if(!n)throw eE()}function cm(n,e){function t(s,r){const i=KN(n,r,e);return Nr(i!==null),i}return t}function n9(n,e){function t(s,r){const i=t9(n,e,r);return Nr(i!==null),i}return t}function s9(n,e){function t(s,r){const i=KN(n,r,e);return Nr(i!==null),ZH(i,r,n.host,n._protocol)}return t}function Sl(n){function e(t,s){let r;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?r=vH():r=yH():t.getStatus()===402?r=_H(n.bucket):t.getStatus()===403?r=EH(n.path):r=s,r.status=t.getStatus(),r.serverResponse=s.serverResponse,r}return e}function lm(n){const e=Sl(n);function t(s,r){let i=e(s,r);return s.getStatus()===404&&(i=gH(n.path)),i.serverResponse=r.serverResponse,i}return t}function zN(n,e,t){const s=e.fullServerUrl(),r=bo(s,n.host,n._protocol),i="GET",o=n.maxOperationRetryTime,a=new wi(r,i,cm(n,t),o);return a.errorHandler=lm(e),a}function r9(n,e,t,s,r){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",t.length>0&&(i.delimiter=t),s&&(i.pageToken=s),r&&(i.maxResults=r);const o=e.bucketOnlyServerUrl(),a=bo(o,n.host,n._protocol),c="GET",u=n.maxOperationRetryTime,d=new wi(a,c,n9(n,e.bucket),u);return d.urlParams=i,d.errorHandler=Sl(e),d}function i9(n,e,t){const s=e.fullServerUrl(),r=bo(s,n.host,n._protocol),i="GET",o=n.maxOperationRetryTime,a=new wi(r,i,s9(n,t),o);return a.errorHandler=lm(e),a}function o9(n,e,t,s){const r=e.fullServerUrl(),i=bo(r,n.host,n._protocol),o="PATCH",a=sE(t,s),c={"Content-Type":"application/json; charset=utf-8"},u=n.maxOperationRetryTime,d=new wi(i,o,cm(n,s),u);return d.headers=c,d.body=a,d.errorHandler=lm(e),d}function a9(n,e){const t=e.fullServerUrl(),s=bo(t,n.host,n._protocol),r="DELETE",i=n.maxOperationRetryTime;function o(c,u){}const a=new wi(s,r,o,i);return a.successCodes=[200,204],a.errorHandler=lm(e),a}function c9(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function GN(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=c9(null,e)),s}function QN(n,e,t,s,r){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let M="";for(let K=0;K<2;K++)M=M+Math.random().toString().slice(2);return M}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const u=GN(e,s,r),d=sE(u,t),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+c+"--",v=wr.getBlob(f,s,g);if(v===null)throw VN();const w={name:u.fullPath},I=bo(i,n.host,n._protocol),b="POST",O=n.maxUploadRetryTime,x=new wi(I,b,cm(n,t),O);return x.urlParams=w,x.headers=o,x.body=v.uploadData(),x.errorHandler=Sl(e),x}class Yf{constructor(e,t,s,r){this.current=e,this.total=t,this.finalized=!!s,this.metadata=r||null}}function rE(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Nr(!1)}return Nr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function l9(n,e,t,s,r){const i=e.bucketOnlyServerUrl(),o=GN(e,s,r),a={name:o.fullPath},c=bo(i,n.host,n._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=sE(o,t),g=n.maxUploadRetryTime;function v(I){rE(I);let b;try{b=I.getResponseHeader("X-Goog-Upload-URL")}catch{Nr(!1)}return Nr(am(b)),b}const w=new wi(c,u,v,g);return w.urlParams=a,w.headers=d,w.body=f,w.errorHandler=Sl(e),w}function u9(n,e,t,s){const r={"X-Goog-Upload-Command":"query"};function i(u){const d=rE(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Nr(!1)}f||Nr(!1);const g=Number(f);return Nr(!isNaN(g)),new Yf(g,s.size(),d==="final")}const o="POST",a=n.maxUploadRetryTime,c=new wi(t,o,i,a);return c.headers=r,c.errorHandler=Sl(e),c}const QI=256*1024;function h9(n,e,t,s,r,i,o,a){const c=new Yf(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw IH();const u=c.total-c.current;let d=u;r>0&&(d=Math.min(d,r));const f=c.current,g=f+d;let v="";d===0?v="finalize":u===d?v="upload, finalize":v="upload";const w={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${c.current}`},I=s.slice(f,g);if(I===null)throw VN();function b(K,ie){const re=rE(K,["active","final"]),R=c.current+d,A=s.size();let N;return re==="final"?N=cm(e,i)(K,ie):N=null,new Yf(R,A,re==="final",N)}const O="POST",x=e.maxUploadRetryTime,M=new wi(t,O,b,x);return M.headers=w,M.body=I.uploadData(),M.progressCallback=a||null,M.errorHandler=Sl(n),M}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9={STATE_CHANGED:"state_changed"},Yn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pg(n){switch(n){case"running":case"pausing":case"canceling":return Yn.RUNNING;case"paused":return Yn.PAUSED;case"success":return Yn.SUCCESS;case"canceled":return Yn.CANCELED;case"error":return Yn.ERROR;default:return Yn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(e,t,s){if(kH(e)||t!=null||s!=null)this.next=e,this.error=t??void 0,this.complete=s??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class p9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ma.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ma.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ma.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,r){if(this.sent_)throw mu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),r!==void 0)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class m9 extends p9{initXhr(){this.xhr_.responseType="text"}}function Ys(){return new m9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,t,s=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=s,this._mappings=Wh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(St.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if($N(r.status,[]))if(i)r=xN();else{this.sleepTime=Math.max(this.sleepTime*2,mH),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(St.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,i)=>{this._resolve=r,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,s])=>{switch(this._state){case"running":e(t,s);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const s=l9(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Ys,e,t);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,s)=>{const r=u9(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Ys,t,s);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=QI*this._chunkMultiplier,t=new Yf(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken((r,i)=>{let o;try{o=h9(this._ref._location,this._ref.storage,s,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Ys,r,i,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){QI*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const s=zN(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(s,Ys,e,t);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const s=QN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(s,Ys,e,t);this._request=r,r.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=LN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Pg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,s,r){const i=new f9(t||void 0,s||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Pg(this._state)){case Yn.SUCCESS:gc(this._resolve.bind(null,this.snapshot))();break;case Yn.CANCELED:case Yn.ERROR:const t=this._reject;gc(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pg(this._state)){case Yn.RUNNING:case Yn.PAUSED:e.next&&gc(e.next.bind(e,this.snapshot))();break;case Yn.SUCCESS:e.complete&&gc(e.complete.bind(e))();break;case Yn.CANCELED:case Yn.ERROR:e.error&&gc(e.error.bind(e,this._error))();break;default:e.error&&gc(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this._service=e,t instanceof Vn?this._location=t:this._location=Vn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xa(e,t)}get root(){const e=new Vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WN(this._location.path)}get storage(){return this._service}get parent(){const e=zH(this._location.path);if(e===null)return null;const t=new Vn(this._location.bucket,e);return new xa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw FN(e)}}function g9(n,e,t){n._throwIfRoot("uploadBytes");const s=QN(n.storage,n._location,Wh(),new wr(e,!0),t);return n.storage.makeRequestWithTokens(s,Ys).then(r=>({metadata:r,ref:n}))}function _9(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new YN(n,new wr(e),t)}function y9(n){const e={prefixes:[],items:[]};return JN(n,e).then(()=>e)}async function JN(n,e,t){const r=await XN(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&await JN(n,e,r.nextPageToken)}function XN(n,e){e!=null&&typeof e.maxResults=="number"&&$_("options.maxResults",1,1e3,e.maxResults);const t=e||{},s=r9(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(s,Ys)}function v9(n){n._throwIfRoot("getMetadata");const e=zN(n.storage,n._location,Wh());return n.storage.makeRequestWithTokens(e,Ys)}function E9(n,e){n._throwIfRoot("updateMetadata");const t=o9(n.storage,n._location,e,Wh());return n.storage.makeRequestWithTokens(t,Ys)}function w9(n){n._throwIfRoot("getDownloadURL");const e=i9(n.storage,n._location,Wh());return n.storage.makeRequestWithTokens(e,Ys).then(t=>{if(t===null)throw AH();return t})}function T9(n){n._throwIfRoot("deleteObject");const e=a9(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ys)}function ZN(n,e){const t=GH(n._location.path,e),s=new Vn(n._location.bucket,t);return new xa(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(n){return/^[A-Za-z]+:\/\//.test(n)}function I9(n,e){return new xa(n,e)}function e1(n,e){if(n instanceof iE){const t=n;if(t._bucket==null)throw bH();const s=new xa(t,t._bucket);return e!=null?e1(s,e):s}else return e!==void 0?ZN(n,e):n}function A9(n,e){if(e&&b9(e)){if(n instanceof iE)return I9(n,e);throw Uc("To use ref(service, url), the first argument must be a Storage instance.")}else return e1(n,e)}function YI(n,e){const t=e==null?void 0:e[ON];return t==null?null:Vn.makeFromBucketSpec(t,n)}function S9(n,e,t,s={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=s;r&&(n._overrideAuthToken=typeof r=="string"?r:Ry(r,n.app.options.projectId))}class iE{constructor(e,t,s,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=DN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fH,this._maxUploadRetryTime=pH,this._requests=new Set,r!=null?this._bucket=Vn.makeFromBucketSpec(r,this._host):this._bucket=YI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vn.makeFromBucketSpec(this._url,e):this._bucket=YI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xa(this,e)}_makeRequest(e,t,s,r,i=!0){if(this._deleted)return new RH(MN());{const o=FH(e,this._appId,s,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[s,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,r).getPromise()}}const JI="@firebase/storage",XI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="storage";function Jf(n,e,t){return n=Pe(n),g9(n,e,t)}function R9(n,e,t){return n=Pe(n),_9(n,e,t)}function C9(n){return n=Pe(n),v9(n)}function P9(n,e){return n=Pe(n),E9(n,e)}function N9(n,e){return n=Pe(n),XN(n,e)}function k9(n){return n=Pe(n),y9(n)}function al(n){return n=Pe(n),w9(n)}function D9(n){return n=Pe(n),T9(n)}function La(n,e){return n=Pe(n),A9(n,e)}function O9(n,e){return ZN(n,e)}function Xf(n=gl(),e){n=Pe(n);const s=cr(n,t1).getImmediate({identifier:e}),r=Sy("storage");return r&&n1(s,...r),s}function n1(n,e,t,s={}){S9(n,e,t,s)}function x9(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new iE(t,s,r,e,Vr)}function L9(){gs(new $n(t1,x9,"PUBLIC").setMultipleInstances(!0)),Jt(JI,XI,""),Jt(JI,XI,"esm2017")}L9();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,s){this._delegate=e,this.task=t,this.ref=s}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Wd(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(s=>{if(e)return e(new Wd(s,this,this._ref))},t)}on(e,t,s,r){let i;return t&&(typeof t=="function"?i=o=>t(new Wd(o,this,this._ref)):i={next:t.next?o=>t.next(new Wd(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,s||void 0,r||void 0)}}class eA{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ai(e,this._service))}get items(){return this._delegate.items.map(e=>new ai(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=O9(this._delegate,e);return new ai(t,this.storage)}get root(){return new ai(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new ai(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ZI(R9(this._delegate,e,t),this)}putString(e,t=Ls.RAW,s){this._throwIfRoot("putString");const r=BN(t,e),i=Object.assign({},s);return i.contentType==null&&r.contentType!=null&&(i.contentType=r.contentType),new ZI(new YN(this._delegate,new wr(r.data,!0),i),this)}listAll(){return k9(this._delegate).then(e=>new eA(e,this.storage))}list(e){return N9(this._delegate,e||void 0).then(t=>new eA(t,this.storage))}getMetadata(){return C9(this._delegate)}updateMetadata(e){return P9(this._delegate,e)}getDownloadURL(){return al(this._delegate)}delete(){return this._throwIfRoot("delete"),D9(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw FN(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(tA(e))throw Uc("ref() expected a child path but got a URL, use refFromURL instead.");return new ai(La(this._delegate,e),this)}refFromURL(e){if(!tA(e))throw Uc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vn.makeFromUrl(e,this._delegate.host)}catch{throw Uc("refFromUrl() expected a valid full URL but got an invalid one.")}return new ai(La(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,s={}){n1(this._delegate,e,t,s)}}function tA(n){return/^[A-Za-z]+:\/\//.test(n)}const V9="@firebase/storage-compat",M9="0.3.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9="storage-compat";function U9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),s=n.getProvider("storage").getImmediate({identifier:e});return new s1(t,s)}function $9(n){const e={TaskState:Yn,TaskEvent:d9,StringFormat:Ls,Storage:s1,Reference:ai};n.INTERNAL.registerComponent(new $n(F9,U9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(V9,M9)}$9(Jv);const B9={apiKey:"AIzaSyC1fTqU_UKX1wMgjvs-GKw5jnmrVaBkqgA",authDomain:"vuejs2-f46ed.firebaseapp.com",databaseURL:"https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"vuejs2-f46ed",storageBucket:"vuejs2-f46ed.appspot.com",messagingSenderId:"600175324222",appId:"1:600175324222:web:77d7a52126e445f1adf56f",measurementId:"G-CVYHL02XK3"},oE=Np(B9);Wj(oE);a5(oE);const j9=hi(oE),Ka=(n,e)=>{const t=n.__vccOpts||n;for(const[s,r]of e)t[s]=r;return t},q9={class:"div-design"},H9={class:"navbar navbar-expand-sm navbar-dark bg-dark"},W9={class:"container"},K9={class:"collapse navbar-collapse",id:"mynavbar"},z9={class:"navbar-nav me-auto mb-2 mb-lg-0"},G9={class:"nav-item"},Q9={class:"nav-item"},Y9={class:"d-flex"},J9=["src"],X9={class:"navbar-nav me-auto mb-2 mb-lg-0"},Z9={key:0,class:"nav-item"},eW={key:1,class:"nav-item"},tW={key:2,class:"nav-item"},nW={__name:"App",setup(n){const e=Xe(!1),t=Xe({}),s=Hy(),r=hi();ul(()=>{pR(r,a=>{a?(e.value=!0,o(a.uid)):(e.value=!1,t.value={})})});const i=async()=>{try{await m$(j9),s.push("/")}catch(a){console.error("Error signing out:",a)}},o=async a=>{try{const c=await Le.get(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/users/${a}.json`);t.value=c.data||{}}catch(c){console.error("Error fetching user data:",c)}};return(a,c)=>{const u=vf("router-view");return Ye(),Ze(gn,null,[k("div",q9,[c[5]||(c[5]=k("div",{class:"black"},null,-1)),c[6]||(c[6]=k("img",{src:"",class:"image-background",alt:""},null,-1)),k("nav",H9,[k("div",W9,[It(Ds(Jo),{class:"navbar-brand",to:"/"},{default:vr(()=>c[0]||(c[0]=[k("img",{src:xF,width:"60px",alt:""},null,-1)])),_:1}),c[4]||(c[4]=k("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#mynavbar"},[k("span",{class:"navbar-toggler-icon"})],-1)),k("div",K9,[k("ul",z9,[k("li",G9,[It(Ds(Jo),{class:"nav-link",to:"/"},{default:vr(()=>c[1]||(c[1]=[vc("Trang chủ")])),_:1})]),k("li",Q9,[It(Ds(Jo),{class:"nav-link",to:"/createblog"},{default:vr(()=>c[2]||(c[2]=[vc("Tạo bài viết")])),_:1})])]),k("div",Y9,[It(Ds(Jo),{class:"nav-link",to:"/user_info"},{default:vr(()=>[k("img",{class:"rounded-circle",width:"40px",height:"40px",src:t.value.photoURL||"https://www.kindpng.com/picc/m/22-223863_no-avatar-png-circle-transparent-png.png",alt:""},null,8,J9)]),_:1}),k("ul",X9,[e.value?(Ye(),Ze("li",Z9,[It(Ds(Jo),{class:"nav-link",to:"/user_info"},{default:vr(()=>[vc(Ct(t.value.username),1)]),_:1})])):Os("",!0),e.value?Os("",!0):(Ye(),Ze("li",eW,[It(Ds(Jo),{class:"nav-link",to:"/login"},{default:vr(()=>c[3]||(c[3]=[vc("Đăng nhập")])),_:1})])),e.value?(Ye(),Ze("li",tW,[k("button",{class:"nav-link",onClick:i},"Sign Out")])):Os("",!0)])])])])]),It(u)]),c[7]||(c[7]=k("footer",{class:"bg-light text-center text-white"},[k("div",{class:"text-center p-3",style:{"background-color":"#28242c"}},[k("section",{class:"mb-4"},[k("a",{class:"btn btn-primary btn-floating m-1",style:{"background-color":"#3b5998"},href:"#!",role:"button"},[k("i",{class:"fab fa-facebook-f"},[k("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0,0,256,256"},[k("g",{fill:"#ffffff","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none",style:{"mix-blend-mode":"normal"}},[k("g",{transform:"scale(8.53333,8.53333)"},[k("path",{d:"M15,3c-6.627,0 -12,5.373 -12,12c0,6.016 4.432,10.984 10.206,11.852v-8.672h-2.969v-3.154h2.969v-2.099c0,-3.475 1.693,-5 4.581,-5c1.383,0 2.115,0.103 2.461,0.149v2.753h-1.97c-1.226,0 -1.654,1.163 -1.654,2.473v1.724h3.593l-0.487,3.154h-3.106v8.697c5.857,-0.794 10.376,-5.802 10.376,-11.877c0,-6.627 -5.373,-12 -12,-12z"})])])])])]),k("a",{class:"btn btn-primary btn-floating m-1",style:{"background-color":"#55acee"},href:"#!",role:"button"},[k("i",{class:"fab fa-twitter"},[k("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0,0,256,256"},[k("g",{fill:"#ffffff","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none",style:{"mix-blend-mode":"normal"}},[k("g",{transform:"scale(8.53333,8.53333)"},[k("path",{d:"M28,6.937c-0.957,0.425 -1.985,0.711 -3.064,0.84c1.102,-0.66 1.947,-1.705 2.345,-2.951c-1.03,0.611 -2.172,1.055 -3.388,1.295c-0.973,-1.037 -2.359,-1.685 -3.893,-1.685c-2.946,0 -5.334,2.389 -5.334,5.334c0,0.418 0.048,0.826 0.138,1.215c-4.433,-0.222 -8.363,-2.346 -10.995,-5.574c-0.458,0.788 -0.721,1.704 -0.721,2.683c0,1.85 0.941,3.483 2.372,4.439c-0.874,-0.028 -1.697,-0.268 -2.416,-0.667c0,0.023 0,0.044 0,0.067c0,2.585 1.838,4.741 4.279,5.23c-0.447,0.122 -0.919,0.187 -1.406,0.187c-0.343,0 -0.678,-0.034 -1.003,-0.095c0.679,2.119 2.649,3.662 4.983,3.705c-1.825,1.431 -4.125,2.284 -6.625,2.284c-0.43,0 -0.855,-0.025 -1.273,-0.075c2.361,1.513 5.164,2.396 8.177,2.396c9.812,0 15.176,-8.128 15.176,-15.177c0,-0.231 -0.005,-0.461 -0.015,-0.69c1.043,-0.753 1.948,-1.692 2.663,-2.761z"})])])])])]),k("a",{class:"btn btn-primary btn-floating m-1",style:{"background-color":"#dd4b39"},href:"#!",role:"button"},[k("i",{class:"fab fa-google"},[k("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0,0,256,256"},[k("g",{fill:"#ffffff","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none",style:{"mix-blend-mode":"normal"}},[k("g",{transform:"scale(8.53333,8.53333)"},[k("path",{d:"M15.00391,3c-6.629,0 -12.00391,5.373 -12.00391,12c0,6.627 5.37491,12 12.00391,12c10.01,0 12.26517,-9.293 11.32617,-14h-1.33008h-2.26758h-7.73242v4h7.73828c-0.88958,3.44825 -4.01233,6 -7.73828,6c-4.418,0 -8,-3.582 -8,-8c0,-4.418 3.582,-8 8,-8c2.009,0 3.83914,0.74575 5.24414,1.96875l2.8418,-2.83984c-2.134,-1.944 -4.96903,-3.12891 -8.08203,-3.12891z"})])])])])]),k("a",{class:"btn btn-primary btn-floating m-1",style:{"background-color":"#ac2bac"},href:"#!",role:"button"},[k("i",{class:"fab fa-instagram"},[k("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0,0,256,256"},[k("g",{fill:"#ffffff","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none",style:{"mix-blend-mode":"normal"}},[k("g",{transform:"scale(10.66667,10.66667)"},[k("path",{d:"M8,3c-2.757,0 -5,2.243 -5,5v8c0,2.757 2.243,5 5,5h8c2.757,0 5,-2.243 5,-5v-8c0,-2.757 -2.243,-5 -5,-5zM8,5h8c1.654,0 3,1.346 3,3v8c0,1.654 -1.346,3 -3,3h-8c-1.654,0 -3,-1.346 -3,-3v-8c0,-1.654 1.346,-3 3,-3zM17,6c-0.55228,0 -1,0.44772 -1,1c0,0.55228 0.44772,1 1,1c0.55228,0 1,-0.44772 1,-1c0,-0.55228 -0.44772,-1 -1,-1zM12,7c-2.757,0 -5,2.243 -5,5c0,2.757 2.243,5 5,5c2.757,0 5,-2.243 5,-5c0,-2.757 -2.243,-5 -5,-5zM12,9c1.654,0 3,1.346 3,3c0,1.654 -1.346,3 -3,3c-1.654,0 -3,-1.346 -3,-3c0,-1.654 1.346,-3 3,-3z"})])])])])]),k("a",{class:"btn btn-primary btn-floating m-1",style:{"background-color":"#333333"},href:"#!",role:"button"},[k("i",{class:"fab fa-github"},[k("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"100",height:"100",viewBox:"0,0,256,256"},[k("g",{fill:"#ffffff","fill-rule":"nonzero",stroke:"none","stroke-width":"1","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"10","stroke-dasharray":"","stroke-dashoffset":"0","font-family":"none","font-weight":"none","font-size":"none","text-anchor":"none",style:{"mix-blend-mode":"normal"}},[k("g",{transform:"scale(8.53333,8.53333)"},[k("path",{d:"M15,3c-6.627,0 -12,5.373 -12,12c0,5.623 3.872,10.328 9.092,11.63c-0.056,-0.162 -0.092,-0.35 -0.092,-0.583v-2.051c-0.487,0 -1.303,0 -1.508,0c-0.821,0 -1.551,-0.353 -1.905,-1.009c-0.393,-0.729 -0.461,-1.844 -1.435,-2.526c-0.289,-0.227 -0.069,-0.486 0.264,-0.451c0.615,0.174 1.125,0.596 1.605,1.222c0.478,0.627 0.703,0.769 1.596,0.769c0.433,0 1.081,-0.025 1.691,-0.121c0.328,-0.833 0.895,-1.6 1.588,-1.962c-3.996,-0.411 -5.903,-2.399 -5.903,-5.098c0,-1.162 0.495,-2.286 1.336,-3.233c-0.276,-0.94 -0.623,-2.857 0.106,-3.587c1.798,0 2.885,1.166 3.146,1.481c0.896,-0.307 1.88,-0.481 2.914,-0.481c1.036,0 2.024,0.174 2.922,0.483c0.258,-0.313 1.346,-1.483 3.148,-1.483c0.732,0.731 0.381,2.656 0.102,3.594c0.836,0.945 1.328,2.066 1.328,3.226c0,2.697 -1.904,4.684 -5.894,5.097c1.098,0.573 1.899,2.183 1.899,3.396v2.734c0,0.104 -0.023,0.179 -0.035,0.268c4.676,-1.639 8.035,-6.079 8.035,-11.315c0,-6.627 -5.373,-12 -12,-12z"})])])])])])]),k("span",null,[vc("© 2020 Copyright: "),k("span",null,"AlbertBao")])])],-1))],64)}}},sW=Ka(nW,[["__scopeId","data-v-431ffcf8"]]),rW="/assets/z5731642121335_f3f035de646403a38f817d817f53ac22-DUwMPVtP.jpg",iW="/assets/z5731642156264_1da8eca52099147d1d14ab579c559d82-GD4s4lrx.jpg",oW="/assets/z5731642156265_48c7650a66c9d01f4fac6e790f1f3996-BOYW1g26.jpg",aW={class:"container mt-4",style:{"min-height":"23.3vh"}},cW={class:"row"},lW={class:"col-4 p-2"},uW={class:"card"},hW={class:"box-left row"},dW={class:"col-4 p-0"},fW=["src"],pW={class:"col-8 p-0 mt-2 ellipsis",style:{"word-wrap":"break-word"}},mW={class:"col-8"},gW={class:"row"},_W={class:"col-5"},yW=["src"],vW={class:"col-7 p-4"},EW={style:{"font-size":"2.3vh","word-wrap":"break-word"}},wW={__name:"home",setup(n){const e=Xe([]);return ul(()=>{Le.get("https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs.json").then(t=>{console.log(t),e.value=t.data}).catch(t=>{console.error("Lỗi khi lấy dữ liệu:",t)})}),(t,s)=>{const r=vf("router-link"),i=vf("router-view");return Ye(),Ze(gn,null,[s[1]||(s[1]=gV('<div class="container mt-4" data-v-c4f67cb7><div id="demo" class="carousel slide" style="height:50vh;" data-bs-ride="carousel" data-v-c4f67cb7><div class="carousel-indicators" data-v-c4f67cb7><button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active" data-v-c4f67cb7></button><button type="button" data-bs-target="#demo" data-bs-slide-to="1" data-v-c4f67cb7></button><button type="button" data-bs-target="#demo" data-bs-slide-to="2" data-v-c4f67cb7></button></div><div class="carousel-inner" style="border-radius:1vh;" data-v-c4f67cb7><div class="carousel-item active" data-v-c4f67cb7><img src="'+rW+'" alt="Los Angeles" class="d-block" style="width:100%;height:50vh;object-fit:cover;" data-v-c4f67cb7></div><div class="carousel-item" data-v-c4f67cb7><img src="'+iW+'" alt="Chicago" class="d-block" style="width:100%;height:50vh;object-fit:cover;" data-v-c4f67cb7></div><div class="carousel-item" data-v-c4f67cb7><img src="'+oW+'" alt="New York" class="d-block" style="width:100%;height:50vh;object-fit:cover;" data-v-c4f67cb7></div></div><button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev" data-v-c4f67cb7><span class="carousel-control-prev-icon" data-v-c4f67cb7></span></button><button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next" data-v-c4f67cb7><span class="carousel-control-next-icon" data-v-c4f67cb7></span></button></div></div>',1)),k("div",aW,[k("div",cW,[k("div",lW,[k("div",uW,[s[0]||(s[0]=k("div",{class:"text-center mt-2"},[k("h4",null,"New Post")],-1)),(Ye(!0),Ze(gn,null,_a(e.value,o=>(Ye(),Ze("div",{class:"pt-3 pb-3 pe-4 ps-4",key:o.id},[It(r,{class:"word-break text-decoration-none text-dark",to:{name:"infoblog",params:{id:o.id}}},{default:vr(()=>[k("div",hW,[k("div",dW,[k("img",{src:o.imageURL,alt:"",width:"110vh",height:"110vh",style:{"object-fit":"cover","border-radius":"1vh"}},null,8,fW)]),k("div",pW,Ct(o.title),1)])]),_:2},1032,["to"])]))),128))])]),k("div",mW,[(Ye(!0),Ze(gn,null,_a(e.value,o=>(Ye(),Ze("div",{class:"box-content",key:o.id},[It(r,{class:"card-text text-decoration-none text-dark text-content",to:{name:"infoblog",params:{id:o.id}}},{default:vr(()=>[k("div",gW,[k("div",_W,[k("img",{class:"img-content",src:o.imageURL,width:"100%",alt:""},null,8,yW)]),k("div",vW,[k("h4",EW,Ct(o.title),1)])])]),_:2},1032,["to"])]))),128))])])]),It(i)],64)}}},TW=Ka(wW,[["__scopeId","data-v-c4f67cb7"]]),bW={class:"container mt-5 mb-5",style:{"min-height":"70vh",width:"auto"}},IW={class:"row"},AW={class:"col-12"},SW={class:"card p-3 background-card"},RW={class:"row"},CW={class:"col-4"},PW={class:"mb-3 mt-3"},NW={class:"mb-3 mt-3"},kW={class:"mb-3 mt-3"},DW={key:0,class:"mt-2"},OW=["src"],xW={class:"col-8 d-flex",style:{"flex-wrap":"wrap"}},LW={for:"sectionContent",class:"form-label text-light"},VW=["onUpdate:modelValue"],MW={for:"sectionImage",class:"form-label text-light"},FW=["onChange"],UW={key:0,class:"mt-2"},$W=["src"],BW=["onClick"],jW={__name:"create_blog",setup(n){const e=Xe({id:"",newtitle:"",newauthor:"",newcontent:"",imageUrl:"",sections:[{content:"",imageUrl:""}],uid:"",date:""}),s=new Date().toISOString().slice(0,19).replace("T"," "),r=hi();Xe(null);const i=()=>{e.value.sections.push({content:"",imageUrl:""})},o=d=>{confirm(`Bạn có chắc chắn muốn xóa phần ${d+1}?`)&&e.value.sections.splice(d,1)},a=async d=>{const f=d.target.files[0];if(f){const g=Xf(),v=La(g,`blogs/${f.name}`);try{await Jf(v,f),console.log("Tải file bài viết lên thành công");const w=await al(v);e.value.imageUrl=w}catch(w){console.error("Lỗi khi tải file bài viết lên:",w)}}},c=async(d,f)=>{const g=d.target.files[0];if(g){const v=Xf(),w=La(v,`sections/${g.name}`);try{await Jf(w,g),console.log("Tải file lên thành công");const I=await al(w);e.value.sections[f].imageUrl=I}catch(I){console.error("Lỗi khi tải file lên:",I)}}},u=async()=>{if(!e.value.newtitle){alert("Vui lòng nhập tiêu đề bài viết.");return}if(!e.value.newauthor){alert("Vui lòng nhập tên tác giả.");return}if(!e.value.imageUrl){alert("Vui lòng thêm ảnh bìa.");return}if(!e.value.sections[0].content){alert("Vui lòng nhập nội dung cho phần 1.");return}const d=r.currentUser;if(!d){console.error("Người dùng chưa được xác thực");return}e.value.uid=d.uid;try{const f=await Le.post("https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs.json",{title:e.value.newtitle,author:e.value.newauthor,imageURL:e.value.imageUrl,sections:e.value.sections.map(v=>({content:v.content,imageSection:v.imageUrl})),date:s,uid:e.value.uid}),g=f.data.name;e.value.id=g,await Le.patch(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs/${g}.json`,{id:g}),e.value.newtitle="",e.value.newauthor="",e.value.sections=[{content:"",imageUrl:""}],e.value.imageUrl="",console.log("Bài đăng blog được gửi thành công và lưu các section:",f)}catch(f){console.error("Lỗi khi gửi bài đăng blog:",f)}};return(d,f)=>(Ye(),Ze("div",bW,[k("div",IW,[k("div",AW,[k("div",SW,[f[5]||(f[5]=k("h1",{class:"text-center fw-bold text-light"},"Đăng Blog",-1)),k("form",{onSubmit:wp(u,["prevent"])},[k("div",RW,[k("div",CW,[k("div",PW,[f[2]||(f[2]=k("label",{for:"title",class:"form-label text-light"},"Tiêu đề:",-1)),fn(k("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=g=>e.value.newtitle=g),class:"form-control",id:"title",placeholder:"Tiêu đề",name:"title",required:""},null,512),[[Xn,e.value.newtitle]])]),k("div",NW,[f[3]||(f[3]=k("label",{for:"author",class:"form-label text-light"},"Tác giả:",-1)),fn(k("input",{type:"text","onUpdate:modelValue":f[1]||(f[1]=g=>e.value.newauthor=g),class:"form-control",id:"author",placeholder:"Tác giả",name:"author",required:""},null,512),[[Xn,e.value.newauthor]])]),k("div",kW,[f[4]||(f[4]=k("label",{for:"mainImage",class:"form-label text-light"},"Ảnh bài viết:",-1)),k("input",{type:"file",style:{color:"white"},onChange:a,class:"ms-3"},null,32),e.value.imageUrl?(Ye(),Ze("div",DW,[k("img",{src:e.value.imageUrl,alt:"Ảnh xem trước text-light",style:{"max-width":"200px",height:"auto"}},null,8,OW)])):Os("",!0)]),k("button",{onClick:i,type:"button",class:"btn btn-secondary ms-2"},"+"),k("button",{type:"button",onClick:u,class:"btn btn-primary ms-2"},"Submit")]),k("div",xW,[(Ye(!0),Ze(gn,null,_a(e.value.sections,(g,v)=>(Ye(),Ze("div",{key:v,class:"mb-3 mt-3 ms-3",style:{width:"45%"}},[k("label",LW,"Nội dung phần "+Ct(v+1)+":",1),fn(k("textarea",{class:"form-control","onUpdate:modelValue":w=>g.content=w,rows:"3",placeholder:"Nội dung phần...",name:"sectionContent",required:"",style:{height:"15vh"}},null,8,VW),[[Xn,g.content]]),k("label",MW,"Hình ảnh phần "+Ct(v+1)+":",1),k("input",{type:"file",style:{color:"white"},onChange:w=>c(w,v),class:"ms-3"},null,40,FW),g.imageUrl?(Ye(),Ze("div",UW,[k("img",{src:g.imageUrl,alt:"Hình ảnh xem trước",style:{"max-width":"150px",height:"auto"}},null,8,$W)])):Os("",!0),k("button",{type:"button",onClick:w=>o(v),class:"btn btn-danger mt-3"},"-",8,BW)]))),128))])])],32)])])])]))}},qW=Ka(jW,[["__scopeId","data-v-c7272062"]]),HW={class:"image"},WW={class:"card p-3 d-flex border-dark"},KW={style:{width:"100%"}},zW={class:"form-floating mb-3 mt-3"},GW={class:"form-floating mb-3 mt-3"},QW={class:"form-floating mt-3 mb-3"},YW={class:"form-check mb-3"},JW=["disabled"],XW={style:{width:"100%"}},ZW={class:"form-floating mb-3 mt-3"},eK={class:"form-floating mt-3 mb-3"},tK={key:0},nK={__name:"form_login",setup(n){const e=Xe(!0),t=Xe(!1),s=hi(),r=Xe(!1),i=()=>{t.value=!t.value,e.value=!e.value},o=()=>{e.value=!e.value,t.value=!t.value},a=Xe(""),c=Xe(""),u=Xe(""),d=Hy(),f=async()=>{try{const O=(await h$(s,a.value,u.value)).user;await Le.put(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/users/${O.uid}.json`,{uid:O.uid,email:O.email,username:c.value,createdAt:new Date().toISOString()}),console.log("Successfully registered and user data saved!"),console.log("User ID:",O.uid),d.push("/")}catch(b){console.error("Error during registration: ",b)}},g=Xe(""),v=Xe(""),w=Xe(),I=async()=>{try{await d$(s,g.value,v.value),console.log("Successfully logged in!"),console.log(s.currentUser),d.push("/")}catch(b){switch(console.log(b.code),b.code){case"auth/invalid-email":w.value="Invalid Email";break;case"auth/user-not-found":w.value="No account found";break;case"auth/wrong-password":w.value="Invalid Password";break;default:w.value="Email or password was incorrect";break}}};return(b,O)=>(Ye(),Ze("div",HW,[k("div",WW,[fn(k("div",KW,[O[10]||(O[10]=k("h1",{class:"text-center text-light"},"Register",-1)),k("div",zW,[fn(k("input",{type:"text",class:"form-control",placeholder:"Enter username","onUpdate:modelValue":O[0]||(O[0]=x=>c.value=x)},null,512),[[Xn,c.value]]),O[6]||(O[6]=k("label",{for:"username"},"Username",-1))]),k("div",GW,[fn(k("input",{type:"email",class:"form-control",placeholder:"Enter email","onUpdate:modelValue":O[1]||(O[1]=x=>a.value=x)},null,512),[[Xn,a.value]]),O[7]||(O[7]=k("label",{for:"email"},"Email",-1))]),k("div",QW,[fn(k("input",{type:"password",class:"form-control",placeholder:"Enter password","onUpdate:modelValue":O[2]||(O[2]=x=>u.value=x)},null,512),[[Xn,u.value]]),O[8]||(O[8]=k("label",{for:"pwd"},"Password",-1))]),k("div",YW,[fn(k("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":O[3]||(O[3]=x=>r.value=x)},null,512),[[GV,r.value]]),O[9]||(O[9]=k("label",{class:"form-check-label text-light"}," Chấp nhận quy tắc của blog ",-1))]),k("p",null,[k("button",{onClick:f,class:"btn btn-primary",style:{width:"100%"},disabled:!r.value}," Submit ",8,JW)]),k("p",{class:"text-center text-light"},[k("a",{class:"text-light",href:"#",onClick:i},"Register")])],512),[[iT,e.value]]),fn(k("div",XW,[O[13]||(O[13]=k("h1",{class:"text-center text-light"},"Login",-1)),k("div",ZW,[fn(k("input",{type:"text",class:"form-control",id:"email",placeholder:"Enter email","onUpdate:modelValue":O[4]||(O[4]=x=>g.value=x)},null,512),[[Xn,g.value]]),O[11]||(O[11]=k("label",{for:"email"},"Email",-1))]),k("div",eK,[fn(k("input",{type:"password",class:"form-control",id:"pwd",placeholder:"Enter password","onUpdate:modelValue":O[5]||(O[5]=x=>v.value=x)},null,512),[[Xn,v.value]]),O[12]||(O[12]=k("label",{for:"pwd"},"Password",-1))]),w.value?(Ye(),Ze("p",tK,Ct(w.value),1)):Os("",!0),k("p",null,[k("button",{onClick:I,class:"btn btn-primary",style:{width:"100%"}},"Submit")]),k("p",{class:"text-center text-light"},[k("a",{class:"text-light",href:"#",onClick:o},"Login")])],512),[[iT,t.value]])])]))}},sK=Ka(nK,[["__scopeId","data-v-b7819d2c"]]),rK={class:"box-image-content"},iK={class:"box-image p-5"},oK={class:"black"},aK={class:"text-light text-design"},cK=["src"],lK={class:"container mt-3"},uK={class:"row"},hK={class:"col-8"},dK={class:"content-box"},fK={class:"text-light",style:{"word-wrap":"break-word"}},pK={class:"text-light",style:{color:"rgb(0,0,0,0.4)"}},mK={class:"text-light"},gK=["src"],_K={class:"card-title mt-3 text-light"},yK={class:"col-4"},vK={class:"card p-2"},EK={class:"wraper p-3"},wK={class:"col-2"},TK=["src"],bK={class:"col-10"},IK={class:"row mt-3"},AK={class:"col-2"},SK=["src"],RK={class:"col-10"},CK={class:"text-light"},PK={class:"mb-3 mt-1"},NK={class:"form-floating"},kK={__name:"info_blog",setup(n){const e=MR(),t=Xe(e.params.id),s=Xe({}),r=Xe([]),i=Xe({id:"",commentText:"",uid:"",blogId:t.value}),o=async()=>{if(t.value)try{const w=await Le.get(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs/${t.value}.json`);s.value=w.data,u()}catch(w){console.error("Lỗi khi lấy dữ liệu:",w)}},a=Xe({}),c=async()=>{if(t.value)try{const w=await Le.get(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs/${t.value}/sections.json`);a.value=w.data,u()}catch(w){console.error("Lỗi khi lấy dữ liệu:",w)}},u=async()=>{try{const I=(await Le.get("https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs.json")).data||{};relatedBlogs.value=Object.values(I).filter(b=>b.author===s.value.author&&b.id!==s.value.id)}catch(w){console.error("Lỗi khi lấy bài viết liên quan:",w)}},d=async()=>{try{const I=hi().currentUser;if(I){i.value.uid=I.uid;const O=(await Le.post("https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/comments.json",{commentText:i.value.commentText,uid:i.value.uid,blogId:i.value.blogId,timestamp:new Date().toISOString()})).data.name;await Le.patch(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/comments/${O}.json`,{id:O}),r.value.push({id:O,commentText:i.value.commentText,uid:i.value.uid,blogId:i.value.blogId}),i.value.commentText=""}else console.log("Người dùng chưa đăng nhập.")}catch(w){console.error("Lỗi khi gửi bình luận:",w)}},f=async()=>{if(t.value)try{const I=(await Le.get("https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/comments.json")).data||{},b=Object.values(I).filter(M=>M.blogId===t.value),x=(await Le.get("https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/users.json")).data||{};r.value=b.map(M=>{const K=Object.values(x).find(ie=>ie.uid===M.uid);return{...M,user:K||null}})}catch(w){console.error("Lỗi khi lấy bình luận và người dùng:",w.message||w)}else console.warn("Không có ID bài viết để lấy bình luận.")},g=Xe({}),v=async()=>{const I=hi().currentUser;if(I&&I.uid){const b=I.uid;try{const O=await Le.get(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/users/${b}.json`);g.value=O.data}catch(O){console.error("Lỗi khi lấy dữ liệu:",O)}}else console.log("Không có người dùng nào đã đăng nhập.")};return ul(()=>{o(),f(),v(),c()}),(w,I)=>(Ye(),Ze("div",null,[k("div",rK,[k("div",iK,[k("div",oK,[I[1]||(I[1]=k("div",{class:"black-image"},null,-1)),k("h2",aK,Ct(s.value.title),1),k("img",{src:s.value.imageURL,alt:"Blog Image",style:{"object-fit":"contain","background-position":"top"},class:"image-background"},null,8,cK)])])]),k("div",lK,[k("div",uK,[k("div",hK,[k("div",dK,[k("h2",fK,[k("strong",null,Ct(s.value.title),1)]),k("p",pK,"Tác giả bài viết: "+Ct(s.value.author),1),k("p",mK,Ct(s.value.date),1),(Ye(!0),Ze(gn,null,_a(a.value,b=>(Ye(),Ze("div",{class:"mt-3",key:b.id},[k("img",{src:b.imageSection,width:"90%"},null,8,gK),k("p",_K,Ct(b.content),1)]))),128))])]),k("div",yK,[k("div",vK,[I[2]||(I[2]=k("h5",{class:"text-center mt-3 fs-6-5"},"Bình luận",-1)),I[3]||(I[3]=k("hr",null,null,-1)),k("div",EK,[(Ye(!0),Ze(gn,null,_a(r.value,b=>{var O,x;return Ye(),Ze("div",{key:b.id,class:"row mt-3"},[k("div",wK,[k("img",{class:"rounded-circle",width:"60",height:"60",src:((O=b.user)==null?void 0:O.photoURL)||"https://www.kindpng.com/picc/m/22-223863_no-avatar-png-circle-transparent-png.png",alt:"User Avatar"},null,8,TK)]),k("div",bK,[k("h6",null,Ct((x=b.user)==null?void 0:x.username),1),k("p",null,Ct(b.commentText),1)])])}),128))])]),k("div",IK,[k("div",AK,[k("img",{class:"rounded-circle",width:"60",height:"60",src:g.value.photoURL||"https://th.bing.com/th/id/OIP.PwEh4SGekpMaWT2d5GWw0wHaHt?rs=1&pid=ImgDetMain",alt:"User Avatar"},null,8,SK)]),k("div",RK,[k("h6",CK,Ct(g.value.username),1),k("form",{onSubmit:wp(d,["prevent"])},[k("div",PK,[k("div",NK,[fn(k("textarea",{class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea",name:"text","onUpdate:modelValue":I[0]||(I[0]=b=>i.value.commentText=b)},null,512),[[Xn,i.value.commentText]]),I[4]||(I[4]=k("label",{for:"floatingTextarea",class:"fs-6"},"Comments",-1))])]),I[5]||(I[5]=k("button",{class:"btn btn-primary"},"Submit",-1))],32)])])])])])]))}},DK=Ka(kK,[["__scopeId","data-v-38e0814c"]]);var nA={};const sA="@firebase/database",rA="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r1="";function OK(n){r1=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:eh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return rr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xK(e)}}catch{}return new LK},ua=i1("localStorage"),VK=i1("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=new ml("@firebase/database"),MK=function(){let n=1;return function(){return n++}}(),o1=function(n){const e=t2(n),t=new XF;t.update(e);const s=t.digest();return Ay.encodeByteArray(s)},Kh=function(...n){let e="";for(let t=0;t<n.length;t++){const s=n[t];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Kh.apply(null,s):typeof s=="object"?e+=wn(s):e+=s,e+=" "}return e};let qu=null,iA=!0;const FK=function(n,e){me(!e,"Can't turn on custom loggers persistently."),$c.logLevel=Ue.VERBOSE,qu=$c.log.bind($c)},xn=function(...n){if(iA===!0&&(iA=!1,qu===null&&VK.get("logging_enabled")===!0&&FK()),qu){const e=Kh.apply(null,n);qu(e)}},zh=function(n){return function(...e){xn(n,...e)}},B_=function(...n){const e="FIREBASE INTERNAL ERROR: "+Kh(...n);$c.error(e)},pi=function(...n){const e=`FIREBASE FATAL ERROR: ${Kh(...n)}`;throw $c.error(e),new Error(e)},ms=function(...n){const e="FIREBASE WARNING: "+Kh(...n);$c.warn(e)},UK=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ms("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},a1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$K=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},cl="[MIN_NAME]",Va="[MAX_NAME]",Rl=function(n,e){if(n===e)return 0;if(n===cl||e===Va)return-1;if(e===cl||n===Va)return 1;{const t=oA(n),s=oA(e);return t!==null?s!==null?t-s===0?n.length-e.length:t-s:-1:s!==null?1:n<e?-1:1}},BK=function(n,e){return n===e?0:n<e?-1:1},gu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+wn(e))},aE=function(n){if(typeof n!="object"||n===null)return wn(n);const e=[];for(const s in n)e.push(s);e.sort();let t="{";for(let s=0;s<e.length;s++)s!==0&&(t+=","),t+=wn(e[s]),t+=":",t+=aE(n[e[s]]);return t+="}",t},c1=function(n,e){const t=n.length;if(t<=e)return[n];const s=[];for(let r=0;r<t;r+=e)r+e>t?s.push(n.substring(r,t)):s.push(n.substring(r,r+e));return s};function Us(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const l1=function(n){me(!a1(n),"Invalid JSON number");const e=11,t=52,s=(1<<e-1)-1;let r,i,o,a,c;n===0?(i=0,o=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),s),i=a+s,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(i=0,o=Math.round(n/Math.pow(2,1-s-t))));const u=[];for(c=t;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(r?1:0),u.reverse();const d=u.join("");let f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},jK=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},qK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},HK=new RegExp("^-?(0*)\\d{1,10}$"),WK=-2147483648,KK=2147483647,oA=function(n){if(HK.test(n)){const e=Number(n);if(e>=WK&&e<=KK)return e}return null},Cl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ms("Exception was thrown by user callback.",t),e},Math.floor(0))}},zK=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){ms(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e,t,s){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(xn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,s):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ms(e)}}class mf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}mf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="5",u1="v",h1="s",d1="r",f1="f",p1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,m1="ls",g1="p",j_="ac",_1="websocket",y1="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,t,s,r,i=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=s,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ua.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ua.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function YK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function E1(n,e,t){me(typeof e=="string","typeof type must == string"),me(typeof t=="object","typeof params must == object");let s;if(e===_1)s=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===y1)s=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);YK(n)&&(t.ns=n.namespace);const r=[];return Us(t,(i,o)=>{r.push(i+"="+o)}),s+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JK{constructor(){this.counters_={}}incrementCounter(e,t=1){rr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return MF(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng={},kg={};function lE(n){const e=n.toString();return Ng[e]||(Ng[e]=new JK),Ng[e]}function XK(n,e){const t=n.toString();return kg[t]||(kg[t]=e()),kg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZK{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<s.length;++r)s[r]&&Cl(()=>{this.onMessage_(s[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="start",ez="close",tz="pLPCommand",nz="pRTLPCB",w1="id",T1="pw",b1="ser",sz="cb",rz="seg",iz="ts",oz="d",az="dframe",I1=1870,A1=30,cz=I1-A1,lz=25e3,uz=3e4;class Rc{constructor(e,t,s,r,i,o,a){this.connId=e,this.repoInfo=t,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zh(e),this.stats_=lE(t),this.urlFn=c=>(this.appCheckToken&&(c[j_]=this.appCheckToken),E1(t,y1,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ZK(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(uz)),$K(()=>{if(this.isClosed_)return;this.scriptTagHolder=new uE((...i)=>{const[o,a,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===aA)this.id=a,this.password=c;else if(o===ez)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[aA]="t",s[b1]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[sz]=this.scriptTagHolder.uniqueCallbackIdentifier),s[u1]=cE,this.transportSessionId&&(s[h1]=this.transportSessionId),this.lastSessionId&&(s[m1]=this.lastSessionId),this.applicationId&&(s[g1]=this.applicationId),this.appCheckToken&&(s[j_]=this.appCheckToken),typeof location<"u"&&location.hostname&&p1.test(location.hostname)&&(s[d1]=f1);const r=this.urlFn(s);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Rc.forceAllow_=!0}static forceDisallow(){Rc.forceDisallow_=!0}static isAvailable(){return Rc.forceAllow_?!0:!Rc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!jK()&&!qK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=wn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=y0(t),r=c1(s,cz);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const s={};s[az]="t",s[w1]=e,s[T1]=t,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=wn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class uE{constructor(e,t,s,r){this.onDisconnect=s,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=MK(),window[tz+this.uniqueCallbackIdentifier]=e,window[nz+this.uniqueCallbackIdentifier]=t,this.myIFrame=uE.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){xn("frame writing exception"),a.stack&&xn(a.stack),xn(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||xn("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[w1]=this.myID,e[T1]=this.myPW,e[b1]=this.currentSerial;let t=this.urlFn(e),s="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+A1+s.length<=I1;){const o=this.pendingSegs.shift();s=s+"&"+rz+r+"="+o.seg+"&"+iz+r+"="+o.ts+"&"+oz+r+"="+o.d,r++}return t=t+s,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,s){this.pendingSegs.push({seg:e,ts:t,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const s=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(s,Math.floor(lz)),i=()=>{clearTimeout(r),s()};this.addTag(e,i)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const r=s.readyState;(!r||r==="loaded"||r==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),t())},s.onerror=()=>{xn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz=16384,dz=45e3;let Zf=null;typeof MozWebSocket<"u"?Zf=MozWebSocket:typeof WebSocket<"u"&&(Zf=WebSocket);class Js{constructor(e,t,s,r,i,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zh(this.connId),this.stats_=lE(t),this.connURL=Js.connectionURL_(t,o,a,r,s),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,s,r,i){const o={};return o[u1]=cE,typeof location<"u"&&location.hostname&&p1.test(location.hostname)&&(o[d1]=f1),t&&(o[h1]=t),s&&(o[m1]=s),r&&(o[j_]=r),i&&(o[g1]=i),E1(e,_1,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ua.set("previous_websocket_failure",!0);try{let s;S0(),this.mySock=new Zf(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Js.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(t);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Zf!==null&&!Js.forceDisallow_}static previouslyFailed(){return ua.isInMemoryStorage||ua.get("previous_websocket_failure")===!0}markConnectionHealthy(){ua.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const s=eh(t);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(me(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const s=this.extractFrameCount_(t);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const t=wn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const s=c1(t,hz);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(dz))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Js.responsesRequiredToBeHealthy=2;Js.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Rc,Js]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Js&&Js.isAvailable();let s=t&&!Js.previouslyFailed();if(e.webSocketOnly&&(t||ms("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Js];else{const r=this.transports_=[];for(const i of wh.ALL_TRANSPORTS)i&&i.isAvailable()&&r.push(i);wh.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}wh.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=6e4,pz=5e3,mz=10*1024,gz=100*1024,Dg="t",cA="d",_z="s",lA="r",yz="e",uA="o",hA="a",dA="n",fA="p",vz="h";class Ez{constructor(e,t,s,r,i,o,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=s,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zh("c:"+this.id+":"),this.transportManager_=new wh(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,s)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Hu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>gz?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>mz?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Dg in e){const t=e[Dg];t===hA?this.upgradeIfSecondaryHealthy_():t===lA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===uA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=gu("t",e),s=gu("d",e);if(t==="c")this.onSecondaryControl_(s);else if(t==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fA,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=gu("t",e),s=gu("d",e);t==="c"?this.onControl_(s):t==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=gu(Dg,e);if(cA in e){const s=e[cA];if(t===vz){const r=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===dA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===_z?this.onConnectionShutdown_(s):t===lA?this.onReset_(s):t===yz?B_("Server Error: "+s):t===uA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):B_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,s=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),cE!==s&&ms("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,s),Hu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(fz))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(pz))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fA,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ua.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{put(e,t,s,r){}merge(e,t,s,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,s){}onDisconnectMerge(e,t,s){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.allowedEvents_=e,this.listeners_={},me(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let r=0;r<s.length;r++)s[r].callback.apply(s[r].context,t)}}on(e,t,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:s});const r=this.getInitialEvent(e);r&&t.apply(s,r)}off(e,t,s){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!s||s===r[i].context)){r.splice(i,1);return}}validateEventType_(e){me(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep extends R1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Cy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ep}getInitialEvent(e){return me(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=32,mA=768;class Rt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let s=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[s]=this.pieces_[r],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function dt(){return new Rt("")}function Ke(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function po(n){return n.pieces_.length-n.pieceNum_}function bt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Rt(n.pieces_,e)}function C1(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function wz(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function P1(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function N1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Rt(e,0)}function _n(n,e){const t=[];for(let s=n.pieceNum_;s<n.pieces_.length;s++)t.push(n.pieces_[s]);if(e instanceof Rt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)t.push(e.pieces_[s]);else{const s=e.split("/");for(let r=0;r<s.length;r++)s[r].length>0&&t.push(s[r])}return new Rt(t,0)}function ze(n){return n.pieceNum_>=n.pieces_.length}function Vs(n,e){const t=Ke(n),s=Ke(e);if(t===null)return e;if(t===s)return Vs(bt(n),bt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function k1(n,e){if(po(n)!==po(e))return!1;for(let t=n.pieceNum_,s=e.pieceNum_;t<=n.pieces_.length;t++,s++)if(n.pieces_[t]!==e.pieces_[s])return!1;return!0}function Zs(n,e){let t=n.pieceNum_,s=e.pieceNum_;if(po(n)>po(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[s])return!1;++t,++s}return!0}class Tz{constructor(e,t){this.errorPrefix_=t,this.parts_=P1(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Pp(this.parts_[s]);D1(this)}}function bz(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Pp(e),D1(n)}function Iz(n){const e=n.parts_.pop();n.byteLength_-=Pp(e),n.parts_.length>0&&(n.byteLength_-=1)}function D1(n){if(n.byteLength_>mA)throw new Error(n.errorPrefix_+"has a key path longer than "+mA+" bytes ("+n.byteLength_+").");if(n.parts_.length>pA)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+pA+") or object contains a cycle "+Zo(n))}function Zo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends R1{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new hE}getInitialEvent(e){return me(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=1e3,Az=60*5*1e3,gA=30*1e3,Sz=1.3,Rz=3e4,Cz="server_kill",_A=3;class ci extends S1{constructor(e,t,s,r,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=ci.nextPersistentConnectionId_++,this.log_=zh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_u,this.maxReconnectDelay_=Az,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!S0())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");hE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ep.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,s){const r=++this.requestNumber_,i={r,a:e,b:t};this.log_(wn(i)),me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),s&&(this.requestCBHash_[r]=s)}get(e){this.initConnection_();const t=new Cp,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,s,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),me(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:s};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(s)})}sendListen_(e){const t=e.query,s=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+s+" for "+r);const i={p:s},o="q";e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;ci.warnOnListenWarnings_(c,t),(this.listens.get(s)&&this.listens.get(s).get(r))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(s,r),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&rr(e,"w")){const s=qc(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();ms(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||JF(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=gA)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=YF(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(t,s,r=>{const i=r.s,o=r.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,s=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,s)})}unlisten(e,t){const s=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,e._queryObject,t)}sendUnlisten_(e,t,s,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e},o="n";r&&(i.q=s,i.t=r),this.sendRequest(o,i)}onDisconnectPut(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:s})}onDisconnectMerge(e,t,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:s})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,s,r){const i={p:t,d:s};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,t,s,r){this.putInternal("p",e,t,s,r)}merge(e,t,s,r){this.putInternal("m",e,t,s,r)}putInternal(e,t,s,r,i){this.initConnection_();const o={p:t,d:s};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,s,i=>{this.log_(t+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(i.s,i.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,s=>{if(s.s!=="ok"){const i=s.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wn(e));const t=e.r,s=this.requestCBHash_[t];s&&(delete this.requestCBHash_[t],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):B_("Unrecognized action received from server: "+wn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_u,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=_u,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Rz&&(this.reconnectDelay_=_u),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Sz)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+ci.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,s())},u=function(f){me(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,g]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?xn("getToken() completed but was canceled"):(xn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=g&&g.token,a=new Ez(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,s,v=>{ms(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(Cz)},i))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&ms(f),c())}}}interrupt(e){xn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){xn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],n_(this.interruptReasons_)&&(this.reconnectDelay_=_u,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let s;t?s=t.map(i=>aE(i)).join("$"):s="default";const r=this.removeListen_(e,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const s=new Rt(e).toString();let r;if(this.listens.has(s)){const i=this.listens.get(s);r=i.get(t),i.delete(t),i.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(e,t){xn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_A&&(this.reconnectDelay_=gA,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){xn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_A&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+r1.replace(/\./g,"-")]=1,Cy()?e["framework.cordova"]=1:A0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ep.getInstance().currentlyOnline();return n_(this.interruptReasons_)&&e}}ci.nextPersistentConnectionId_=0;ci.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Je(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const s=new Je(cl,e),r=new Je(cl,t);return this.compare(s,r)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd;class O1 extends um{static get __EMPTY_NODE(){return Kd}static set __EMPTY_NODE(e){Kd=e}compare(e,t){return Rl(e.name,t.name)}isDefinedOn(e){throw fl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Je.MIN}maxPost(){return new Je(Va,Kd)}makePost(e,t){return me(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Kd)}toString(){return".key"}}const Bc=new O1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t,s,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?s(e.key,t):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mn{constructor(e,t,s,r,i){this.key=e,this.value=t,this.color=s??mn.RED,this.left=r??hs.EMPTY_NODE,this.right=i??hs.EMPTY_NODE}copy(e,t,s,r,i){return new mn(e??this.key,t??this.value,s??this.color,r??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const i=s(e,r.key);return i<0?r=r.copy(null,null,null,r.left.insert(e,t,s),null):i===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return hs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let s,r;if(s=this,t(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),t(e,s.key)===0){if(s.right.isEmpty())return hs.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mn.RED=!0;mn.BLACK=!1;class Pz{copy(e,t,s,r,i){return this}insert(e,t,s){return new mn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class hs{constructor(e,t=hs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new hs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,mn.BLACK,null,null))}remove(e){return new hs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mn.BLACK,null,null))}get(e){let t,s=this.root_;for(;!s.isEmpty();){if(t=this.comparator_(e,s.key),t===0)return s.value;t<0?s=s.left:t>0&&(s=s.right)}return null}getPredecessorKey(e){let t,s=this.root_,r=null;for(;!s.isEmpty();)if(t=this.comparator_(e,s.key),t===0){if(s.left.isEmpty())return r?r.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else t<0?s=s.left:t>0&&(r=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zd(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zd(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zd(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zd(this.root_,null,this.comparator_,!0,e)}}hs.EMPTY_NODE=new Pz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(n,e){return Rl(n.name,e.name)}function dE(n,e){return Rl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q_;function kz(n){q_=n}const x1=function(n){return typeof n=="number"?"number:"+l1(n):"string:"+n},L1=function(n){if(n.isLeafNode()){const e=n.val();me(typeof e=="string"||typeof e=="number"||typeof e=="object"&&rr(e,".sv"),"Priority must be a string or number.")}else me(n===q_||n.isEmpty(),"priority of unexpected type.");me(n===q_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yA;class hn{constructor(e,t=hn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,me(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),L1(this.priorityNode_)}static set __childrenNodeConstructor(e){yA=e}static get __childrenNodeConstructor(){return yA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new hn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:Ke(e)===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:hn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const s=Ke(e);return s===null?t:t.isEmpty()&&s!==".priority"?this:(me(s!==".priority"||po(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,hn.__childrenNodeConstructor.EMPTY_NODE.updateChild(bt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+x1(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=l1(this.value_):e+=this.value_,this.lazyHash_=o1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===hn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof hn.__childrenNodeConstructor?-1:(me(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,s=typeof this.value_,r=hn.VALUE_TYPE_ORDER.indexOf(t),i=hn.VALUE_TYPE_ORDER.indexOf(s);return me(r>=0,"Unknown leaf type: "+t),me(i>=0,"Unknown leaf type: "+s),r===i?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}hn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V1,M1;function Dz(n){V1=n}function Oz(n){M1=n}class xz extends um{compare(e,t){const s=e.node.getPriority(),r=t.node.getPriority(),i=s.compareTo(r);return i===0?Rl(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(Va,new hn("[PRIORITY-POST]",M1))}makePost(e,t){const s=V1(e);return new Je(t,new hn("[PRIORITY-POST]",s))}toString(){return".priority"}}const Mn=new xz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=Math.log(2);class Vz{constructor(e){const t=i=>parseInt(Math.log(i)/Lz,10),s=i=>parseInt(Array(i+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=s(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tp=function(n,e,t,s){n.sort(e);const r=function(c,u){const d=u-c;let f,g;if(d===0)return null;if(d===1)return f=n[c],g=t?t(f):f,new mn(g,f.node,mn.BLACK,null,null);{const v=parseInt(d/2,10)+c,w=r(c,v),I=r(v+1,u);return f=n[v],g=t?t(f):f,new mn(g,f.node,mn.BLACK,w,I)}},i=function(c){let u=null,d=null,f=n.length;const g=function(w,I){const b=f-w,O=f;f-=w;const x=r(b+1,O),M=n[b],K=t?t(M):M;v(new mn(K,M.node,I,null,x))},v=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){const I=c.nextBitIsOne(),b=Math.pow(2,c.count-(w+1));I?g(b,mn.BLACK):(g(b,mn.BLACK),g(b,mn.RED))}return d},o=new Vz(n.length),a=i(o);return new hs(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Og;const _c={};class ri{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return me(_c&&Mn,"ChildrenNode.ts has not been loaded"),Og=Og||new ri({".priority":_c},{".priority":Mn}),Og}get(e){const t=qc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hs?t:null}hasIndex(e){return rr(this.indexSet_,e.toString())}addIndex(e,t){me(e!==Bc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let r=!1;const i=t.getIterator(Je.Wrap);let o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),s.push(o),o=i.getNext();let a;r?a=tp(s,e.getCompare()):a=_c;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const d=Object.assign({},this.indexes_);return d[c]=a,new ri(d,u)}addToIndexes(e,t){const s=Cf(this.indexes_,(r,i)=>{const o=qc(this.indexSet_,i);if(me(o,"Missing index implementation for "+i),r===_c)if(o.isDefinedOn(e.node)){const a=[],c=t.getIterator(Je.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),tp(a,o.getCompare())}else return _c;else{const a=t.get(e.name);let c=r;return a&&(c=c.remove(new Je(e.name,a))),c.insert(e,e.node)}});return new ri(s,this.indexSet_)}removeFromIndexes(e,t){const s=Cf(this.indexes_,r=>{if(r===_c)return r;{const i=t.get(e.name);return i?r.remove(new Je(e.name,i)):r}});return new ri(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yu;class it{constructor(e,t,s){this.children_=e,this.priorityNode_=t,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&L1(this.priorityNode_),this.children_.isEmpty()&&me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yu||(yu=new it(new hs(dE),null,ri.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yu}updatePriority(e){return this.children_.isEmpty()?this:new it(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?yu:t}}getChild(e){const t=Ke(e);return t===null?this:this.getImmediateChild(t).getChild(bt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(me(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const s=new Je(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(s,this.children_));const o=r.isEmpty()?yu:this.priorityNode_;return new it(r,o,i)}}updateChild(e,t){const s=Ke(e);if(s===null)return t;{me(Ke(e)!==".priority"||po(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(s).updateChild(bt(e),t);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let s=0,r=0,i=!0;if(this.forEachChild(Mn,(o,a)=>{t[o]=a.val(e),s++,i&&it.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1}),!e&&i&&r<2*s){const o=[];for(const a in t)o[a]=t[a];return o}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+x1(this.getPriority().val())+":"),this.forEachChild(Mn,(t,s)=>{const r=s.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":o1(e)}return this.lazyHash_}getPredecessorChildName(e,t,s){const r=this.resolveIndex_(s);if(r){const i=r.getPredecessorKey(new Je(e,t));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Je(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const s=t.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Je(t,this.children_.get(t)):null}forEachChild(e,t){const s=this.resolveIndex_(e);return s?s.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Je.Wrap);let i=r.peek();for(;i!=null&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const s=this.resolveIndex_(t);if(s)return s.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let i=r.peek();for(;i!=null&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gh?-1:0}withIndex(e){if(e===Bc||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new it(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Bc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const s=this.getIterator(Mn),r=t.getIterator(Mn);let i=s.getNext(),o=r.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=s.getNext(),o=r.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Bc?null:this.indexMap_.get(e.toString())}}it.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Mz extends it{constructor(){super(new hs(dE),it.EMPTY_NODE,ri.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return it.EMPTY_NODE}isEmpty(){return!1}}const Gh=new Mz;Object.defineProperties(Je,{MIN:{value:new Je(cl,it.EMPTY_NODE)},MAX:{value:new Je(Va,Gh)}});O1.__EMPTY_NODE=it.EMPTY_NODE;hn.__childrenNodeConstructor=it;kz(Gh);Oz(Gh);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=!0;function En(n,e=null){if(n===null)return it.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),me(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new hn(t,En(e))}if(!(n instanceof Array)&&Fz){const t=[];let s=!1;if(Us(n,(o,a)=>{if(o.substring(0,1)!=="."){const c=En(a);c.isEmpty()||(s=s||!c.getPriority().isEmpty(),t.push(new Je(o,c)))}}),t.length===0)return it.EMPTY_NODE;const i=tp(t,Nz,o=>o.name,dE);if(s){const o=tp(t,Mn.getCompare());return new it(i,En(e),new ri({".priority":o},{".priority":Mn}))}else return new it(i,En(e),ri.Default)}else{let t=it.EMPTY_NODE;return Us(n,(s,r)=>{if(rr(n,s)&&s.substring(0,1)!=="."){const i=En(r);(i.isLeafNode()||!i.isEmpty())&&(t=t.updateImmediateChild(s,i))}}),t.updatePriority(En(e))}}Dz(En);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz extends um{constructor(e){super(),this.indexPath_=e,me(!ze(e)&&Ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const s=this.extractChild(e.node),r=this.extractChild(t.node),i=s.compareTo(r);return i===0?Rl(e.name,t.name):i}makePost(e,t){const s=En(e),r=it.EMPTY_NODE.updateChild(this.indexPath_,s);return new Je(t,r)}maxPost(){const e=it.EMPTY_NODE.updateChild(this.indexPath_,Gh);return new Je(Va,e)}toString(){return P1(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z extends um{compare(e,t){const s=e.node.compareTo(t.node);return s===0?Rl(e.name,t.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,t){const s=En(e);return new Je(t,s)}toString(){return".value"}}const Bz=new $z;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(n){return{type:"value",snapshotNode:n}}function qz(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Hz(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function vA(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Wz(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cl}hasEnd(){return this.endSet_}getIndexEndValue(){return me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Va}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return me(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const e=new fE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function EA(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Mn?t="$priority":n.index_===Bz?t="$value":n.index_===Bc?t="$key":(me(n.index_ instanceof Uz,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=wn(t),n.startSet_){const s=n.startAfterSet_?"startAfter":"startAt";e[s]=wn(n.indexStartValue_),n.startNameSet_&&(e[s]+=","+wn(n.indexStartName_))}if(n.endSet_){const s=n.endBeforeSet_?"endBefore":"endAt";e[s]=wn(n.indexEndValue_),n.endNameSet_&&(e[s]+=","+wn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function wA(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Mn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends S1{constructor(e,t,s,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=s,this.appCheckTokenProvider_=r,this.log_=zh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,s,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=np.getListenId_(e,s),a={};this.listens_[o]=a;const c=EA(e._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(i,f,!1,s),qc(this.listens_,o)===a){let g;u?u===401?g="permission_denied":g="rest_error:"+u:g="ok",r(g,null)}})}unlisten(e,t){const s=np.getListenId_(e,t);delete this.listens_[s]}get(e){const t=EA(e._queryParams),s=e._path.toString(),r=new Cp;return this.restRequest_(s+".json",t,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(s,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},s){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pl(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=eh(a.responseText)}catch{ms("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,c)}else a.status!==401&&a.status!==404&&ms("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(){this.rootNode_=it.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(){return{value:null,children:new Map}}function F1(n,e,t){if(ze(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const s=Ke(e);n.children.has(s)||n.children.set(s,sp());const r=n.children.get(s);e=bt(e),F1(r,e,t)}}function H_(n,e,t){n.value!==null?t(e,n.value):zz(n,(s,r)=>{const i=new Rt(e.toString()+"/"+s);H_(r,i,t)})}function zz(n,e){n.children.forEach((t,s)=>{e(s,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Us(this.last_,(s,r)=>{t[s]=t[s]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=10*1e3,Qz=30*1e3,Yz=5*60*1e3;class Jz{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Gz(e);const s=TA+(Qz-TA)*Math.random();Hu(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),t={};let s=!1;Us(e,(r,i)=>{i>0&&rr(this.statsToReport_,r)&&(t[r]=i,s=!0)}),s&&this.server_.reportStats(t),Hu(this.reportStats_.bind(this),Math.floor(Math.random()*2*Yz))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ir;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ir||(Ir={}));function U1(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function B1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t,s){this.path=e,this.affectedTree=t,this.revert=s,this.type=Ir.ACK_USER_WRITE,this.source=U1()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Rt(e));return new rp(dt(),t,this.revert)}}else return me(Ke(this.path)===e,"operationForChild called for unrelated child."),new rp(bt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,t,s){this.source=e,this.path=t,this.snap=s,this.type=Ir.OVERWRITE}operationForChild(e){return ze(this.path)?new Ma(this.source,dt(),this.snap.getImmediateChild(e)):new Ma(this.source,bt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,s){this.source=e,this.path=t,this.children=s,this.type=Ir.MERGE}operationForChild(e){if(ze(this.path)){const t=this.children.subtree(new Rt(e));return t.isEmpty()?null:t.value?new Ma(this.source,dt(),t.value):new Th(this.source,dt(),t)}else return me(Ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Th(this.source,bt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,s){this.node_=e,this.fullyInitialized_=t,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ke(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function Xz(n,e,t,s){const r=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Wz(o.childName,o.snapshotNode))}),vu(n,r,"child_removed",e,s,t),vu(n,r,"child_added",e,s,t),vu(n,r,"child_moved",i,s,t),vu(n,r,"child_changed",e,s,t),vu(n,r,"value",e,s,t),r}function vu(n,e,t,s,r,i){const o=s.filter(a=>a.type===t);o.sort((a,c)=>eG(n,a,c)),o.forEach(a=>{const c=Zz(n,a,i);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function Zz(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function eG(n,e,t){if(e.childName==null||t.childName==null)throw fl("Should only compare child_ events.");const s=new Je(e.childName,e.snapshotNode),r=new Je(t.childName,t.snapshotNode);return n.index_.compare(s,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(n,e){return{eventCache:n,serverCache:e}}function Wu(n,e,t,s){return j1(new pE(e,t,s),n.serverCache)}function q1(n,e,t,s){return j1(n.eventCache,new pE(e,t,s))}function W_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Fa(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xg;const tG=()=>(xg||(xg=new hs(BK)),xg);class Tt{constructor(e,t=tG()){this.value=e,this.children=t}static fromObject(e){let t=new Tt(null);return Us(e,(s,r)=>{t=t.set(new Rt(s),r)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:dt(),value:this.value};if(ze(e))return null;{const s=Ke(e),r=this.children.get(s);if(r!==null){const i=r.findRootMostMatchingPathAndValue(bt(e),t);return i!=null?{path:_n(new Rt(s),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const t=Ke(e),s=this.children.get(t);return s!==null?s.subtree(bt(e)):new Tt(null)}}set(e,t){if(ze(e))return new Tt(t,this.children);{const s=Ke(e),i=(this.children.get(s)||new Tt(null)).set(bt(e),t),o=this.children.insert(s,i);return new Tt(this.value,o)}}remove(e){if(ze(e))return this.children.isEmpty()?new Tt(null):new Tt(null,this.children);{const t=Ke(e),s=this.children.get(t);if(s){const r=s.remove(bt(e));let i;return r.isEmpty()?i=this.children.remove(t):i=this.children.insert(t,r),this.value===null&&i.isEmpty()?new Tt(null):new Tt(this.value,i)}else return this}}get(e){if(ze(e))return this.value;{const t=Ke(e),s=this.children.get(t);return s?s.get(bt(e)):null}}setTree(e,t){if(ze(e))return t;{const s=Ke(e),i=(this.children.get(s)||new Tt(null)).setTree(bt(e),t);let o;return i.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,i),new Tt(this.value,o)}}fold(e){return this.fold_(dt(),e)}fold_(e,t){const s={};return this.children.inorderTraversal((r,i)=>{s[r]=i.fold_(_n(e,r),t)}),t(e,this.value,s)}findOnPath(e,t){return this.findOnPath_(e,dt(),t)}findOnPath_(e,t,s){const r=this.value?s(t,this.value):!1;if(r)return r;if(ze(e))return null;{const i=Ke(e),o=this.children.get(i);return o?o.findOnPath_(bt(e),_n(t,i),s):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,dt(),t)}foreachOnPath_(e,t,s){if(ze(e))return this;{this.value&&s(t,this.value);const r=Ke(e),i=this.children.get(r);return i?i.foreachOnPath_(bt(e),_n(t,r),s):new Tt(null)}}foreach(e){this.foreach_(dt(),e)}foreach_(e,t){this.children.inorderTraversal((s,r)=>{r.foreach_(_n(e,s),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,s)=>{s.value&&e(t,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.writeTree_=e}static empty(){return new nr(new Tt(null))}}function Ku(n,e,t){if(ze(e))return new nr(new Tt(t));{const s=n.writeTree_.findRootMostValueAndPath(e);if(s!=null){const r=s.path;let i=s.value;const o=Vs(r,e);return i=i.updateChild(o,t),new nr(n.writeTree_.set(r,i))}else{const r=new Tt(t),i=n.writeTree_.setTree(e,r);return new nr(i)}}}function bA(n,e,t){let s=n;return Us(t,(r,i)=>{s=Ku(s,_n(e,r),i)}),s}function IA(n,e){if(ze(e))return nr.empty();{const t=n.writeTree_.setTree(e,new Tt(null));return new nr(t)}}function K_(n,e){return za(n,e)!=null}function za(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Vs(t.path,e)):null}function AA(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Mn,(s,r)=>{e.push(new Je(s,r))}):n.writeTree_.children.inorderTraversal((s,r)=>{r.value!=null&&e.push(new Je(s,r.value))}),e}function to(n,e){if(ze(e))return n;{const t=za(n,e);return t!=null?new nr(new Tt(t)):new nr(n.writeTree_.subtree(e))}}function z_(n){return n.writeTree_.isEmpty()}function ll(n,e){return H1(dt(),n.writeTree_,e)}function H1(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let s=null;return e.children.inorderTraversal((r,i)=>{r===".priority"?(me(i.value!==null,"Priority writes must always be leaf nodes"),s=i.value):t=H1(_n(n,r),i,t)}),!t.getChild(n).isEmpty()&&s!==null&&(t=t.updateChild(_n(n,".priority"),s)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n,e){return Y1(e,n)}function nG(n,e,t,s,r){me(s>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:s,visible:r}),r&&(n.visibleWrites=Ku(n.visibleWrites,e,t)),n.lastWriteId=s}function sG(n,e){for(let t=0;t<n.allWrites.length;t++){const s=n.allWrites[t];if(s.writeId===e)return s}return null}function rG(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);me(t>=0,"removeWrite called with nonexistent writeId.");const s=n.allWrites[t];n.allWrites.splice(t,1);let r=s.visible,i=!1,o=n.allWrites.length-1;for(;r&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&iG(a,s.path)?r=!1:Zs(s.path,a.path)&&(i=!0)),o--}if(r){if(i)return oG(n),!0;if(s.snap)n.visibleWrites=IA(n.visibleWrites,s.path);else{const a=s.children;Us(a,c=>{n.visibleWrites=IA(n.visibleWrites,_n(s.path,c))})}return!0}else return!1}function iG(n,e){if(n.snap)return Zs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Zs(_n(n.path,t),e))return!0;return!1}function oG(n){n.visibleWrites=K1(n.allWrites,aG,dt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function aG(n){return n.visible}function K1(n,e,t){let s=nr.empty();for(let r=0;r<n.length;++r){const i=n[r];if(e(i)){const o=i.path;let a;if(i.snap)Zs(t,o)?(a=Vs(t,o),s=Ku(s,a,i.snap)):Zs(o,t)&&(a=Vs(o,t),s=Ku(s,dt(),i.snap.getChild(a)));else if(i.children){if(Zs(t,o))a=Vs(t,o),s=bA(s,a,i.children);else if(Zs(o,t))if(a=Vs(o,t),ze(a))s=bA(s,dt(),i.children);else{const c=qc(i.children,Ke(a));if(c){const u=c.getChild(bt(a));s=Ku(s,dt(),u)}}}else throw fl("WriteRecord should have .snap or .children")}}return s}function z1(n,e,t,s,r){if(!s&&!r){const i=za(n.visibleWrites,e);if(i!=null)return i;{const o=to(n.visibleWrites,e);if(z_(o))return t;if(t==null&&!K_(o,dt()))return null;{const a=t||it.EMPTY_NODE;return ll(o,a)}}}else{const i=to(n.visibleWrites,e);if(!r&&z_(i))return t;if(!r&&t==null&&!K_(i,dt()))return null;{const o=function(u){return(u.visible||r)&&(!s||!~s.indexOf(u.writeId))&&(Zs(u.path,e)||Zs(e,u.path))},a=K1(n.allWrites,o,e),c=t||it.EMPTY_NODE;return ll(a,c)}}}function cG(n,e,t){let s=it.EMPTY_NODE;const r=za(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Mn,(i,o)=>{s=s.updateImmediateChild(i,o)}),s;if(t){const i=to(n.visibleWrites,e);return t.forEachChild(Mn,(o,a)=>{const c=ll(to(i,new Rt(o)),a);s=s.updateImmediateChild(o,c)}),AA(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const i=to(n.visibleWrites,e);return AA(i).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function lG(n,e,t,s,r){me(s||r,"Either existingEventSnap or existingServerSnap must exist");const i=_n(e,t);if(K_(n.visibleWrites,i))return null;{const o=to(n.visibleWrites,i);return z_(o)?r.getChild(t):ll(o,r.getChild(t))}}function uG(n,e,t,s){const r=_n(e,t),i=za(n.visibleWrites,r);if(i!=null)return i;if(s.isCompleteForChild(t)){const o=to(n.visibleWrites,r);return ll(o,s.getNode().getImmediateChild(t))}else return null}function hG(n,e){return za(n.visibleWrites,e)}function dG(n,e,t,s,r,i,o){let a;const c=to(n.visibleWrites,e),u=za(c,dt());if(u!=null)a=u;else if(t!=null)a=ll(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],f=o.getCompare(),g=i?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let v=g.getNext();for(;v&&d.length<r;)f(v,s)!==0&&d.push(v),v=g.getNext();return d}else return[]}function fG(){return{visibleWrites:nr.empty(),allWrites:[],lastWriteId:-1}}function G_(n,e,t,s){return z1(n.writeTree,n.treePath,e,t,s)}function G1(n,e){return cG(n.writeTree,n.treePath,e)}function SA(n,e,t,s){return lG(n.writeTree,n.treePath,e,t,s)}function ip(n,e){return hG(n.writeTree,_n(n.treePath,e))}function pG(n,e,t,s,r,i){return dG(n.writeTree,n.treePath,e,t,s,r,i)}function mE(n,e,t){return uG(n.writeTree,n.treePath,e,t)}function Q1(n,e){return Y1(_n(n.treePath,e),n.writeTree)}function Y1(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,s=e.childName;me(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),me(s!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(s);if(r){const i=r.type;if(t==="child_added"&&i==="child_removed")this.changeMap.set(s,vA(s,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&i==="child_added")this.changeMap.delete(s);else if(t==="child_removed"&&i==="child_changed")this.changeMap.set(s,Hz(s,r.oldSnap));else if(t==="child_changed"&&i==="child_added")this.changeMap.set(s,qz(s,e.snapshotNode));else if(t==="child_changed"&&i==="child_changed")this.changeMap.set(s,vA(s,e.snapshotNode,r.oldSnap));else throw fl("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{getCompleteChild(e){return null}getChildAfterChild(e,t,s){return null}}const J1=new gG;class gE{constructor(e,t,s=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=s}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new pE(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mE(this.writes_,e,s)}}getChildAfterChild(e,t,s){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fa(this.viewCache_),i=pG(this.writes_,r,t,1,s,e);return i.length===0?null:i[0]}}function _G(n,e){me(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),me(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function yG(n,e,t,s,r){const i=new mG;let o,a;if(t.type===Ir.OVERWRITE){const u=t;u.source.fromUser?o=Q_(n,e,u.path,u.snap,s,r,i):(me(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ze(u.path),o=op(n,e,u.path,u.snap,s,r,a,i))}else if(t.type===Ir.MERGE){const u=t;u.source.fromUser?o=EG(n,e,u.path,u.children,s,r,i):(me(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Y_(n,e,u.path,u.children,s,r,a,i))}else if(t.type===Ir.ACK_USER_WRITE){const u=t;u.revert?o=bG(n,e,u.path,s,r,i):o=wG(n,e,u.path,u.affectedTree,s,r,i)}else if(t.type===Ir.LISTEN_COMPLETE)o=TG(n,e,t.path,s,i);else throw fl("Unknown operation type: "+t.type);const c=i.getChanges();return vG(e,o,c),{viewCache:o,changes:c}}function vG(n,e,t){const s=e.eventCache;if(s.isFullyInitialized()){const r=s.getNode().isLeafNode()||s.getNode().isEmpty(),i=W_(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!s.getNode().equals(i)||!s.getNode().getPriority().equals(i.getPriority()))&&t.push(jz(W_(e)))}}function X1(n,e,t,s,r,i){const o=e.eventCache;if(ip(s,t)!=null)return e;{let a,c;if(ze(t))if(me(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Fa(e),d=u instanceof it?u:it.EMPTY_NODE,f=G1(s,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,i)}else{const u=G_(s,Fa(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=Ke(t);if(u===".priority"){me(po(t)===1,"Can't have a priority with additional path components");const d=o.getNode();c=e.serverCache.getNode();const f=SA(s,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=o.getNode()}else{const d=bt(t);let f;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const g=SA(s,t,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(u).updateChild(d,g):f=o.getNode().getImmediateChild(u)}else f=mE(s,u,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),u,f,d,r,i):a=o.getNode()}}return Wu(e,a,o.isFullyInitialized()||ze(t),n.filter.filtersNodes())}}function op(n,e,t,s,r,i,o,a){const c=e.serverCache;let u;const d=o?n.filter:n.filter.getIndexedFilter();if(ze(t))u=d.updateFullNode(c.getNode(),s,null);else if(d.filtersNodes()&&!c.isFiltered()){const v=c.getNode().updateChild(t,s);u=d.updateFullNode(c.getNode(),v,null)}else{const v=Ke(t);if(!c.isCompleteForPath(t)&&po(t)>1)return e;const w=bt(t),b=c.getNode().getImmediateChild(v).updateChild(w,s);v===".priority"?u=d.updatePriority(c.getNode(),b):u=d.updateChild(c.getNode(),v,b,w,J1,null)}const f=q1(e,u,c.isFullyInitialized()||ze(t),d.filtersNodes()),g=new gE(r,f,i);return X1(n,f,t,r,g,a)}function Q_(n,e,t,s,r,i,o){const a=e.eventCache;let c,u;const d=new gE(r,e,i);if(ze(t))u=n.filter.updateFullNode(e.eventCache.getNode(),s,o),c=Wu(e,u,!0,n.filter.filtersNodes());else{const f=Ke(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),s),c=Wu(e,u,a.isFullyInitialized(),a.isFiltered());else{const g=bt(t),v=a.getNode().getImmediateChild(f);let w;if(ze(g))w=s;else{const I=d.getCompleteChild(f);I!=null?C1(g)===".priority"&&I.getChild(N1(g)).isEmpty()?w=I:w=I.updateChild(g,s):w=it.EMPTY_NODE}if(v.equals(w))c=e;else{const I=n.filter.updateChild(a.getNode(),f,w,g,d,o);c=Wu(e,I,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function RA(n,e){return n.eventCache.isCompleteForChild(e)}function EG(n,e,t,s,r,i,o){let a=e;return s.foreach((c,u)=>{const d=_n(t,c);RA(e,Ke(d))&&(a=Q_(n,a,d,u,r,i,o))}),s.foreach((c,u)=>{const d=_n(t,c);RA(e,Ke(d))||(a=Q_(n,a,d,u,r,i,o))}),a}function CA(n,e,t){return t.foreach((s,r)=>{e=e.updateChild(s,r)}),e}function Y_(n,e,t,s,r,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;ze(t)?u=s:u=new Tt(null).setTree(t,s);const d=e.serverCache.getNode();return u.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){const v=e.serverCache.getNode().getImmediateChild(f),w=CA(n,v,g);c=op(n,c,new Rt(f),w,r,i,o,a)}}),u.children.inorderTraversal((f,g)=>{const v=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!v){const w=e.serverCache.getNode().getImmediateChild(f),I=CA(n,w,g);c=op(n,c,new Rt(f),I,r,i,o,a)}}),c}function wG(n,e,t,s,r,i,o){if(ip(r,t)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(s.value!=null){if(ze(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return op(n,e,t,c.getNode().getChild(t),r,i,a,o);if(ze(t)){let u=new Tt(null);return c.getNode().forEachChild(Bc,(d,f)=>{u=u.set(new Rt(d),f)}),Y_(n,e,t,u,r,i,a,o)}else return e}else{let u=new Tt(null);return s.foreach((d,f)=>{const g=_n(t,d);c.isCompleteForPath(g)&&(u=u.set(d,c.getNode().getChild(g)))}),Y_(n,e,t,u,r,i,a,o)}}function TG(n,e,t,s,r){const i=e.serverCache,o=q1(e,i.getNode(),i.isFullyInitialized()||ze(t),i.isFiltered());return X1(n,o,t,s,J1,r)}function bG(n,e,t,s,r,i){let o;if(ip(s,t)!=null)return e;{const a=new gE(s,e,r),c=e.eventCache.getNode();let u;if(ze(t)||Ke(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=G_(s,Fa(e));else{const f=e.serverCache.getNode();me(f instanceof it,"serverChildren would be complete if leaf node"),d=G1(s,f)}d=d,u=n.filter.updateFullNode(c,d,i)}else{const d=Ke(t);let f=mE(s,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,bt(t),a,i):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,it.EMPTY_NODE,bt(t),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=G_(s,Fa(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||ip(s,dt())!=null,Wu(e,u,o,n.filter.filtersNodes())}}function IG(n,e){const t=Fa(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ze(e)&&!t.getImmediateChild(Ke(e)).isEmpty())?t.getChild(e):null}function PA(n,e,t,s){e.type===Ir.MERGE&&e.source.queryId!==null&&(me(Fa(n.viewCache_),"We should always have a full cache before handling merges"),me(W_(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,i=yG(n.processor_,r,e,t,s);return _G(n.processor_,i.viewCache),me(i.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=i.viewCache,AG(n,i.changes,i.viewCache.eventCache.getNode())}function AG(n,e,t,s){const r=n.eventRegistrations_;return Xz(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NA;function SG(n){me(!NA,"__referenceConstructor has already been defined"),NA=n}function _E(n,e,t,s){const r=e.source.queryId;if(r!==null){const i=n.views.get(r);return me(i!=null,"SyncTree gave us an op for an invalid query."),PA(i,e,t,s)}else{let i=[];for(const o of n.views.values())i=i.concat(PA(o,e,t,s));return i}}function yE(n,e){let t=null;for(const s of n.views.values())t=t||IG(s,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kA;function RG(n){me(!kA,"__referenceConstructor has already been defined"),kA=n}class DA{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Tt(null),this.pendingWriteTree_=fG(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Z1(n,e,t,s,r){return nG(n.pendingWriteTree_,e,t,s,r),r?dm(n,new Ma(U1(),e,t)):[]}function ha(n,e,t=!1){const s=sG(n.pendingWriteTree_,e);if(rG(n.pendingWriteTree_,e)){let i=new Tt(null);return s.snap!=null?i=i.set(dt(),!0):Us(s.children,o=>{i=i.set(new Rt(o),!0)}),dm(n,new rp(s.path,i,t))}else return[]}function hm(n,e,t){return dm(n,new Ma($1(),e,t))}function CG(n,e,t){const s=Tt.fromObject(t);return dm(n,new Th($1(),e,s))}function PG(n,e,t,s){const r=nk(n,s);if(r!=null){const i=sk(r),o=i.path,a=i.queryId,c=Vs(o,e),u=new Ma(B1(a),c,t);return rk(n,o,u)}else return[]}function NG(n,e,t,s){const r=nk(n,s);if(r){const i=sk(r),o=i.path,a=i.queryId,c=Vs(o,e),u=Tt.fromObject(t),d=new Th(B1(a),c,u);return rk(n,o,d)}else return[]}function vE(n,e,t){const r=n.pendingWriteTree_,i=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Vs(o,e),u=yE(a,c);if(u)return u});return z1(r,e,i,t,!0)}function dm(n,e){return ek(e,n.syncPointTree_,null,W1(n.pendingWriteTree_,dt()))}function ek(n,e,t,s){if(ze(n.path))return tk(n,e,t,s);{const r=e.get(dt());t==null&&r!=null&&(t=yE(r,dt()));let i=[];const o=Ke(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){const u=t?t.getImmediateChild(o):null,d=Q1(s,o);i=i.concat(ek(a,c,u,d))}return r&&(i=i.concat(_E(r,n,s,t))),i}}function tk(n,e,t,s){const r=e.get(dt());t==null&&r!=null&&(t=yE(r,dt()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=t?t.getImmediateChild(o):null,u=Q1(s,o),d=n.operationForChild(o);d&&(i=i.concat(tk(d,a,c,u)))}),r&&(i=i.concat(_E(r,n,s,t))),i}function nk(n,e){return n.tagToQueryMap.get(e)}function sk(n){const e=n.indexOf("$");return me(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Rt(n.substr(0,e))}}function rk(n,e,t){const s=n.syncPointTree_.get(e);me(s,"Missing sync point for query tag that we're tracking");const r=W1(n.pendingWriteTree_,e);return _E(s,t,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new EE(t)}node(){return this.node_}}class wE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_n(this.path_,e);return new wE(this.syncTree_,t)}node(){return vE(this.syncTree_,this.path_)}}const kG=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},OA=function(n,e,t){if(!n||typeof n!="object")return n;if(me(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return DG(n[".sv"],e,t);if(typeof n[".sv"]=="object")return OG(n[".sv"],e);me(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},DG=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:me(!1,"Unexpected server value: "+n)}},OG=function(n,e,t){n.hasOwnProperty("increment")||me(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const s=n.increment;typeof s!="number"&&me(!1,"Unexpected increment value: "+s);const r=e.node();if(me(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return s;const o=r.getValue();return typeof o!="number"?s:o+s},xG=function(n,e,t,s){return TE(e,new wE(t,n),s)},ik=function(n,e,t){return TE(n,new EE(e),t)};function TE(n,e,t){const s=n.getPriority().val(),r=OA(s,e.getImmediateChild(".priority"),t);let i;if(n.isLeafNode()){const o=n,a=OA(o.getValue(),e,t);return a!==o.getValue()||r!==o.getPriority().val()?new hn(a,En(r)):n}else{const o=n;return i=o,r!==o.getPriority().val()&&(i=i.updatePriority(new hn(r))),o.forEachChild(Mn,(a,c)=>{const u=TE(c,e.getImmediateChild(a),t);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e="",t=null,s={children:{},childCount:0}){this.name=e,this.parent=t,this.node=s}}function IE(n,e){let t=e instanceof Rt?e:new Rt(e),s=n,r=Ke(t);for(;r!==null;){const i=qc(s.node.children,r)||{children:{},childCount:0};s=new bE(r,s,i),t=bt(t),r=Ke(t)}return s}function Pl(n){return n.node.value}function ok(n,e){n.node.value=e,J_(n)}function ak(n){return n.node.childCount>0}function LG(n){return Pl(n)===void 0&&!ak(n)}function fm(n,e){Us(n.node.children,(t,s)=>{e(new bE(t,n,s))})}function ck(n,e,t,s){t&&!s&&e(n),fm(n,r=>{ck(r,e,!0,s)}),t&&s&&e(n)}function VG(n,e,t){let s=n.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Qh(n){return new Rt(n.parent===null?n.name:Qh(n.parent)+"/"+n.name)}function J_(n){n.parent!==null&&MG(n.parent,n.name,n)}function MG(n,e,t){const s=LG(t),r=rr(n.node.children,e);s&&r?(delete n.node.children[e],n.node.childCount--,J_(n)):!s&&!r&&(n.node.children[e]=t.node,n.node.childCount++,J_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FG=/[\[\].#$\/\u0000-\u001F\u007F]/,UG=/[\[\].#$\u0000-\u001F\u007F]/,Lg=10*1024*1024,lk=function(n){return typeof n=="string"&&n.length!==0&&!FG.test(n)},$G=function(n){return typeof n=="string"&&n.length!==0&&!UG.test(n)},BG=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$G(n)},jG=function(n,e,t,s){AE(k0(n,"value"),e,t)},AE=function(n,e,t){const s=t instanceof Rt?new Tz(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Zo(s));if(typeof e=="function")throw new Error(n+"contains a function "+Zo(s)+" with contents = "+e.toString());if(a1(e))throw new Error(n+"contains "+e.toString()+" "+Zo(s));if(typeof e=="string"&&e.length>Lg/3&&Pp(e)>Lg)throw new Error(n+"contains a string greater than "+Lg+" utf8 bytes "+Zo(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,i=!1;if(Us(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!lk(o)))throw new Error(n+" contains an invalid key ("+o+") "+Zo(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bz(s,o),AE(n,a,s),Iz(s)}),r&&i)throw new Error(n+' contains ".value" child '+Zo(s)+" in addition to actual children.")}},uk=function(n,e){if(Ke(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},qG=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!lk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!BG(t))throw new Error(k0(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hk(n,e){let t=null;for(let s=0;s<e.length;s++){const r=e[s],i=r.getPath();t!==null&&!k1(i,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:i}),t.events.push(r)}t&&n.eventLists_.push(t)}function mi(n,e,t){hk(n,t),WG(n,s=>Zs(s,e)||Zs(e,s))}function WG(n,e){n.recursionDepth_++;let t=!0;for(let s=0;s<n.eventLists_.length;s++){const r=n.eventLists_[s];if(r){const i=r.path;e(i)?(KG(n.eventLists_[s]),n.eventLists_[s]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function KG(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const s=t.getEventRunner();qu&&xn("event: "+t.toString()),Cl(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG="repo_interrupt",GG=25;class QG{constructor(e,t,s,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=s,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new HG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sp(),this.transactionQueueTree_=new bE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function YG(n,e,t){if(n.stats_=lE(n.repoInfo_),n.forceRestClient_||zK())n.server_=new np(n.repoInfo_,(s,r,i,o)=>{xA(n,s,r,i,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>LA(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wn(t)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}n.persistentConnection_=new ci(n.repoInfo_,e,(s,r,i,o)=>{xA(n,s,r,i,o)},s=>{LA(n,s)},s=>{XG(n,s)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(s=>{n.server_.refreshAuthToken(s)}),n.appCheckProvider_.addTokenChangeListener(s=>{n.server_.refreshAppCheckToken(s.token)}),n.statsReporter_=XK(n.repoInfo_,()=>new Jz(n.stats_,n.server_)),n.infoData_=new Kz,n.infoSyncTree_=new DA({startListening:(s,r,i,o)=>{let a=[];const c=n.infoData_.getNode(s._path);return c.isEmpty()||(a=hm(n.infoSyncTree_,s._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),RE(n,"connected",!1),n.serverSyncTree_=new DA({startListening:(s,r,i,o)=>(n.server_.listen(s,i,r,(a,c)=>{const u=o(a,c);mi(n.eventQueue_,s._path,u)}),[]),stopListening:(s,r)=>{n.server_.unlisten(s,r)}})}function JG(n){const t=n.infoData_.getNode(new Rt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function SE(n){return kG({timestamp:JG(n)})}function xA(n,e,t,s,r){n.dataUpdateCount++;const i=new Rt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(r)if(s){const c=Cf(t,u=>En(u));o=NG(n.serverSyncTree_,i,c,r)}else{const c=En(t);o=PG(n.serverSyncTree_,i,c,r)}else if(s){const c=Cf(t,u=>En(u));o=CG(n.serverSyncTree_,i,c)}else{const c=En(t);o=hm(n.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=pm(n,i)),mi(n.eventQueue_,a,o)}function LA(n,e){RE(n,"connected",e),e===!1&&e8(n)}function XG(n,e){Us(e,(t,s)=>{RE(n,t,s)})}function RE(n,e,t){const s=new Rt("/.info/"+e),r=En(t);n.infoData_.updateSnapshot(s,r);const i=hm(n.infoSyncTree_,s,r);mi(n.eventQueue_,s,i)}function dk(n){return n.nextWriteId_++}function ZG(n,e,t,s,r){CE(n,"set",{path:e.toString(),value:t,priority:s});const i=SE(n),o=En(t,s),a=vE(n.serverSyncTree_,e),c=ik(o,a,i),u=dk(n),d=Z1(n.serverSyncTree_,e,c,u,!0);hk(n.eventQueue_,d),n.server_.put(e.toString(),o.val(!0),(g,v)=>{const w=g==="ok";w||ms("set at "+e+" failed: "+g);const I=ha(n.serverSyncTree_,u,!w);mi(n.eventQueue_,e,I),n8(n,r,g,v)});const f=_k(n,e);pm(n,f),mi(n.eventQueue_,f,[])}function e8(n){CE(n,"onDisconnectEvents");const e=SE(n),t=sp();H_(n.onDisconnect_,dt(),(r,i)=>{const o=xG(r,i,n.serverSyncTree_,e);F1(t,r,o)});let s=[];H_(t,dt(),(r,i)=>{s=s.concat(hm(n.serverSyncTree_,r,i));const o=_k(n,r);pm(n,o)}),n.onDisconnect_=sp(),mi(n.eventQueue_,dt(),s)}function t8(n){n.persistentConnection_&&n.persistentConnection_.interrupt(zG)}function CE(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xn(t,...e)}function n8(n,e,t,s){e&&Cl(()=>{if(t==="ok")e(null);else{const r=(t||"error").toUpperCase();let i=r;s&&(i+=": "+s);const o=new Error(i);o.code=r,e(o)}})}function fk(n,e,t){return vE(n.serverSyncTree_,e,t)||it.EMPTY_NODE}function PE(n,e=n.transactionQueueTree_){if(e||mm(n,e),Pl(e)){const t=mk(n,e);me(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&s8(n,Qh(e),t)}else ak(e)&&fm(e,t=>{PE(n,t)})}function s8(n,e,t){const s=t.map(u=>u.currentWriteId),r=fk(n,e,s);let i=r;const o=r.hash();for(let u=0;u<t.length;u++){const d=t[u];me(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=Vs(e,d.path);i=i.updateChild(f,d.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;n.server_.put(c.toString(),a,u=>{CE(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const f=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(ha(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();mm(n,IE(n.transactionQueueTree_,e)),PE(n,n.transactionQueueTree_),mi(n.eventQueue_,e,d);for(let g=0;g<f.length;g++)Cl(f[g])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{ms("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}pm(n,e)}},o)}function pm(n,e){const t=pk(n,e),s=Qh(t),r=mk(n,t);return r8(n,r,s),s}function r8(n,e,t){if(e.length===0)return;const s=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Vs(t,c.path);let d=!1,f;if(me(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,r=r.concat(ha(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=GG)d=!0,f="maxretry",r=r.concat(ha(n.serverSyncTree_,c.currentWriteId,!0));else{const g=fk(n,c.path,o);c.currentInputSnapshot=g;const v=e[a].update(g.val());if(v!==void 0){AE("transaction failed: Data returned ",v,c.path);let w=En(v);typeof v=="object"&&v!=null&&rr(v,".priority")||(w=w.updatePriority(g.getPriority()));const b=c.currentWriteId,O=SE(n),x=ik(w,g,O);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=x,c.currentWriteId=dk(n),o.splice(o.indexOf(b),1),r=r.concat(Z1(n.serverSyncTree_,c.path,x,c.currentWriteId,c.applyLocally)),r=r.concat(ha(n.serverSyncTree_,b,!0))}else d=!0,f="nodata",r=r.concat(ha(n.serverSyncTree_,c.currentWriteId,!0))}mi(n.eventQueue_,t,r),r=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(f),!1,null))))}mm(n,n.transactionQueueTree_);for(let a=0;a<s.length;a++)Cl(s[a]);PE(n,n.transactionQueueTree_)}function pk(n,e){let t,s=n.transactionQueueTree_;for(t=Ke(e);t!==null&&Pl(s)===void 0;)s=IE(s,t),e=bt(e),t=Ke(e);return s}function mk(n,e){const t=[];return gk(n,e,t),t.sort((s,r)=>s.order-r.order),t}function gk(n,e,t){const s=Pl(e);if(s)for(let r=0;r<s.length;r++)t.push(s[r]);fm(e,r=>{gk(n,r,t)})}function mm(n,e){const t=Pl(e);if(t){let s=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[s]=t[r],s++);t.length=s,ok(e,t.length>0?t:void 0)}fm(e,s=>{mm(n,s)})}function _k(n,e){const t=Qh(pk(n,e)),s=IE(n.transactionQueueTree_,e);return VG(s,r=>{Vg(n,r)}),Vg(n,s),ck(s,r=>{Vg(n,r)}),t}function Vg(n,e){const t=Pl(e);if(t){const s=[];let r=[],i=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(me(i===o-1,"All SENT items should be at beginning of queue."),i=o,t[o].status=3,t[o].abortReason="set"):(me(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(ha(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&s.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?ok(e,void 0):t.length=i+1,mi(n.eventQueue_,Qh(e),r);for(let o=0;o<s.length;o++)Cl(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(n){let e="";const t=n.split("/");for(let s=0;s<t.length;s++)if(t[s].length>0){let r=t[s];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function o8(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const s=t.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ms(`Invalid query segment '${t}' in query '${n}'`)}return e}const VA=function(n,e){const t=a8(n),s=t.namespace;t.domain==="firebase.com"&&pi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&t.domain!=="localhost"&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||UK();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new v1(t.host,t.secure,s,r,e,"",s!==t.subdomain),path:new Rt(t.pathString)}},a8=function(n){let e="",t="",s="",r="",i="",o=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(r=i8(n.substring(d,f)));const g=o8(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const v=e.slice(0,u);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{const w=e.indexOf(".");s=e.substring(0,w).toLowerCase(),t=e.substring(w+1),i=s}"ns"in g&&(i=g.ns)}return{host:e,port:c,domain:t,subdomain:s,secure:o,scheme:a,pathString:r,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t,s,r){this._repo=e,this._path=t,this._queryParams=s,this._orderByCalled=r}get key(){return ze(this._path)?null:C1(this._path)}get ref(){return new Nl(this._repo,this._path)}get _queryIdentifier(){const e=wA(this._queryParams),t=aE(e);return t==="{}"?"default":t}get _queryObject(){return wA(this._queryParams)}isEqual(e){if(e=Pe(e),!(e instanceof NE))return!1;const t=this._repo===e._repo,s=k1(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&s&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+wz(this._path)}}class Nl extends NE{constructor(e,t){super(e,t,new fE,!1)}get parent(){const e=N1(this._path);return e===null?null:new Nl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function c8(n){return uk("remove",n._path),l8(n,null)}function l8(n,e){n=Pe(n),uk("set",n._path),jG("set",e,n._path);const t=new Cp;return ZG(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}SG(Nl);RG(Nl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8="FIREBASE_DATABASE_EMULATOR_HOST",X_={};let h8=!1;function d8(n,e,t,s){n.repoInfo_=new v1(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),s&&(n.authTokenProvider_=s)}function f8(n,e,t,s,r){let i=s||n.options.databaseURL;i===void 0&&(n.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xn("Using default host for project ",n.options.projectId),i=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=VA(i,r),a=o.repoInfo,c;typeof process<"u"&&nA&&(c=nA[u8]),c?(i=`http://${c}?ns=${a.namespace}`,o=VA(i,r),a=o.repoInfo):o.repoInfo.secure;const u=new QK(n.name,n.options,e);qG("Invalid Firebase Database URL",o),ze(o.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");const d=m8(a,n,u,new GK(n.name,t));return new g8(d,n)}function p8(n,e){const t=X_[e];(!t||t[n.key]!==n)&&pi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),t8(n),delete t[n.key]}function m8(n,e,t,s){let r=X_[e.name];r||(r={},X_[e.name]=r);let i=r[n.toURLString()];return i&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new QG(n,h8,t,s),r[n.toURLString()]=i,i}class g8{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(YG(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nl(this._repo,dt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(p8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pi("Cannot call "+e+" on a deleted database.")}}function _8(n=gl(),e){const t=cr(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const s=Sy("database");s&&y8(t,...s)}return t}function y8(n,e,t,s={}){n=Pe(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&pi("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let i;if(r.repoInfo_.nodeAdmin)s.mockUserToken&&pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new mf(mf.OWNER);else if(s.mockUserToken){const o=typeof s.mockUserToken=="string"?s.mockUserToken:Ry(s.mockUserToken,n.app.options.projectId);i=new mf(o)}d8(r,e,t,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(n){OK(Vr),gs(new $n("database",(e,{instanceIdentifier:t})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return f8(s,r,i,t)},"PUBLIC").setMultipleInstances(!0)),Jt(sA,rA,n),Jt(sA,rA,"esm2017")}ci.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ci.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};v8();const E8={class:"container mt-5"},w8={class:"card"},T8={class:"row"},b8={class:"col-12 mt-3"},I8=["src"],A8={class:"col-12"},S8={class:"p-3"},R8={class:"mt-3 mb-3"},C8={class:"mt-3 mb-3"},P8=["disabled"],N8={class:"mt-3 mb-3"},k8=["disabled"],D8={class:"mt-3 mb-3"},O8={class:"row mt-5"},x8={class:"col-12"},L8={class:"card"},V8={class:"table table-striped"},M8={style:{width:"20%"},class:"fs-5 text-break"},F8={style:{width:"20%"},class:"fs-5 text-break"},U8={style:{width:"20%"},class:"fs-5 text-break"},$8={style:{width:"20%"}},B8=["src"],j8={style:{width:"20%"}},q8={class:"card-body"},H8={__name:"user_info",setup(n){const e=Xf();_8();const t=hi(),s=Xe(""),r=Xe(""),i=Xe(""),o=Xe(""),a=Xe(!0);let c="";const u=async()=>{if(!c){console.log("No current user ID available");return}try{const I=await Le.get(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/users/${c}.json`);console.log(I.data),s.value=I.data.username||"",r.value=I.data.email||"",o.value=I.data.photoURL||""}catch(I){console.error("Lỗi khi lấy dữ liệu:",I)}};ul(()=>{const I=hi();pR(I,b=>{b?(c=b.uid,u()):console.log("No user is signed in.")})});const d=I=>{const b=I.target.files[0];if(b){const O=new FileReader;O.onload=x=>{o.value=x.target.result},O.readAsDataURL(b)}},f=async()=>{const b=document.querySelector('input[type="file"]').files[0];try{let O;if(b){const M=`profile_pictures/${b.name}`,K=La(e,M);await Jf(K,b),O=await al(K)}o.value=O;const x=c;await Le.patch(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/users/${x}.json`,{photoURL:O||O,username:s.value})}catch(O){console.error("Error updating profile picture:",O)}},g=async()=>{const b=t.currentUser.uid;console.log(b);try{await c8(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/users/${b}.json`),alert("Tài khoản đã được xóa thành công!")}catch(O){console.error("Error deleting account:",O),alert("Xóa tài khoản không thành công!")}},v=Xe([]);async function w(){try{const I=t.currentUser;if(!I){console.error("Không có người dùng đăng nhập");return}const b=I.uid;console.log(b);const O=await Le.get("https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs.json");if(O.data){const x=Object.values(O.data);console.log("Tất cả các blog:",x);const M=x.filter(K=>K.uid===b);console.log("Blog có uid ",M),v.value=M}else console.log("Không có blog nào.")}catch(I){console.error("Lỗi khi lấy dữ liệu blog:",I)}}return w(),(I,b)=>{const O=vf("router-link");return Ye(),Ze("div",E8,[k("div",w8,[k("div",T8,[k("div",b8,[k("img",{class:"rounded-circle d-flex m-auto",src:o.value||"https://www.kindpng.com/picc/m/22-223863_no-avatar-png-circle-transparent-png.png",alt:"Card image",style:{width:"200px",height:"200px"}},null,8,I8)]),k("div",A8,[k("div",S8,[k("form",{onSubmit:wp(f,["prevent"])},[k("div",R8,[b[3]||(b[3]=k("label",{for:"",class:"form-label"},"User name:",-1)),fn(k("input",{type:"text",class:"form-control",placeholder:"Normal input","onUpdate:modelValue":b[0]||(b[0]=x=>s.value=x)},null,512),[[Xn,s.value]])]),k("div",C8,[b[4]||(b[4]=k("label",{for:"",class:"form-label"},"Email:",-1)),fn(k("input",{type:"email",class:"form-control",placeholder:"Normal input","onUpdate:modelValue":b[1]||(b[1]=x=>r.value=x),disabled:a.value},null,8,P8),[[Xn,r.value]])]),k("div",N8,[b[5]||(b[5]=k("label",{for:"",class:"form-label"},"Password:",-1)),fn(k("input",{type:"password",class:"form-control",placeholder:"Normal input","onUpdate:modelValue":b[2]||(b[2]=x=>i.value=x),disabled:a.value},null,8,k8),[[Xn,i.value]])]),k("div",D8,[b[6]||(b[6]=k("label",{for:"",class:"form-label"},"Upload New Profile Picture:",-1)),k("input",{type:"file",class:"form-control",onChange:d},null,32)]),b[7]||(b[7]=k("button",{class:"btn btn-primary",type:"submit"},"Cập nhật thông tin",-1)),k("button",{class:"btn btn-danger ms-3",onClick:g,disabled:""},"Xóa tài khoản")],32)])])])]),k("div",O8,[k("div",x8,[k("div",L8,[k("table",V8,[b[9]||(b[9]=k("thead",null,[k("tr",null,[k("th",null,"Tiêu đề"),k("th",null,"Nội dung"),k("th",null,"Tác giả"),k("th",null,"Hình ảnh"),k("th",null,"Edit/Delete")])],-1)),k("tbody",null,[(Ye(!0),Ze(gn,null,_a(v.value,(x,M)=>(Ye(),Ze("tr",{key:x.id||M},[k("td",M8,Ct(x.title),1),k("td",F8,Ct(x.content),1),k("td",U8,Ct(x.author),1),k("td",$8,[k("img",{src:x.imageURL,alt:"",width:"200px"},null,8,B8)]),k("td",j8,[k("div",q8,[It(O,{class:"card-text text-decoration-none text-dark",to:{name:"edit_blog",params:{id:x.id}}},{default:vr(()=>b[8]||(b[8]=[k("button",{class:"btn btn-success"},"Xem chi tiết",-1)])),_:2},1032,["to"])])])]))),128))])])])])])])}}},W8=Ka(H8,[["__scopeId","data-v-d6660ca1"]]),K8={class:"container",style:{"min-height":"76.1vh",width:"auto"}},z8={class:"row mt-5"},G8={class:"col-12"},Q8={class:"card p-3"},Y8={class:"row"},J8={class:"col-4"},X8={class:"mb-3 mt-3"},Z8={key:0,class:"text-danger"},e7={class:"mb-3 mt-3"},t7={key:0,class:"text-danger"},n7={class:"mb-3 mt-3"},s7=["src"],r7={key:1,class:"text-danger"},i7={class:"col-8 d-flex",style:{"flex-wrap":"wrap"}},o7={class:"form-label"},a7=["onUpdate:modelValue"],c7={key:0,class:"text-danger"},l7={class:"form-label mt-2"},u7=["src"],h7=["onChange"],d7={__name:"editblog",setup(n){const e=Xe(""),t=Xe(""),s=Xe(""),r=Xe([{content:"",imageSection:""}]),i=Xe({title:"",author:"",imageURL:"",sections:[]}),o=MR(),a=Xe(o.params.id),c=Hy(),u=Xf(),d=()=>{let O=!0;return i.value={title:"",author:"",imageURL:"",sections:[]},e.value||(i.value.title="Tiêu đề không được để trống.",O=!1),t.value||(i.value.author="Tác giả không được để trống.",O=!1),s.value||(i.value.imageURL="Vui lòng chọn ảnh chính.",O=!1),r.value.forEach((x,M)=>{i.value.sections[M]={content:""},x.content||(i.value.sections[M].content="Nội dung không được để trống.",O=!1)}),O},f=async()=>{if(a.value)try{const O=await Le.get(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs/${a.value}.json`);e.value=O.data.title||"",t.value=O.data.author||"",s.value=O.data.imageURL||"",r.value=O.data.sections||[{content:"",imageSection:""}]}catch(O){console.error("Lỗi khi lấy dữ liệu bài viết:",O)}},g=async O=>{const x=O.target.files[0];if(x){const M=`blog_images/${x.name}`,K=La(u,M);try{await Jf(K,x),s.value=await al(K)}catch(ie){console.error("Lỗi khi tải lên ảnh chính:",ie)}}},v=async(O,x)=>{const M=O.target.files[0];if(M){const K=`section_images/${M.name}`,ie=La(u,K);try{const re=await al(ie);r.value[x].imageSection=re}catch(re){console.error("Lỗi khi tải lên ảnh section:",re)}}},w=()=>{r.value.push({content:"",imageSection:""})},I=async()=>{if(d())try{await Le.patch(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs/${a.value}.json`,{imageURL:s.value,title:e.value,author:t.value,sections:r.value}),alert("Cập nhật bài viết thành công!")}catch(O){console.error("Lỗi khi cập nhật bài viết:",O),alert("Không thể cập nhật bài viết. Vui lòng thử lại.")}},b=async()=>{if(confirm("Bạn có chắc chắn muốn xóa bài viết này?"))try{await Le.delete(`https://vuejs2-f46ed-default-rtdb.asia-southeast1.firebasedatabase.app/blogs/${a.value}.json`),alert("Bài viết đã được xóa thành công!"),c.push("/")}catch(O){console.error("Lỗi khi xóa bài viết:",O),alert("Không thể xóa bài viết. Vui lòng thử lại.")}};return ul(f),(O,x)=>(Ye(),Ze("div",K8,[k("div",z8,[k("div",G8,[k("div",Q8,[x[6]||(x[6]=k("h1",{class:"text-center"},"Chỉnh sửa blog",-1)),k("form",{onSubmit:wp(I,["prevent"])},[k("div",Y8,[k("div",J8,[k("div",X8,[x[2]||(x[2]=k("label",{for:"title",class:"form-label"},"Tiêu đề:",-1)),fn(k("input",{type:"text","onUpdate:modelValue":x[0]||(x[0]=M=>e.value=M),class:"form-control",id:"title",placeholder:"Tiêu đề",required:""},null,512),[[Xn,e.value]]),i.value.title?(Ye(),Ze("div",Z8,Ct(i.value.title),1)):Os("",!0)]),k("div",e7,[x[3]||(x[3]=k("label",{for:"author",class:"form-label"},"Tác giả:",-1)),fn(k("input",{type:"text","onUpdate:modelValue":x[1]||(x[1]=M=>t.value=M),class:"form-control",id:"author",placeholder:"Tác giả",required:""},null,512),[[Xn,t.value]]),i.value.author?(Ye(),Ze("div",t7,Ct(i.value.author),1)):Os("",!0)]),k("div",n7,[x[4]||(x[4]=k("label",{for:"file",class:"form-label me-3"},"Hình ảnh chính:",-1)),s.value?(Ye(),Ze("img",{key:0,src:s.value,width:"200px",alt:"Uploaded Image"},null,8,s7)):Os("",!0),k("input",{type:"file",onChange:g,class:"ms-3",accept:"image/*"},null,32),i.value.imageURL?(Ye(),Ze("div",r7,Ct(i.value.imageURL),1)):Os("",!0)]),k("button",{type:"button",onClick:w,class:"btn btn-secondary me-2"},"+"),x[5]||(x[5]=k("button",{type:"submit",class:"btn btn-primary ms-2"},"Cập nhật",-1)),k("button",{type:"button",onClick:b,class:"btn btn-danger ms-2"},"Xóa Bài Viết")]),k("div",i7,[(Ye(!0),Ze(gn,null,_a(r.value,(M,K)=>{var ie;return Ye(),Ze("div",{key:K,class:"mb-3 mt-3 ms-3",style:{width:"45%"}},[k("label",o7,"Nội dung phần "+Ct(K+1)+":",1),fn(k("textarea",{"onUpdate:modelValue":re=>M.content=re,class:"form-control",rows:"3",style:{height:"25vh"},placeholder:"Nhập nội dung phần này...",required:""},null,8,a7),[[Xn,M.content]]),(ie=i.value.sections[K])!=null&&ie.content?(Ye(),Ze("div",c7,Ct(i.value.sections[K].content),1)):Os("",!0),k("label",l7,"Hình ảnh phần "+Ct(K+1)+":",1),M.imageSection?(Ye(),Ze("img",{key:1,src:M.imageSection,width:"150px",alt:"Section Image"},null,8,u7)):Os("",!0),k("input",{type:"file",onChange:re=>v(re,K),class:"ms-3",accept:"image/*"},null,40,h7)])}),128))])])],32)])])])]))}},f7=Ka(d7,[["__scopeId","data-v-4ec8fee2"]]),p7=[{path:"/",name:"home",component:TW},{path:"/createblog",name:"createBlog",component:qW,meta:{requireAuth:!0}},{path:"/login",name:"login",component:sK},{path:"/infoblog/:id",name:"infoblog",component:DK,meta:{requireAuth:!0}},{path:"/User_info",name:"User_info",component:W8,meta:{requireAuth:!0}},{path:"/edit_blog/:id",name:"edit_blog",component:f7,meta:{requireAuth:!0}}],yk=S4({history:s4(),routes:p7});yk.beforeEach((n,e,t)=>{n.matched.some(s=>s.meta.requireAuth)?hi().currentUser?t():(alert("Vui lòng đăng nhập!!!"),t("/")):t()});window.axios=Le;eM(sW).use(yk).mount("#app");
